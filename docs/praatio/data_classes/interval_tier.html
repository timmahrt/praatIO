<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 14.1.0"/>
    <title>praatio.data_classes.interval_tier API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../data_classes.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;praatio.data_classes</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#IntervalTier">IntervalTier</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#IntervalTier.__init__">IntervalTier</a>
                        </li>
                        <li>
                                <a class="variable" href="#IntervalTier.tierType">tierType</a>
                        </li>
                        <li>
                                <a class="variable" href="#IntervalTier.entryType">entryType</a>
                        </li>
                        <li>
                                <a class="variable" href="#IntervalTier.timestamps">timestamps</a>
                        </li>
                        <li>
                                <a class="function" href="#IntervalTier.crop">crop</a>
                        </li>
                        <li>
                                <a class="function" href="#IntervalTier.dejitter">dejitter</a>
                        </li>
                        <li>
                                <a class="function" href="#IntervalTier.deleteEntry">deleteEntry</a>
                        </li>
                        <li>
                                <a class="function" href="#IntervalTier.difference">difference</a>
                        </li>
                        <li>
                                <a class="function" href="#IntervalTier.editTimestamps">editTimestamps</a>
                        </li>
                        <li>
                                <a class="function" href="#IntervalTier.eraseRegion">eraseRegion</a>
                        </li>
                        <li>
                                <a class="function" href="#IntervalTier.getValuesInIntervals">getValuesInIntervals</a>
                        </li>
                        <li>
                                <a class="function" href="#IntervalTier.getNonEntries">getNonEntries</a>
                        </li>
                        <li>
                                <a class="function" href="#IntervalTier.insertEntry">insertEntry</a>
                        </li>
                        <li>
                                <a class="function" href="#IntervalTier.insertSpace">insertSpace</a>
                        </li>
                        <li>
                                <a class="function" href="#IntervalTier.intersection">intersection</a>
                        </li>
                        <li>
                                <a class="function" href="#IntervalTier.mergeLabels">mergeLabels</a>
                        </li>
                        <li>
                                <a class="function" href="#IntervalTier.morph">morph</a>
                        </li>
                        <li>
                                <a class="function" href="#IntervalTier.validate">validate</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../../praatio.html">praatio</a><wbr>.<a href="./../data_classes.html">data_classes</a><wbr>.interval_tier    </h1>

                        <div class="docstring"><p>An IntervalTier is a tier containing an array of intervals -- data that spans a period of time</p>
</div>

                        <input id="mod-interval_tier-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-interval_tier-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a><span class="sd">An IntervalTier is a tier containing an array of intervals -- data that spans a period of time</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Sequence</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Literal</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a><span class="kn">from</span> <span class="nn">praatio.utilities.constants</span> <span class="kn">import</span> <span class="p">(</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a>    <span class="n">Interval</span><span class="p">,</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a>    <span class="n">INTERVAL_TIER</span><span class="p">,</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a>    <span class="n">CropCollision</span><span class="p">,</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a><span class="p">)</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a><span class="kn">from</span> <span class="nn">praatio.utilities</span> <span class="kn">import</span> <span class="n">errors</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a><span class="kn">from</span> <span class="nn">praatio.utilities</span> <span class="kn">import</span> <span class="n">utils</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a><span class="kn">from</span> <span class="nn">praatio.utilities</span> <span class="kn">import</span> <span class="n">my_math</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a><span class="kn">from</span> <span class="nn">praatio.utilities</span> <span class="kn">import</span> <span class="n">constants</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a><span class="kn">from</span> <span class="nn">praatio.data_classes</span> <span class="kn">import</span> <span class="n">textgrid_tier</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a><span class="k">def</span> <span class="nf">_homogenizeEntries</span><span class="p">(</span><span class="n">entries</span><span class="p">):</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a><span class="sd">    Enforces consistency in intervals</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a><span class="sd">    - converts all entries to intervals</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a><span class="sd">    - removes whitespace in labels</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a><span class="sd">    - sorts values by time</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a>    <span class="n">processedEntries</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a>        <span class="n">Interval</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">start</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">end</span><span class="p">),</span> <span class="n">label</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a>        <span class="k">for</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">entries</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a>    <span class="p">]</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a>    <span class="n">processedEntries</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a>    <span class="k">return</span> <span class="n">processedEntries</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a><span class="k">def</span> <span class="nf">_calculateMinAndMaxTime</span><span class="p">(</span><span class="n">entries</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Interval</span><span class="p">],</span> <span class="n">minT</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxT</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a>    <span class="n">minTimeList</span> <span class="o">=</span> <span class="p">[</span><span class="n">interval</span><span class="o">.</span><span class="n">start</span> <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">entries</span><span class="p">]</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a>    <span class="n">maxTimeList</span> <span class="o">=</span> <span class="p">[</span><span class="n">interval</span><span class="o">.</span><span class="n">end</span> <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">entries</span><span class="p">]</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a>    <span class="k">if</span> <span class="n">minT</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a>        <span class="n">minTimeList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">minT</span><span class="p">))</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a>    <span class="k">if</span> <span class="n">maxT</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a>        <span class="n">maxTimeList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">maxT</span><span class="p">))</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a>        <span class="n">resolvedMinT</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">minTimeList</span><span class="p">)</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a>        <span class="n">resolvedMaxT</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">maxTimeList</span><span class="p">)</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a>    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a>        <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">TimelessTextgridTierException</span><span class="p">()</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a>    <span class="k">return</span> <span class="p">(</span><span class="n">resolvedMinT</span><span class="p">,</span> <span class="n">resolvedMaxT</span><span class="p">)</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a><span class="k">class</span> <span class="nc">IntervalTier</span><span class="p">(</span><span class="n">textgrid_tier</span><span class="o">.</span><span class="n">TextgridTier</span><span class="p">):</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a>    <span class="n">tierType</span> <span class="o">=</span> <span class="n">INTERVAL_TIER</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a>    <span class="n">entryType</span> <span class="o">=</span> <span class="n">Interval</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a>        <span class="n">entries</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Interval</span><span class="p">],</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a>        <span class="n">minT</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a>        <span class="n">maxT</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a>    <span class="p">):</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;An interval tier is for annotating events that have duration</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a><span class="sd">        The entries is of the form:</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a><span class="sd">        [(startTime1, endTime1, label1), (startTime2, endTime2, label2), ]</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a><span class="sd">        The data stored in the labels can be anything but will</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a><span class="sd">        be interpreted as text by praatio (the label could be descriptive</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a><span class="sd">        text e.g. (&#39;erase this region&#39;) or numerical data e.g. (average pitch</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a><span class="sd">        values like &#39;132&#39;))</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a>        <span class="n">entries</span> <span class="o">=</span> <span class="n">_homogenizeEntries</span><span class="p">(</span><span class="n">entries</span><span class="p">)</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a>        <span class="n">calculatedMinT</span><span class="p">,</span> <span class="n">calculatedMaxT</span> <span class="o">=</span> <span class="n">_calculateMinAndMaxTime</span><span class="p">(</span><span class="n">entries</span><span class="p">,</span> <span class="n">minT</span><span class="p">,</span> <span class="n">maxT</span><span class="p">)</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a>        <span class="nb">super</span><span class="p">(</span><span class="n">IntervalTier</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a>            <span class="n">name</span><span class="p">,</span> <span class="n">entries</span><span class="p">,</span> <span class="n">calculatedMinT</span><span class="p">,</span> <span class="n">calculatedMaxT</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a>        <span class="p">)</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">()</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a>    <span class="k">def</span> <span class="nf">_validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;An interval tier is invalid if the entries are out of order or overlap with each other&quot;&quot;&quot;</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a>        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a>            <span class="k">if</span> <span class="n">entry</span><span class="o">.</span><span class="n">start</span> <span class="o">&gt;=</span> <span class="n">entry</span><span class="o">.</span><span class="n">end</span><span class="p">:</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a>                <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">TextgridStateError</span><span class="p">(</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a>                    <span class="sa">f</span><span class="s2">&quot;The start time of an interval (</span><span class="si">{</span><span class="n">entry</span><span class="o">.</span><span class="n">start</span><span class="si">}</span><span class="s2">) &quot;</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a>                    <span class="sa">f</span><span class="s2">&quot;cannot occur after its end time (</span><span class="si">{</span><span class="n">entry</span><span class="o">.</span><span class="n">end</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a>                <span class="p">)</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a>        <span class="k">for</span> <span class="n">entry</span><span class="p">,</span> <span class="n">nextEntry</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">[</span><span class="mi">0</span><span class="p">::],</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">[</span><span class="mi">1</span><span class="p">::]):</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a>            <span class="k">if</span> <span class="n">entry</span><span class="o">.</span><span class="n">end</span> <span class="o">&gt;</span> <span class="n">nextEntry</span><span class="o">.</span><span class="n">start</span><span class="p">:</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a>                <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">TextgridStateError</span><span class="p">(</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a>                    <span class="s2">&quot;Two intervals in the same tier overlap in time:</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a>                    <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">entry</span><span class="o">.</span><span class="n">start</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">entry</span><span class="o">.</span><span class="n">end</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">entry</span><span class="o">.</span><span class="n">label</span><span class="si">}</span><span class="s2">) and &quot;</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a>                    <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">nextEntry</span><span class="o">.</span><span class="n">start</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">nextEntry</span><span class="o">.</span><span class="n">end</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">nextEntry</span><span class="o">.</span><span class="n">label</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a>                <span class="p">)</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a>    <span class="nd">@property</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a>    <span class="k">def</span> <span class="nf">timestamps</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;All unique timestamps used in this tier&quot;&quot;&quot;</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a>        <span class="n">tmpTimestamps</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a>            <span class="n">time</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a>            <span class="k">for</span> <span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a>            <span class="k">for</span> <span class="n">time</span> <span class="ow">in</span> <span class="p">[</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a>                <span class="n">start</span><span class="p">,</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a>                <span class="n">stop</span><span class="p">,</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a>            <span class="p">]</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a>        <span class="p">]</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a>        <span class="n">uniqueTimestamps</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">tmpTimestamps</span><span class="p">))</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a>        <span class="n">uniqueTimestamps</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a>        <span class="k">return</span> <span class="n">uniqueTimestamps</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a>    <span class="k">def</span> <span class="nf">crop</span><span class="p">(</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a>        <span class="n">cropStart</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a>        <span class="n">cropEnd</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a>        <span class="n">mode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;strict&quot;</span><span class="p">,</span> <span class="s2">&quot;lax&quot;</span><span class="p">,</span> <span class="s2">&quot;truncated&quot;</span><span class="p">],</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a>        <span class="n">rebaseToZero</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">:</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a new tier with all entries that fit inside the new interval</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a><span class="sd">        Args:</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a><span class="sd">            cropStart:</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a><span class="sd">            cropEnd:</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a><span class="sd">            mode: determines cropping behavior</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a><span class="sd">                - &#39;strict&#39;, only intervals wholly contained by the crop</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a><span class="sd">                    interval will be kept</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a><span class="sd">                - &#39;lax&#39;, partially contained intervals will be kept</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a><span class="sd">                - &#39;truncated&#39;, partially contained intervals will be</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a><span class="sd">                    truncated to fit within the crop region.</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a><span class="sd">            rebaseToZero: if True, the cropped textgrid values</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a><span class="sd">                will be subtracted by the cropStart</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a><span class="sd">        Returns:</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a><span class="sd">            the modified version of the current tier</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a>        <span class="n">utils</span><span class="o">.</span><span class="n">validateOption</span><span class="p">(</span><span class="s2">&quot;mode&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">CropCollision</span><span class="p">)</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a>        <span class="k">if</span> <span class="n">cropStart</span> <span class="o">&gt;=</span> <span class="n">cropEnd</span><span class="p">:</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a>            <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">ArgumentError</span><span class="p">(</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a>                <span class="sa">f</span><span class="s2">&quot;Crop error: start time (</span><span class="si">{</span><span class="n">cropStart</span><span class="si">}</span><span class="s2">) must occur before end time (</span><span class="si">{</span><span class="n">cropEnd</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a>            <span class="p">)</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a>        <span class="n">newEntryList</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">getIntervalsInInterval</span><span class="p">(</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a>            <span class="n">cropStart</span><span class="p">,</span> <span class="n">cropEnd</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">,</span> <span class="n">mode</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a>        <span class="p">)</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a>        <span class="k">if</span> <span class="n">rebaseToZero</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a>            <span class="n">newSmallestValue</span> <span class="o">=</span> <span class="n">newEntryList</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a>            <span class="k">if</span> <span class="n">newSmallestValue</span> <span class="o">&lt;</span> <span class="n">cropStart</span><span class="p">:</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a>                <span class="n">timeDiff</span> <span class="o">=</span> <span class="n">newSmallestValue</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a>                <span class="n">timeDiff</span> <span class="o">=</span> <span class="n">cropStart</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a>            <span class="n">newEntryList</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a>                <span class="n">Interval</span><span class="p">(</span><span class="n">start</span> <span class="o">-</span> <span class="n">timeDiff</span><span class="p">,</span> <span class="n">end</span> <span class="o">-</span> <span class="n">timeDiff</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a>                <span class="k">for</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">newEntryList</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a>            <span class="p">]</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a>            <span class="n">minT</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a>            <span class="n">maxT</span> <span class="o">=</span> <span class="n">cropEnd</span> <span class="o">-</span> <span class="n">cropStart</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a>            <span class="n">minT</span> <span class="o">=</span> <span class="n">cropStart</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a>            <span class="n">maxT</span> <span class="o">=</span> <span class="n">cropEnd</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a>        <span class="n">croppedTier</span> <span class="o">=</span> <span class="n">IntervalTier</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">newEntryList</span><span class="p">,</span> <span class="n">minT</span><span class="p">,</span> <span class="n">maxT</span><span class="p">)</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a>        <span class="k">return</span> <span class="n">croppedTier</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a>    <span class="k">def</span> <span class="nf">dejitter</span><span class="p">(</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a>        <span class="n">referenceTier</span><span class="p">:</span> <span class="n">textgrid_tier</span><span class="o">.</span><span class="n">TextgridTier</span><span class="p">,</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a>        <span class="n">maxDifference</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.001</span><span class="p">,</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">textgrid_tier</span><span class="o">.</span><span class="n">TextgridTier</span><span class="p">:</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a><span class="sd">        Set timestamps in this tier to be the same as values in the reference tier</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a><span class="sd">        Timestamps will only be moved if they are less than maxDifference away from the</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a><span class="sd">        reference time.</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a><span class="sd">        This can be used to correct minor alignment errors between tiers, as made when</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a><span class="sd">        annotating files manually, etc.</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a><span class="sd">        Args:</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a><span class="sd">            referenceTier: the IntervalTier or PointTier to use as a reference</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a><span class="sd">            maxDifference: the maximum amount to allow timestamps to be moved by</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a><span class="sd">        Returns:</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a><span class="sd">            the modified version of the current tier</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a>        <span class="n">referenceTimestamps</span> <span class="o">=</span> <span class="n">referenceTier</span><span class="o">.</span><span class="n">timestamps</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a>        <span class="n">newEntries</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a>        <span class="k">for</span> <span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a>            <span class="n">startCompare</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">referenceTimestamps</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">start</span><span class="p">))</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a>            <span class="n">stopCompare</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">referenceTimestamps</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">stop</span><span class="p">))</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a>            <span class="k">if</span> <span class="n">my_math</span><span class="o">.</span><span class="n">lessThanOrEqual</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">start</span> <span class="o">-</span> <span class="n">startCompare</span><span class="p">),</span> <span class="n">maxDifference</span><span class="p">):</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a>                <span class="n">start</span> <span class="o">=</span> <span class="n">startCompare</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a>            <span class="k">if</span> <span class="n">my_math</span><span class="o">.</span><span class="n">lessThanOrEqual</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">stop</span> <span class="o">-</span> <span class="n">stopCompare</span><span class="p">),</span> <span class="n">maxDifference</span><span class="p">):</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a>                <span class="n">stop</span> <span class="o">=</span> <span class="n">stopCompare</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a>            <span class="n">newEntries</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">label</span><span class="p">))</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">entries</span><span class="o">=</span><span class="n">newEntries</span><span class="p">)</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a>    <span class="k">def</span> <span class="nf">deleteEntry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entry</span><span class="p">:</span> <span class="n">Interval</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes an entry from the entries&quot;&quot;&quot;</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a>    <span class="k">def</span> <span class="nf">difference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tier</span><span class="p">:</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">:</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Takes the set difference of this tier and the given one</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a><span class="sd">        Any overlapping portions of entries with entries in this textgrid</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a><span class="sd">        will be removed from the returned tier.</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a><span class="sd">        Args:</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a><span class="sd">            tier: the tier to subtract from this one</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a><span class="sd">        Returns:</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a><span class="sd">            the modified version of the current tier</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a>        <span class="n">retTier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a>        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">tier</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a>            <span class="n">retTier</span> <span class="o">=</span> <span class="n">retTier</span><span class="o">.</span><span class="n">eraseRegion</span><span class="p">(</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a>                <span class="n">entry</span><span class="o">.</span><span class="n">start</span><span class="p">,</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a>                <span class="n">entry</span><span class="o">.</span><span class="n">end</span><span class="p">,</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a>                <span class="n">collisionMode</span><span class="o">=</span><span class="n">constants</span><span class="o">.</span><span class="n">EraseCollision</span><span class="o">.</span><span class="n">TRUNCATE</span><span class="p">,</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a>                <span class="n">doShrink</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a>            <span class="p">)</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a>        <span class="k">return</span> <span class="n">retTier</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a>    <span class="k">def</span> <span class="nf">editTimestamps</span><span class="p">(</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a>        <span class="n">offset</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a>        <span class="n">reportingMode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;silence&quot;</span><span class="p">,</span> <span class="s2">&quot;warning&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;warning&quot;</span><span class="p">,</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">:</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Modifies all timestamps by a constant amount</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a><span class="sd">        Args:</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a><span class="sd">            offset: the amount to shift all intervals</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a><span class="sd">            reportingMode: Determines the behavior if an entries moves outside</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a><span class="sd">                of minTimestamp or maxTimestamp after being edited</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a><span class="sd">        Returns:</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a><span class="sd">            the modified version of the current tier</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a>        <span class="n">utils</span><span class="o">.</span><span class="n">validateOption</span><span class="p">(</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a>            <span class="s2">&quot;reportingMode&quot;</span><span class="p">,</span> <span class="n">reportingMode</span><span class="p">,</span> <span class="n">constants</span><span class="o">.</span><span class="n">ErrorReportingMode</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a>        <span class="p">)</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a>        <span class="n">errorReporter</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">getErrorReporter</span><span class="p">(</span><span class="n">reportingMode</span><span class="p">)</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a>        <span class="n">newEntryList</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a>        <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a>            <span class="n">newStart</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a>            <span class="n">newEnd</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a>            <span class="n">utils</span><span class="o">.</span><span class="n">checkIsUndershoot</span><span class="p">(</span><span class="n">newStart</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">minTimestamp</span><span class="p">,</span> <span class="n">errorReporter</span><span class="p">)</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a>            <span class="n">utils</span><span class="o">.</span><span class="n">checkIsOvershoot</span><span class="p">(</span><span class="n">newEnd</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span><span class="p">,</span> <span class="n">errorReporter</span><span class="p">)</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a>            <span class="k">if</span> <span class="n">newEnd</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a>                <span class="k">continue</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a>            <span class="k">if</span> <span class="n">newStart</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a>                <span class="n">newStart</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a>            <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Interval</span><span class="p">(</span><span class="n">newStart</span><span class="p">,</span> <span class="n">newEnd</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">label</span><span class="p">))</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a>        <span class="c1"># Determine new min and max timestamps</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a>        <span class="n">newMin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">([</span><span class="n">interval</span><span class="o">.</span><span class="n">start</span> <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">newEntryList</span><span class="p">])</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a>        <span class="n">newMax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="n">interval</span><span class="o">.</span><span class="n">end</span> <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">newEntryList</span><span class="p">])</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a>        <span class="k">if</span> <span class="n">newMin</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">minTimestamp</span><span class="p">:</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a>            <span class="n">newMin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">minTimestamp</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a>        <span class="k">if</span> <span class="n">newMax</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span><span class="p">:</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos">283</span></a>            <span class="n">newMax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos">284</span></a>
</span><span id="L-285"><a href="#L-285"><span class="linenos">285</span></a>        <span class="k">return</span> <span class="n">IntervalTier</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">newEntryList</span><span class="p">,</span> <span class="n">newMin</span><span class="p">,</span> <span class="n">newMax</span><span class="p">)</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos">286</span></a>
</span><span id="L-287"><a href="#L-287"><span class="linenos">287</span></a>    <span class="k">def</span> <span class="nf">eraseRegion</span><span class="p">(</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos">288</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos">289</span></a>        <span class="n">start</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos">290</span></a>        <span class="n">end</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos">291</span></a>        <span class="n">collisionMode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;truncate&quot;</span><span class="p">,</span> <span class="s2">&quot;categorical&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos">292</span></a>        <span class="n">doShrink</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos">293</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">:</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos">294</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Makes a region in a tier blank (removes all contained entries)</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos">295</span></a>
</span><span id="L-296"><a href="#L-296"><span class="linenos">296</span></a><span class="sd">        Args:</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos">297</span></a><span class="sd">            start:</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos">298</span></a><span class="sd">            end:</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos">299</span></a><span class="sd">            collisionMode: Determines the behavior when the region to erase</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos">300</span></a><span class="sd">                overlaps with existing intervals.</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos">301</span></a><span class="sd">                - &#39;truncate&#39; partially contained entries will have the portion</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos">302</span></a><span class="sd">                    removed that overlaps with the target entry</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos">303</span></a><span class="sd">                - &#39;categorical&#39; all entries that overlap, even partially, with</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos">304</span></a><span class="sd">                    the target entry will be completely removed</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos">305</span></a><span class="sd">                - None or any other value throws IntervalCollision</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos">306</span></a><span class="sd">            doShrink: If True, moves leftward by (/end/ - /start/)</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos">307</span></a><span class="sd">                amount, each item that occurs after /end/</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos">308</span></a>
</span><span id="L-309"><a href="#L-309"><span class="linenos">309</span></a><span class="sd">        Returns:</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos">310</span></a><span class="sd">            The modified version of the current tier</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos">311</span></a>
</span><span id="L-312"><a href="#L-312"><span class="linenos">312</span></a><span class="sd">        Raises:</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos">313</span></a><span class="sd">            CollisionError</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos">314</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos">315</span></a>        <span class="n">utils</span><span class="o">.</span><span class="n">validateOption</span><span class="p">(</span><span class="s2">&quot;collisionMode&quot;</span><span class="p">,</span> <span class="n">collisionMode</span><span class="p">,</span> <span class="n">constants</span><span class="o">.</span><span class="n">EraseCollision</span><span class="p">)</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos">316</span></a>
</span><span id="L-317"><a href="#L-317"><span class="linenos">317</span></a>        <span class="n">matchList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">CropCollision</span><span class="o">.</span><span class="n">LAX</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">entries</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos">318</span></a>        <span class="n">newTier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos">319</span></a>
</span><span id="L-320"><a href="#L-320"><span class="linenos">320</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matchList</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos">321</span></a>            <span class="k">pass</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos">322</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos">323</span></a>            <span class="k">if</span> <span class="n">collisionMode</span> <span class="o">==</span> <span class="n">constants</span><span class="o">.</span><span class="n">EraseCollision</span><span class="o">.</span><span class="n">ERROR</span><span class="p">:</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos">324</span></a>                <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">CollisionError</span><span class="p">(</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos">325</span></a>                    <span class="sa">f</span><span class="s2">&quot;Erase region (</span><span class="si">{</span><span class="n">start</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">end</span><span class="si">}</span><span class="s2">)overlapped with an interval. &quot;</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos">326</span></a>                    <span class="s2">&quot;If this was expected, consider setting the collisionMode&quot;</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos">327</span></a>                <span class="p">)</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos">328</span></a>
</span><span id="L-329"><a href="#L-329"><span class="linenos">329</span></a>            <span class="c1"># Remove all the matches from the entries</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos">330</span></a>            <span class="c1"># Go in reverse order because we&#39;re destructively altering</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos">331</span></a>            <span class="c1"># the order of the list (messes up index order)</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos">332</span></a>            <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">matchList</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos">333</span></a>                <span class="n">newTier</span><span class="o">.</span><span class="n">deleteEntry</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos">334</span></a>
</span><span id="L-335"><a href="#L-335"><span class="linenos">335</span></a>            <span class="c1"># If we&#39;re only truncating, reinsert entries on the left and</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos">336</span></a>            <span class="c1"># right edges</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos">337</span></a>            <span class="c1"># if categorical, it doesn&#39;t make it into the list at all</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos">338</span></a>            <span class="k">if</span> <span class="n">collisionMode</span> <span class="o">==</span> <span class="n">constants</span><span class="o">.</span><span class="n">EraseCollision</span><span class="o">.</span><span class="n">TRUNCATE</span><span class="p">:</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos">339</span></a>                <span class="c1"># Check left edge</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos">340</span></a>                <span class="k">if</span> <span class="n">matchList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">start</span> <span class="o">&lt;</span> <span class="n">start</span><span class="p">:</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos">341</span></a>                    <span class="n">newEntry</span> <span class="o">=</span> <span class="n">Interval</span><span class="p">(</span><span class="n">matchList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">matchList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">label</span><span class="p">)</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos">342</span></a>                    <span class="n">newTier</span><span class="o">.</span><span class="n">insertEntry</span><span class="p">(</span><span class="n">newEntry</span><span class="p">)</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos">343</span></a>
</span><span id="L-344"><a href="#L-344"><span class="linenos">344</span></a>                <span class="c1"># Check right edge</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos">345</span></a>                <span class="k">if</span> <span class="n">matchList</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span> <span class="o">&gt;</span> <span class="n">end</span><span class="p">:</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos">346</span></a>                    <span class="n">newEntry</span> <span class="o">=</span> <span class="n">Interval</span><span class="p">(</span><span class="n">end</span><span class="p">,</span> <span class="n">matchList</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">matchList</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">label</span><span class="p">)</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos">347</span></a>                    <span class="n">newTier</span><span class="o">.</span><span class="n">insertEntry</span><span class="p">(</span><span class="n">newEntry</span><span class="p">)</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos">348</span></a>
</span><span id="L-349"><a href="#L-349"><span class="linenos">349</span></a>        <span class="k">if</span> <span class="n">doShrink</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos">350</span></a>            <span class="n">diff</span> <span class="o">=</span> <span class="n">end</span> <span class="o">-</span> <span class="n">start</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos">351</span></a>            <span class="n">newEntryList</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos">352</span></a>            <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">newTier</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos">353</span></a>                <span class="k">if</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span> <span class="o">&lt;=</span> <span class="n">start</span><span class="p">:</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos">354</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos">355</span></a>                <span class="k">elif</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span> <span class="o">&gt;=</span> <span class="n">end</span><span class="p">:</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos">356</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos">357</span></a>                        <span class="n">Interval</span><span class="p">(</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos">358</span></a>                            <span class="n">interval</span><span class="o">.</span><span class="n">start</span> <span class="o">-</span> <span class="n">diff</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">diff</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">label</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos">359</span></a>                        <span class="p">)</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos">360</span></a>                    <span class="p">)</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos">361</span></a>
</span><span id="L-362"><a href="#L-362"><span class="linenos">362</span></a>            <span class="c1"># Special case: an interval that spanned the deleted</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos">363</span></a>            <span class="c1"># section</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos">364</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">newEntryList</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos">365</span></a>                <span class="n">rightEdge</span> <span class="o">=</span> <span class="n">newEntryList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">end</span> <span class="o">==</span> <span class="n">start</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos">366</span></a>                <span class="n">leftEdge</span> <span class="o">=</span> <span class="n">newEntryList</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">start</span> <span class="o">==</span> <span class="n">start</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos">367</span></a>                <span class="n">sameLabel</span> <span class="o">=</span> <span class="n">newEntryList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">label</span> <span class="o">==</span> <span class="n">newEntryList</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">label</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos">368</span></a>                <span class="k">if</span> <span class="n">rightEdge</span> <span class="ow">and</span> <span class="n">leftEdge</span> <span class="ow">and</span> <span class="n">sameLabel</span><span class="p">:</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos">369</span></a>                    <span class="n">newInterval</span> <span class="o">=</span> <span class="n">Interval</span><span class="p">(</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos">370</span></a>                        <span class="n">newEntryList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">,</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos">371</span></a>                        <span class="n">newEntryList</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">,</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos">372</span></a>                        <span class="n">newEntryList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos">373</span></a>                    <span class="p">)</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos">374</span></a>
</span><span id="L-375"><a href="#L-375"><span class="linenos">375</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos">376</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos">377</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">newInterval</span><span class="p">)</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos">378</span></a>
</span><span id="L-379"><a href="#L-379"><span class="linenos">379</span></a>                    <span class="c1"># Only one interval can span the deleted section,</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos">380</span></a>                    <span class="c1"># so if we&#39;ve found it, move on</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos">381</span></a>                    <span class="k">break</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos">382</span></a>
</span><span id="L-383"><a href="#L-383"><span class="linenos">383</span></a>            <span class="n">newMax</span> <span class="o">=</span> <span class="n">newTier</span><span class="o">.</span><span class="n">maxTimestamp</span> <span class="o">-</span> <span class="n">diff</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos">384</span></a>            <span class="n">newTier</span> <span class="o">=</span> <span class="n">newTier</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">entries</span><span class="o">=</span><span class="n">newEntryList</span><span class="p">,</span> <span class="n">maxTimestamp</span><span class="o">=</span><span class="n">newMax</span><span class="p">)</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos">385</span></a>
</span><span id="L-386"><a href="#L-386"><span class="linenos">386</span></a>        <span class="k">return</span> <span class="n">newTier</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos">387</span></a>
</span><span id="L-388"><a href="#L-388"><span class="linenos">388</span></a>    <span class="k">def</span> <span class="nf">getValuesInIntervals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataTupleList</span><span class="p">:</span> <span class="n">List</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Interval</span><span class="p">,</span> <span class="n">List</span><span class="p">]]:</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos">389</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns data from dataTupleList contained in labeled intervals</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos">390</span></a>
</span><span id="L-391"><a href="#L-391"><span class="linenos">391</span></a><span class="sd">        Each labeled interval will get its own list of data values.</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos">392</span></a>
</span><span id="L-393"><a href="#L-393"><span class="linenos">393</span></a><span class="sd">        dataTupleList should be of the form:</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos">394</span></a><span class="sd">        [(time1, value1a, value1b,...), (time2, value2a, value2b...), ...]</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos">395</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos">396</span></a>
</span><span id="L-397"><a href="#L-397"><span class="linenos">397</span></a>        <span class="n">returnList</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos">398</span></a>
</span><span id="L-399"><a href="#L-399"><span class="linenos">399</span></a>        <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos">400</span></a>            <span class="n">intervalDataList</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">getValuesInInterval</span><span class="p">(</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos">401</span></a>                <span class="n">dataTupleList</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos">402</span></a>            <span class="p">)</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos">403</span></a>            <span class="n">returnList</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">interval</span><span class="p">,</span> <span class="n">intervalDataList</span><span class="p">))</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos">404</span></a>
</span><span id="L-405"><a href="#L-405"><span class="linenos">405</span></a>        <span class="k">return</span> <span class="n">returnList</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos">406</span></a>
</span><span id="L-407"><a href="#L-407"><span class="linenos">407</span></a>    <span class="k">def</span> <span class="nf">getNonEntries</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Interval</span><span class="p">]:</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos">408</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the regions of the textgrid without labels</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos">409</span></a>
</span><span id="L-410"><a href="#L-410"><span class="linenos">410</span></a><span class="sd">        This can include unlabeled segments and regions marked as silent.</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos">411</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos">412</span></a>        <span class="n">entries</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos">413</span></a>        <span class="n">invertedEntryList</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos">414</span></a>            <span class="n">Interval</span><span class="p">(</span><span class="n">entries</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">entries</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos">415</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">entries</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos">416</span></a>        <span class="p">]</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos">417</span></a>
</span><span id="L-418"><a href="#L-418"><span class="linenos">418</span></a>        <span class="c1"># Remove entries that have no duration (ie lie between two entries</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos">419</span></a>        <span class="c1"># that share a border)</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos">420</span></a>        <span class="n">invertedEntryList</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos">421</span></a>            <span class="n">interval</span> <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">invertedEntryList</span> <span class="k">if</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span> <span class="o">&lt;</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos">422</span></a>        <span class="p">]</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos">423</span></a>
</span><span id="L-424"><a href="#L-424"><span class="linenos">424</span></a>        <span class="k">if</span> <span class="n">entries</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos">425</span></a>            <span class="n">invertedEntryList</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">Interval</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">entries</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos">426</span></a>
</span><span id="L-427"><a href="#L-427"><span class="linenos">427</span></a>        <span class="k">if</span> <span class="n">entries</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span><span class="p">:</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos">428</span></a>            <span class="n">invertedEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Interval</span><span class="p">(</span><span class="n">entries</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos">429</span></a>
</span><span id="L-430"><a href="#L-430"><span class="linenos">430</span></a>        <span class="n">invertedEntryList</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos">431</span></a>            <span class="n">interval</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">interval</span><span class="p">,</span> <span class="n">Interval</span><span class="p">)</span> <span class="k">else</span> <span class="n">Interval</span><span class="p">(</span><span class="o">*</span><span class="n">interval</span><span class="p">)</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos">432</span></a>            <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">invertedEntryList</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos">433</span></a>        <span class="p">]</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos">434</span></a>
</span><span id="L-435"><a href="#L-435"><span class="linenos">435</span></a>        <span class="k">return</span> <span class="n">invertedEntryList</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos">436</span></a>
</span><span id="L-437"><a href="#L-437"><span class="linenos">437</span></a>    <span class="k">def</span> <span class="nf">insertEntry</span><span class="p">(</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos">438</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos">439</span></a>        <span class="n">entry</span><span class="p">:</span> <span class="n">Interval</span><span class="p">,</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos">440</span></a>        <span class="n">collisionMode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;replace&quot;</span><span class="p">,</span> <span class="s2">&quot;merge&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos">441</span></a>        <span class="n">collisionReportingMode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;silence&quot;</span><span class="p">,</span> <span class="s2">&quot;warning&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;warning&quot;</span><span class="p">,</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos">442</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos">443</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Inserts an interval into the tier</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos">444</span></a>
</span><span id="L-445"><a href="#L-445"><span class="linenos">445</span></a><span class="sd">        Args:</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos">446</span></a><span class="sd">            entry: the Interval to insert</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos">447</span></a><span class="sd">            collisionMode: determines the behavior in the event that intervals</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos">448</span></a><span class="sd">                exist in the insertion area.</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos">449</span></a><span class="sd">                - &#39;replace&#39; will remove existing items</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos">450</span></a><span class="sd">                - &#39;merge&#39; will fuse the inserting item with existing items</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos">451</span></a><span class="sd">                - None or any other value will throw a CollisionError</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos">452</span></a><span class="sd">            collisionReportingMode: Determines the behavior if the new entry</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos">453</span></a><span class="sd">                overlaps with an existing one</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos">454</span></a>
</span><span id="L-455"><a href="#L-455"><span class="linenos">455</span></a><span class="sd">        Returns:</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos">456</span></a><span class="sd">            the modified version of the current tier</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos">457</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos">458</span></a>        <span class="n">utils</span><span class="o">.</span><span class="n">validateOption</span><span class="p">(</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos">459</span></a>            <span class="s2">&quot;collisionMode&quot;</span><span class="p">,</span> <span class="n">collisionMode</span><span class="p">,</span> <span class="n">constants</span><span class="o">.</span><span class="n">IntervalCollision</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos">460</span></a>        <span class="p">)</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos">461</span></a>        <span class="n">utils</span><span class="o">.</span><span class="n">validateOption</span><span class="p">(</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos">462</span></a>            <span class="s2">&quot;collisionReportingMode&quot;</span><span class="p">,</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos">463</span></a>            <span class="n">collisionReportingMode</span><span class="p">,</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos">464</span></a>            <span class="n">constants</span><span class="o">.</span><span class="n">ErrorReportingMode</span><span class="p">,</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos">465</span></a>        <span class="p">)</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos">466</span></a>        <span class="n">collisionReporter</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">getErrorReporter</span><span class="p">(</span><span class="n">collisionReportingMode</span><span class="p">)</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos">467</span></a>
</span><span id="L-468"><a href="#L-468"><span class="linenos">468</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entry</span><span class="p">,</span> <span class="n">Interval</span><span class="p">):</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos">469</span></a>            <span class="n">interval</span> <span class="o">=</span> <span class="n">Interval</span><span class="p">(</span><span class="o">*</span><span class="n">entry</span><span class="p">)</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos">470</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos">471</span></a>            <span class="n">interval</span> <span class="o">=</span> <span class="n">entry</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos">472</span></a>
</span><span id="L-473"><a href="#L-473"><span class="linenos">473</span></a>        <span class="n">matchList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos">474</span></a>            <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">CropCollision</span><span class="o">.</span><span class="n">LAX</span><span class="p">,</span> <span class="kc">False</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos">475</span></a>        <span class="p">)</span><span class="o">.</span><span class="n">_entries</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos">476</span></a>
</span><span id="L-477"><a href="#L-477"><span class="linenos">477</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matchList</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos">478</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos">479</span></a>
</span><span id="L-480"><a href="#L-480"><span class="linenos">480</span></a>        <span class="k">elif</span> <span class="n">collisionMode</span> <span class="o">==</span> <span class="n">constants</span><span class="o">.</span><span class="n">IntervalCollision</span><span class="o">.</span><span class="n">REPLACE</span><span class="p">:</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos">481</span></a>            <span class="k">for</span> <span class="n">matchEntry</span> <span class="ow">in</span> <span class="n">matchList</span><span class="p">:</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos">482</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">deleteEntry</span><span class="p">(</span><span class="n">matchEntry</span><span class="p">)</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos">483</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos">484</span></a>
</span><span id="L-485"><a href="#L-485"><span class="linenos">485</span></a>        <span class="k">elif</span> <span class="n">collisionMode</span> <span class="o">==</span> <span class="n">constants</span><span class="o">.</span><span class="n">IntervalCollision</span><span class="o">.</span><span class="n">MERGE</span><span class="p">:</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos">486</span></a>            <span class="k">for</span> <span class="n">matchEntry</span> <span class="ow">in</span> <span class="n">matchList</span><span class="p">:</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos">487</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">deleteEntry</span><span class="p">(</span><span class="n">matchEntry</span><span class="p">)</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos">488</span></a>            <span class="n">matchList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos">489</span></a>            <span class="n">matchList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>  <span class="c1"># By starting time</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos">490</span></a>
</span><span id="L-491"><a href="#L-491"><span class="linenos">491</span></a>            <span class="n">newInterval</span> <span class="o">=</span> <span class="n">Interval</span><span class="p">(</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos">492</span></a>                <span class="nb">min</span><span class="p">([</span><span class="n">tmpInterval</span><span class="o">.</span><span class="n">start</span> <span class="k">for</span> <span class="n">tmpInterval</span> <span class="ow">in</span> <span class="n">matchList</span><span class="p">]),</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos">493</span></a>                <span class="nb">max</span><span class="p">([</span><span class="n">tmpInterval</span><span class="o">.</span><span class="n">end</span> <span class="k">for</span> <span class="n">tmpInterval</span> <span class="ow">in</span> <span class="n">matchList</span><span class="p">]),</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos">494</span></a>                <span class="s2">&quot;-&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">tmpInterval</span><span class="o">.</span><span class="n">label</span> <span class="k">for</span> <span class="n">tmpInterval</span> <span class="ow">in</span> <span class="n">matchList</span><span class="p">]),</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos">495</span></a>            <span class="p">)</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos">496</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newInterval</span><span class="p">)</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos">497</span></a>
</span><span id="L-498"><a href="#L-498"><span class="linenos">498</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos">499</span></a>            <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">CollisionError</span><span class="p">(</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos">500</span></a>                <span class="s2">&quot;Attempted to insert interval &quot;</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos">501</span></a>                <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="si">}</span><span class="s2">, &#39;</span><span class="si">{</span><span class="n">interval</span><span class="o">.</span><span class="n">label</span><span class="si">}</span><span class="s2">&#39;) into tier </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> &quot;</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos">502</span></a>                <span class="s2">&quot;of textgrid but overlapping entries &quot;</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos">503</span></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">interval</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">matchList</span><span class="p">]</span><span class="si">}</span><span class="s2"> &quot;</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos">504</span></a>                <span class="s2">&quot;already exist&quot;</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos">505</span></a>            <span class="p">)</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos">506</span></a>
</span><span id="L-507"><a href="#L-507"><span class="linenos">507</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos">508</span></a>
</span><span id="L-509"><a href="#L-509"><span class="linenos">509</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">minTimestamp</span><span class="p">:</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos">510</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">minTimestamp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos">511</span></a>
</span><span id="L-512"><a href="#L-512"><span class="linenos">512</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span><span class="p">:</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos">513</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos">514</span></a>
</span><span id="L-515"><a href="#L-515"><span class="linenos">515</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matchList</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos">516</span></a>            <span class="n">collisionReporter</span><span class="p">(</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos">517</span></a>                <span class="n">errors</span><span class="o">.</span><span class="n">CollisionError</span><span class="p">,</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos">518</span></a>                <span class="sa">f</span><span class="s2">&quot;Collision warning for (</span><span class="si">{</span><span class="n">interval</span><span class="si">}</span><span class="s2">) with items &quot;</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos">519</span></a>                <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">matchList</span><span class="si">}</span><span class="s2">) of tier &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos">520</span></a>            <span class="p">)</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos">521</span></a>
</span><span id="L-522"><a href="#L-522"><span class="linenos">522</span></a>    <span class="k">def</span> <span class="nf">insertSpace</span><span class="p">(</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos">523</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos">524</span></a>        <span class="n">start</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos">525</span></a>        <span class="n">duration</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos">526</span></a>        <span class="n">collisionMode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;stretch&quot;</span><span class="p">,</span> <span class="s2">&quot;split&quot;</span><span class="p">,</span> <span class="s2">&quot;no_change&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">],</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos">527</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">:</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos">528</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Inserts a blank region into the tier</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos">529</span></a>
</span><span id="L-530"><a href="#L-530"><span class="linenos">530</span></a><span class="sd">        Args:</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos">531</span></a><span class="sd">            start:</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos">532</span></a><span class="sd">            duration:</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos">533</span></a><span class="sd">            collisionMode: Determines the behavior that occurs if</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos">534</span></a><span class="sd">                an interval stradles the starting point</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos">535</span></a><span class="sd">                - &#39;stretch&#39; stretches the interval by /duration/ amount</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos">536</span></a><span class="sd">                - &#39;split&#39; splits the interval into two--everything to the</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos">537</span></a><span class="sd">                    right of &#39;start&#39; will be advanced by &#39;duration&#39; seconds</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos">538</span></a><span class="sd">                - &#39;no change&#39; leaves the interval as is with no change</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos">539</span></a><span class="sd">                - &#39;error&#39; will stop execution and raise an error</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos">540</span></a>
</span><span id="L-541"><a href="#L-541"><span class="linenos">541</span></a><span class="sd">        Returns:</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos">542</span></a><span class="sd">            the modified version of the current tier</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos">543</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos">544</span></a>        <span class="n">utils</span><span class="o">.</span><span class="n">validateOption</span><span class="p">(</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos">545</span></a>            <span class="s2">&quot;collisionMode&quot;</span><span class="p">,</span> <span class="n">collisionMode</span><span class="p">,</span> <span class="n">constants</span><span class="o">.</span><span class="n">WhitespaceCollision</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos">546</span></a>        <span class="p">)</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos">547</span></a>
</span><span id="L-548"><a href="#L-548"><span class="linenos">548</span></a>        <span class="n">newEntryList</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos">549</span></a>        <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos">550</span></a>            <span class="c1"># Entry exists before the insertion point</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos">551</span></a>            <span class="k">if</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span> <span class="o">&lt;=</span> <span class="n">start</span><span class="p">:</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos">552</span></a>                <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos">553</span></a>            <span class="c1"># Entry exists after the insertion point</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos">554</span></a>            <span class="k">elif</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span> <span class="o">&gt;=</span> <span class="n">start</span><span class="p">:</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos">555</span></a>                <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos">556</span></a>                    <span class="n">Interval</span><span class="p">(</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos">557</span></a>                        <span class="n">interval</span><span class="o">.</span><span class="n">start</span> <span class="o">+</span> <span class="n">duration</span><span class="p">,</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos">558</span></a>                        <span class="n">interval</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="n">duration</span><span class="p">,</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos">559</span></a>                        <span class="n">interval</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos">560</span></a>                    <span class="p">)</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos">561</span></a>                <span class="p">)</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos">562</span></a>            <span class="c1"># Entry straddles the insertion point</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos">563</span></a>            <span class="k">elif</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span> <span class="o">&lt;=</span> <span class="n">start</span> <span class="ow">and</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span> <span class="o">&gt;</span> <span class="n">start</span><span class="p">:</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos">564</span></a>                <span class="k">if</span> <span class="n">collisionMode</span> <span class="o">==</span> <span class="n">constants</span><span class="o">.</span><span class="n">WhitespaceCollision</span><span class="o">.</span><span class="n">STRETCH</span><span class="p">:</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos">565</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos">566</span></a>                        <span class="n">Interval</span><span class="p">(</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos">567</span></a>                            <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="n">duration</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">label</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos">568</span></a>                        <span class="p">)</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos">569</span></a>                    <span class="p">)</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos">570</span></a>                <span class="k">elif</span> <span class="n">collisionMode</span> <span class="o">==</span> <span class="n">constants</span><span class="o">.</span><span class="n">WhitespaceCollision</span><span class="o">.</span><span class="n">SPLIT</span><span class="p">:</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos">571</span></a>                    <span class="c1"># Left side of the split</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos">572</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Interval</span><span class="p">(</span><span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">label</span><span class="p">))</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos">573</span></a>                    <span class="c1"># Right side of the split</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos">574</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos">575</span></a>                        <span class="p">(</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos">576</span></a>                            <span class="n">start</span> <span class="o">+</span> <span class="n">duration</span><span class="p">,</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos">577</span></a>                            <span class="n">start</span> <span class="o">+</span> <span class="n">duration</span> <span class="o">+</span> <span class="p">(</span><span class="n">interval</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="p">),</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos">578</span></a>                            <span class="n">interval</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos">579</span></a>                        <span class="p">)</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos">580</span></a>                    <span class="p">)</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos">581</span></a>                <span class="k">elif</span> <span class="n">collisionMode</span> <span class="o">==</span> <span class="n">constants</span><span class="o">.</span><span class="n">WhitespaceCollision</span><span class="o">.</span><span class="n">NO_CHANGE</span><span class="p">:</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos">582</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos">583</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos">584</span></a>                    <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">ArgumentError</span><span class="p">(</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos">585</span></a>                        <span class="sa">f</span><span class="s2">&quot;Collision occured during insertSpace() for interval &#39;</span><span class="si">{</span><span class="n">interval</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
</span><span id="L-586"><a href="#L-586"><span class="linenos">586</span></a>                        <span class="sa">f</span><span class="s2">&quot;and given white space insertion interval (</span><span class="si">{</span><span class="n">start</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">start</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">duration</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos">587</span></a>                    <span class="p">)</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos">588</span></a>
</span><span id="L-589"><a href="#L-589"><span class="linenos">589</span></a>        <span class="n">newTier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
</span><span id="L-590"><a href="#L-590"><span class="linenos">590</span></a>            <span class="n">entries</span><span class="o">=</span><span class="n">newEntryList</span><span class="p">,</span> <span class="n">maxTimestamp</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span> <span class="o">+</span> <span class="n">duration</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos">591</span></a>        <span class="p">)</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos">592</span></a>
</span><span id="L-593"><a href="#L-593"><span class="linenos">593</span></a>        <span class="k">return</span> <span class="n">newTier</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos">594</span></a>
</span><span id="L-595"><a href="#L-595"><span class="linenos">595</span></a>    <span class="k">def</span> <span class="nf">intersection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tier</span><span class="p">:</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">,</span> <span class="n">demarcator</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">:</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos">596</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Takes the set intersection of this tier and the given one</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos">597</span></a>
</span><span id="L-598"><a href="#L-598"><span class="linenos">598</span></a><span class="sd">        - The output will contain one interval for each overlapping pair</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos">599</span></a><span class="sd">          e.g. [(1, 2, &#39;foo&#39;)] and [(1, 1.3, &#39;bang&#39;), (1.7, 2, &#39;wizz&#39;)]</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos">600</span></a><span class="sd">                -&gt; [(1, 1.3, &#39;foo-bang&#39;), (1.7, 2, &#39;foo-wizz&#39;)]</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos">601</span></a><span class="sd">        - Only intervals that exist in both tiers will remain in the returned tier.</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos">602</span></a><span class="sd">          e.g. [(1, 2, &#39;foo&#39;), (3, 4, &#39;bar&#39;)] and [(1, 2, &#39;bang&#39;), (2, 3, &#39;wizz&#39;)]</span>
</span><span id="L-603"><a href="#L-603"><span class="linenos">603</span></a><span class="sd">                -&gt; [(1, 2, &#39;foo-bang&#39;)]</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos">604</span></a><span class="sd">        - If intervals partially overlap, only the overlapping portion will be returned.</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos">605</span></a><span class="sd">          e.g. [(1, 2, &#39;foo&#39;)] and [(0.5, 1.5, &#39;bang&#39;)]</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos">606</span></a><span class="sd">                -&gt; [(1, 1.5, &#39;foo-bang&#39;)]</span>
</span><span id="L-607"><a href="#L-607"><span class="linenos">607</span></a>
</span><span id="L-608"><a href="#L-608"><span class="linenos">608</span></a><span class="sd">        Compare with IntervalTier.mergeLabels</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos">609</span></a>
</span><span id="L-610"><a href="#L-610"><span class="linenos">610</span></a><span class="sd">        Args:</span>
</span><span id="L-611"><a href="#L-611"><span class="linenos">611</span></a><span class="sd">            tier: the tier to intersect with</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos">612</span></a><span class="sd">            demarcator: the character to separate the labels of the overlapping intervals</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos">613</span></a>
</span><span id="L-614"><a href="#L-614"><span class="linenos">614</span></a><span class="sd">        Returns:</span>
</span><span id="L-615"><a href="#L-615"><span class="linenos">615</span></a><span class="sd">            IntervalTier: the modified version of the current tier</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos">616</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-617"><a href="#L-617"><span class="linenos">617</span></a>        <span class="n">retEntryList</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos">618</span></a>        <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">tier</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="L-619"><a href="#L-619"><span class="linenos">619</span></a>            <span class="n">subTier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos">620</span></a>                <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">CropCollision</span><span class="o">.</span><span class="n">TRUNCATED</span><span class="p">,</span> <span class="kc">False</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos">621</span></a>            <span class="p">)</span>
</span><span id="L-622"><a href="#L-622"><span class="linenos">622</span></a>
</span><span id="L-623"><a href="#L-623"><span class="linenos">623</span></a>            <span class="c1"># Combine the labels in the two tiers</span>
</span><span id="L-624"><a href="#L-624"><span class="linenos">624</span></a>            <span class="n">subEntryList</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos">625</span></a>                <span class="p">(</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos">626</span></a>                    <span class="n">subInterval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos">627</span></a>                    <span class="n">subInterval</span><span class="o">.</span><span class="n">end</span><span class="p">,</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos">628</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">subInterval</span><span class="o">.</span><span class="n">label</span><span class="si">}{</span><span class="n">demarcator</span><span class="si">}{</span><span class="n">interval</span><span class="o">.</span><span class="n">label</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos">629</span></a>                <span class="p">)</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos">630</span></a>                <span class="k">for</span> <span class="n">subInterval</span> <span class="ow">in</span> <span class="n">subTier</span><span class="o">.</span><span class="n">entries</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos">631</span></a>            <span class="p">]</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos">632</span></a>
</span><span id="L-633"><a href="#L-633"><span class="linenos">633</span></a>            <span class="n">retEntryList</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">subEntryList</span><span class="p">)</span>
</span><span id="L-634"><a href="#L-634"><span class="linenos">634</span></a>
</span><span id="L-635"><a href="#L-635"><span class="linenos">635</span></a>        <span class="n">newName</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">tier</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos">636</span></a>
</span><span id="L-637"><a href="#L-637"><span class="linenos">637</span></a>        <span class="n">retTier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">newName</span><span class="p">,</span> <span class="n">retEntryList</span><span class="p">)</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos">638</span></a>
</span><span id="L-639"><a href="#L-639"><span class="linenos">639</span></a>        <span class="k">return</span> <span class="n">retTier</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos">640</span></a>
</span><span id="L-641"><a href="#L-641"><span class="linenos">641</span></a>    <span class="k">def</span> <span class="nf">mergeLabels</span><span class="p">(</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos">642</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">tier</span><span class="p">:</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">,</span> <span class="n">demarcator</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos">643</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">:</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos">644</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Merges labels of overlapping tiers into this tier</span>
</span><span id="L-645"><a href="#L-645"><span class="linenos">645</span></a>
</span><span id="L-646"><a href="#L-646"><span class="linenos">646</span></a><span class="sd">        - All intervals in this tier will appear in the output; for the given tier, only intervals</span>
</span><span id="L-647"><a href="#L-647"><span class="linenos">647</span></a><span class="sd">          that overlap with content in this tier will appear in the output</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos">648</span></a><span class="sd">          e.g. [(1, 2, &#39;foo&#39;), (3, 4, &#39;bar&#39;)] and [(1, 2, &#39;bang&#39;), (2, 3, &#39;wizz&#39;)]</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos">649</span></a><span class="sd">                -&gt; [(1, 2, &#39;foo(bang)&#39;), (3, 4, &#39;bar()&#39;)]</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos">650</span></a><span class="sd">        - If multiple entries exist in a subinterval, their labels will be concatenated</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos">651</span></a><span class="sd">          e.g. [(1, 2, &#39;hi&#39;)] and [(1, 1.5, &#39;h&#39;), (1.5, 2, &#39;ai&#39;)] -&gt; [(1, 2, &#39;hi(h,ai)&#39;)]</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos">652</span></a>
</span><span id="L-653"><a href="#L-653"><span class="linenos">653</span></a><span class="sd">        compare with IntervalTier.intersection</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos">654</span></a>
</span><span id="L-655"><a href="#L-655"><span class="linenos">655</span></a><span class="sd">        Args:</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos">656</span></a><span class="sd">            tier: the tier to intersect with</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos">657</span></a><span class="sd">            demarcator: the string to separate items that fall in the same subinterval</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos">658</span></a>
</span><span id="L-659"><a href="#L-659"><span class="linenos">659</span></a><span class="sd">        Returns:</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos">660</span></a><span class="sd">            IntervalTier: the modified version of the current tier</span>
</span><span id="L-661"><a href="#L-661"><span class="linenos">661</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos">662</span></a>        <span class="n">retEntryList</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos">663</span></a>        <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos">664</span></a>            <span class="n">subTier</span> <span class="o">=</span> <span class="n">tier</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos">665</span></a>                <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">CropCollision</span><span class="o">.</span><span class="n">TRUNCATED</span><span class="p">,</span> <span class="kc">False</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos">666</span></a>            <span class="p">)</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos">667</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">subTier</span><span class="o">.</span><span class="n">_entries</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos">668</span></a>                <span class="k">continue</span>
</span><span id="L-669"><a href="#L-669"><span class="linenos">669</span></a>
</span><span id="L-670"><a href="#L-670"><span class="linenos">670</span></a>            <span class="n">subLabel</span> <span class="o">=</span> <span class="n">demarcator</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">entry</span><span class="o">.</span><span class="n">label</span> <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">subTier</span><span class="o">.</span><span class="n">entries</span><span class="p">])</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos">671</span></a>            <span class="n">label</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">interval</span><span class="o">.</span><span class="n">label</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">subLabel</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos">672</span></a>
</span><span id="L-673"><a href="#L-673"><span class="linenos">673</span></a>            <span class="n">start</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">subTier</span><span class="o">.</span><span class="n">_entries</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos">674</span></a>            <span class="n">end</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">subTier</span><span class="o">.</span><span class="n">_entries</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos">675</span></a>
</span><span id="L-676"><a href="#L-676"><span class="linenos">676</span></a>            <span class="n">intersectedInterval</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-677"><a href="#L-677"><span class="linenos">677</span></a>                <span class="n">start</span><span class="p">,</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos">678</span></a>                <span class="n">end</span><span class="p">,</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos">679</span></a>                <span class="n">label</span><span class="p">,</span>
</span><span id="L-680"><a href="#L-680"><span class="linenos">680</span></a>            <span class="p">)</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos">681</span></a>
</span><span id="L-682"><a href="#L-682"><span class="linenos">682</span></a>            <span class="n">retEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">intersectedInterval</span><span class="p">)</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos">683</span></a>
</span><span id="L-684"><a href="#L-684"><span class="linenos">684</span></a>        <span class="n">newName</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">tier</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos">685</span></a>
</span><span id="L-686"><a href="#L-686"><span class="linenos">686</span></a>        <span class="n">retTier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">newName</span><span class="p">,</span> <span class="n">retEntryList</span><span class="p">)</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos">687</span></a>
</span><span id="L-688"><a href="#L-688"><span class="linenos">688</span></a>        <span class="k">return</span> <span class="n">retTier</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos">689</span></a>
</span><span id="L-690"><a href="#L-690"><span class="linenos">690</span></a>    <span class="k">def</span> <span class="nf">morph</span><span class="p">(</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos">691</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-692"><a href="#L-692"><span class="linenos">692</span></a>        <span class="n">targetTier</span><span class="p">:</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">,</span>
</span><span id="L-693"><a href="#L-693"><span class="linenos">693</span></a>        <span class="n">filterFunc</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos">694</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">:</span>
</span><span id="L-695"><a href="#L-695"><span class="linenos">695</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Morphs the duration of segments in this tier to those in another</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos">696</span></a>
</span><span id="L-697"><a href="#L-697"><span class="linenos">697</span></a><span class="sd">        This preserves the labels and the duration of silence in</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos">698</span></a><span class="sd">        this tier while changing the duration of labeled segments.</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos">699</span></a>
</span><span id="L-700"><a href="#L-700"><span class="linenos">700</span></a><span class="sd">        Args:</span>
</span><span id="L-701"><a href="#L-701"><span class="linenos">701</span></a><span class="sd">            targetTier:</span>
</span><span id="L-702"><a href="#L-702"><span class="linenos">702</span></a><span class="sd">            filterFunc: if specified, filters entries. The</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos">703</span></a><span class="sd">                functor takes one argument, an Interval. It returns true</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos">704</span></a><span class="sd">                if the Interval should be modified and false if not.</span>
</span><span id="L-705"><a href="#L-705"><span class="linenos">705</span></a>
</span><span id="L-706"><a href="#L-706"><span class="linenos">706</span></a><span class="sd">        Returns:</span>
</span><span id="L-707"><a href="#L-707"><span class="linenos">707</span></a><span class="sd">            The modified version of the current tier</span>
</span><span id="L-708"><a href="#L-708"><span class="linenos">708</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos">709</span></a>        <span class="n">cumulativeAdjustAmount</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-710"><a href="#L-710"><span class="linenos">710</span></a>        <span class="n">newEntryList</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-711"><a href="#L-711"><span class="linenos">711</span></a>        <span class="n">allIntervals</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">,</span> <span class="n">targetTier</span><span class="o">.</span><span class="n">entries</span><span class="p">]</span>
</span><span id="L-712"><a href="#L-712"><span class="linenos">712</span></a>        <span class="k">for</span> <span class="n">sourceInterval</span><span class="p">,</span> <span class="n">targetInterval</span> <span class="ow">in</span> <span class="n">utils</span><span class="o">.</span><span class="n">safeZip</span><span class="p">(</span><span class="n">allIntervals</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>
</span><span id="L-713"><a href="#L-713"><span class="linenos">713</span></a>            <span class="c1"># sourceInterval.start - lastFromEnd -&gt; was this interval and the</span>
</span><span id="L-714"><a href="#L-714"><span class="linenos">714</span></a>            <span class="c1"># last one adjacent?</span>
</span><span id="L-715"><a href="#L-715"><span class="linenos">715</span></a>            <span class="n">newStart</span> <span class="o">=</span> <span class="n">sourceInterval</span><span class="o">.</span><span class="n">start</span> <span class="o">+</span> <span class="n">cumulativeAdjustAmount</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos">716</span></a>
</span><span id="L-717"><a href="#L-717"><span class="linenos">717</span></a>            <span class="n">currIntervalDuration</span> <span class="o">=</span> <span class="n">sourceInterval</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">sourceInterval</span><span class="o">.</span><span class="n">start</span>
</span><span id="L-718"><a href="#L-718"><span class="linenos">718</span></a>            <span class="k">if</span> <span class="n">filterFunc</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">filterFunc</span><span class="p">(</span><span class="n">sourceInterval</span><span class="o">.</span><span class="n">label</span><span class="p">):</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos">719</span></a>                <span class="n">newIntervalDuration</span> <span class="o">=</span> <span class="n">targetInterval</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">targetInterval</span><span class="o">.</span><span class="n">start</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos">720</span></a>                <span class="n">cumulativeAdjustAmount</span> <span class="o">+=</span> <span class="n">newIntervalDuration</span> <span class="o">-</span> <span class="n">currIntervalDuration</span>
</span><span id="L-721"><a href="#L-721"><span class="linenos">721</span></a>                <span class="n">newEnd</span> <span class="o">=</span> <span class="n">newStart</span> <span class="o">+</span> <span class="n">newIntervalDuration</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos">722</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos">723</span></a>                <span class="n">newEnd</span> <span class="o">=</span> <span class="n">newStart</span> <span class="o">+</span> <span class="n">currIntervalDuration</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos">724</span></a>
</span><span id="L-725"><a href="#L-725"><span class="linenos">725</span></a>            <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Interval</span><span class="p">(</span><span class="n">newStart</span><span class="p">,</span> <span class="n">newEnd</span><span class="p">,</span> <span class="n">sourceInterval</span><span class="o">.</span><span class="n">label</span><span class="p">))</span>
</span><span id="L-726"><a href="#L-726"><span class="linenos">726</span></a>
</span><span id="L-727"><a href="#L-727"><span class="linenos">727</span></a>        <span class="n">newMin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">minTimestamp</span>
</span><span id="L-728"><a href="#L-728"><span class="linenos">728</span></a>        <span class="n">cumulativeDifference</span> <span class="o">=</span> <span class="n">newEntryList</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span>
</span><span id="L-729"><a href="#L-729"><span class="linenos">729</span></a>        <span class="n">newMax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span> <span class="o">+</span> <span class="n">cumulativeDifference</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos">730</span></a>
</span><span id="L-731"><a href="#L-731"><span class="linenos">731</span></a>        <span class="k">return</span> <span class="n">IntervalTier</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">newEntryList</span><span class="p">,</span> <span class="n">newMin</span><span class="p">,</span> <span class="n">newMax</span><span class="p">)</span>
</span><span id="L-732"><a href="#L-732"><span class="linenos">732</span></a>
</span><span id="L-733"><a href="#L-733"><span class="linenos">733</span></a>    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos">734</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">reportingMode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;silence&quot;</span><span class="p">,</span> <span class="s2">&quot;warning&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;warning&quot;</span>
</span><span id="L-735"><a href="#L-735"><span class="linenos">735</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos">736</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate this tier</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos">737</span></a>
</span><span id="L-738"><a href="#L-738"><span class="linenos">738</span></a><span class="sd">        Args:</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos">739</span></a><span class="sd">            reportingMode (str): Determines the behavior if validation fails.</span>
</span><span id="L-740"><a href="#L-740"><span class="linenos">740</span></a>
</span><span id="L-741"><a href="#L-741"><span class="linenos">741</span></a><span class="sd">        Returns:</span>
</span><span id="L-742"><a href="#L-742"><span class="linenos">742</span></a><span class="sd">            True if the tier is valid; False if not</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos">743</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos">744</span></a>        <span class="n">utils</span><span class="o">.</span><span class="n">validateOption</span><span class="p">(</span>
</span><span id="L-745"><a href="#L-745"><span class="linenos">745</span></a>            <span class="s2">&quot;reportingMode&quot;</span><span class="p">,</span> <span class="n">reportingMode</span><span class="p">,</span> <span class="n">constants</span><span class="o">.</span><span class="n">ErrorReportingMode</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos">746</span></a>        <span class="p">)</span>
</span><span id="L-747"><a href="#L-747"><span class="linenos">747</span></a>        <span class="n">errorReporter</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">getErrorReporter</span><span class="p">(</span><span class="n">reportingMode</span><span class="p">)</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos">748</span></a>
</span><span id="L-749"><a href="#L-749"><span class="linenos">749</span></a>        <span class="n">isValid</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-750"><a href="#L-750"><span class="linenos">750</span></a>        <span class="n">previousInterval</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-751"><a href="#L-751"><span class="linenos">751</span></a>        <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="L-752"><a href="#L-752"><span class="linenos">752</span></a>            <span class="k">if</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span> <span class="o">&gt;=</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="p">:</span>
</span><span id="L-753"><a href="#L-753"><span class="linenos">753</span></a>                <span class="n">isValid</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-754"><a href="#L-754"><span class="linenos">754</span></a>                <span class="n">errorReporter</span><span class="p">(</span>
</span><span id="L-755"><a href="#L-755"><span class="linenos">755</span></a>                    <span class="n">errors</span><span class="o">.</span><span class="n">TextgridStateError</span><span class="p">,</span>
</span><span id="L-756"><a href="#L-756"><span class="linenos">756</span></a>                    <span class="sa">f</span><span class="s2">&quot;Invalid interval. End time occurs before or on the start time(</span><span class="si">{</span><span class="n">interval</span><span class="si">}</span><span class="s2">).&quot;</span><span class="p">,</span>
</span><span id="L-757"><a href="#L-757"><span class="linenos">757</span></a>                <span class="p">)</span>
</span><span id="L-758"><a href="#L-758"><span class="linenos">758</span></a>
</span><span id="L-759"><a href="#L-759"><span class="linenos">759</span></a>            <span class="k">if</span> <span class="n">previousInterval</span> <span class="ow">and</span> <span class="n">previousInterval</span><span class="o">.</span><span class="n">end</span> <span class="o">&gt;</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">:</span>
</span><span id="L-760"><a href="#L-760"><span class="linenos">760</span></a>                <span class="n">isValid</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-761"><a href="#L-761"><span class="linenos">761</span></a>                <span class="n">errorReporter</span><span class="p">(</span>
</span><span id="L-762"><a href="#L-762"><span class="linenos">762</span></a>                    <span class="n">errors</span><span class="o">.</span><span class="n">TextgridStateError</span><span class="p">,</span>
</span><span id="L-763"><a href="#L-763"><span class="linenos">763</span></a>                    <span class="sa">f</span><span class="s2">&quot;Intervals are not sorted in time: &quot;</span>
</span><span id="L-764"><a href="#L-764"><span class="linenos">764</span></a>                    <span class="sa">f</span><span class="s2">&quot;[(</span><span class="si">{</span><span class="n">previousInterval</span><span class="si">}</span><span class="s2">), (</span><span class="si">{</span><span class="n">interval</span><span class="si">}</span><span class="s2">)]&quot;</span><span class="p">,</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos">765</span></a>                <span class="p">)</span>
</span><span id="L-766"><a href="#L-766"><span class="linenos">766</span></a>
</span><span id="L-767"><a href="#L-767"><span class="linenos">767</span></a>            <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">checkIsUndershoot</span><span class="p">(</span>
</span><span id="L-768"><a href="#L-768"><span class="linenos">768</span></a>                <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">minTimestamp</span><span class="p">,</span> <span class="n">errorReporter</span>
</span><span id="L-769"><a href="#L-769"><span class="linenos">769</span></a>            <span class="p">):</span>
</span><span id="L-770"><a href="#L-770"><span class="linenos">770</span></a>                <span class="n">isValid</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-771"><a href="#L-771"><span class="linenos">771</span></a>
</span><span id="L-772"><a href="#L-772"><span class="linenos">772</span></a>            <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">checkIsOvershoot</span><span class="p">(</span><span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span><span class="p">,</span> <span class="n">errorReporter</span><span class="p">):</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos">773</span></a>                <span class="n">isValid</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-774"><a href="#L-774"><span class="linenos">774</span></a>
</span><span id="L-775"><a href="#L-775"><span class="linenos">775</span></a>            <span class="n">previousInterval</span> <span class="o">=</span> <span class="n">interval</span>
</span><span id="L-776"><a href="#L-776"><span class="linenos">776</span></a>
</span><span id="L-777"><a href="#L-777"><span class="linenos">777</span></a>        <span class="k">return</span> <span class="n">isValid</span>
</span></pre></div>


            </section>
                <section id="IntervalTier">
                            <input id="IntervalTier-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">IntervalTier</span><wbr>(<span class="base"><a href="textgrid_tier.html#TextgridTier">praatio.data_classes.textgrid_tier.TextgridTier</a></span>):

                <label class="view-source-button" for="IntervalTier-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntervalTier"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntervalTier-58"><a href="#IntervalTier-58"><span class="linenos"> 58</span></a><span class="k">class</span> <span class="nc">IntervalTier</span><span class="p">(</span><span class="n">textgrid_tier</span><span class="o">.</span><span class="n">TextgridTier</span><span class="p">):</span>
</span><span id="IntervalTier-59"><a href="#IntervalTier-59"><span class="linenos"> 59</span></a>    <span class="n">tierType</span> <span class="o">=</span> <span class="n">INTERVAL_TIER</span>
</span><span id="IntervalTier-60"><a href="#IntervalTier-60"><span class="linenos"> 60</span></a>    <span class="n">entryType</span> <span class="o">=</span> <span class="n">Interval</span>
</span><span id="IntervalTier-61"><a href="#IntervalTier-61"><span class="linenos"> 61</span></a>
</span><span id="IntervalTier-62"><a href="#IntervalTier-62"><span class="linenos"> 62</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="IntervalTier-63"><a href="#IntervalTier-63"><span class="linenos"> 63</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="IntervalTier-64"><a href="#IntervalTier-64"><span class="linenos"> 64</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="IntervalTier-65"><a href="#IntervalTier-65"><span class="linenos"> 65</span></a>        <span class="n">entries</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Interval</span><span class="p">],</span>
</span><span id="IntervalTier-66"><a href="#IntervalTier-66"><span class="linenos"> 66</span></a>        <span class="n">minT</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="IntervalTier-67"><a href="#IntervalTier-67"><span class="linenos"> 67</span></a>        <span class="n">maxT</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="IntervalTier-68"><a href="#IntervalTier-68"><span class="linenos"> 68</span></a>    <span class="p">):</span>
</span><span id="IntervalTier-69"><a href="#IntervalTier-69"><span class="linenos"> 69</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;An interval tier is for annotating events that have duration</span>
</span><span id="IntervalTier-70"><a href="#IntervalTier-70"><span class="linenos"> 70</span></a>
</span><span id="IntervalTier-71"><a href="#IntervalTier-71"><span class="linenos"> 71</span></a><span class="sd">        The entries is of the form:</span>
</span><span id="IntervalTier-72"><a href="#IntervalTier-72"><span class="linenos"> 72</span></a><span class="sd">        [(startTime1, endTime1, label1), (startTime2, endTime2, label2), ]</span>
</span><span id="IntervalTier-73"><a href="#IntervalTier-73"><span class="linenos"> 73</span></a>
</span><span id="IntervalTier-74"><a href="#IntervalTier-74"><span class="linenos"> 74</span></a><span class="sd">        The data stored in the labels can be anything but will</span>
</span><span id="IntervalTier-75"><a href="#IntervalTier-75"><span class="linenos"> 75</span></a><span class="sd">        be interpreted as text by praatio (the label could be descriptive</span>
</span><span id="IntervalTier-76"><a href="#IntervalTier-76"><span class="linenos"> 76</span></a><span class="sd">        text e.g. (&#39;erase this region&#39;) or numerical data e.g. (average pitch</span>
</span><span id="IntervalTier-77"><a href="#IntervalTier-77"><span class="linenos"> 77</span></a><span class="sd">        values like &#39;132&#39;))</span>
</span><span id="IntervalTier-78"><a href="#IntervalTier-78"><span class="linenos"> 78</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier-79"><a href="#IntervalTier-79"><span class="linenos"> 79</span></a>        <span class="n">entries</span> <span class="o">=</span> <span class="n">_homogenizeEntries</span><span class="p">(</span><span class="n">entries</span><span class="p">)</span>
</span><span id="IntervalTier-80"><a href="#IntervalTier-80"><span class="linenos"> 80</span></a>        <span class="n">calculatedMinT</span><span class="p">,</span> <span class="n">calculatedMaxT</span> <span class="o">=</span> <span class="n">_calculateMinAndMaxTime</span><span class="p">(</span><span class="n">entries</span><span class="p">,</span> <span class="n">minT</span><span class="p">,</span> <span class="n">maxT</span><span class="p">)</span>
</span><span id="IntervalTier-81"><a href="#IntervalTier-81"><span class="linenos"> 81</span></a>
</span><span id="IntervalTier-82"><a href="#IntervalTier-82"><span class="linenos"> 82</span></a>        <span class="nb">super</span><span class="p">(</span><span class="n">IntervalTier</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="IntervalTier-83"><a href="#IntervalTier-83"><span class="linenos"> 83</span></a>            <span class="n">name</span><span class="p">,</span> <span class="n">entries</span><span class="p">,</span> <span class="n">calculatedMinT</span><span class="p">,</span> <span class="n">calculatedMaxT</span>
</span><span id="IntervalTier-84"><a href="#IntervalTier-84"><span class="linenos"> 84</span></a>        <span class="p">)</span>
</span><span id="IntervalTier-85"><a href="#IntervalTier-85"><span class="linenos"> 85</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">()</span>
</span><span id="IntervalTier-86"><a href="#IntervalTier-86"><span class="linenos"> 86</span></a>
</span><span id="IntervalTier-87"><a href="#IntervalTier-87"><span class="linenos"> 87</span></a>    <span class="k">def</span> <span class="nf">_validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IntervalTier-88"><a href="#IntervalTier-88"><span class="linenos"> 88</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;An interval tier is invalid if the entries are out of order or overlap with each other&quot;&quot;&quot;</span>
</span><span id="IntervalTier-89"><a href="#IntervalTier-89"><span class="linenos"> 89</span></a>        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="IntervalTier-90"><a href="#IntervalTier-90"><span class="linenos"> 90</span></a>            <span class="k">if</span> <span class="n">entry</span><span class="o">.</span><span class="n">start</span> <span class="o">&gt;=</span> <span class="n">entry</span><span class="o">.</span><span class="n">end</span><span class="p">:</span>
</span><span id="IntervalTier-91"><a href="#IntervalTier-91"><span class="linenos"> 91</span></a>                <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">TextgridStateError</span><span class="p">(</span>
</span><span id="IntervalTier-92"><a href="#IntervalTier-92"><span class="linenos"> 92</span></a>                    <span class="sa">f</span><span class="s2">&quot;The start time of an interval (</span><span class="si">{</span><span class="n">entry</span><span class="o">.</span><span class="n">start</span><span class="si">}</span><span class="s2">) &quot;</span>
</span><span id="IntervalTier-93"><a href="#IntervalTier-93"><span class="linenos"> 93</span></a>                    <span class="sa">f</span><span class="s2">&quot;cannot occur after its end time (</span><span class="si">{</span><span class="n">entry</span><span class="o">.</span><span class="n">end</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="IntervalTier-94"><a href="#IntervalTier-94"><span class="linenos"> 94</span></a>                <span class="p">)</span>
</span><span id="IntervalTier-95"><a href="#IntervalTier-95"><span class="linenos"> 95</span></a>
</span><span id="IntervalTier-96"><a href="#IntervalTier-96"><span class="linenos"> 96</span></a>        <span class="k">for</span> <span class="n">entry</span><span class="p">,</span> <span class="n">nextEntry</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">[</span><span class="mi">0</span><span class="p">::],</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">[</span><span class="mi">1</span><span class="p">::]):</span>
</span><span id="IntervalTier-97"><a href="#IntervalTier-97"><span class="linenos"> 97</span></a>            <span class="k">if</span> <span class="n">entry</span><span class="o">.</span><span class="n">end</span> <span class="o">&gt;</span> <span class="n">nextEntry</span><span class="o">.</span><span class="n">start</span><span class="p">:</span>
</span><span id="IntervalTier-98"><a href="#IntervalTier-98"><span class="linenos"> 98</span></a>                <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">TextgridStateError</span><span class="p">(</span>
</span><span id="IntervalTier-99"><a href="#IntervalTier-99"><span class="linenos"> 99</span></a>                    <span class="s2">&quot;Two intervals in the same tier overlap in time:</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="IntervalTier-100"><a href="#IntervalTier-100"><span class="linenos">100</span></a>                    <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">entry</span><span class="o">.</span><span class="n">start</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">entry</span><span class="o">.</span><span class="n">end</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">entry</span><span class="o">.</span><span class="n">label</span><span class="si">}</span><span class="s2">) and &quot;</span>
</span><span id="IntervalTier-101"><a href="#IntervalTier-101"><span class="linenos">101</span></a>                    <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">nextEntry</span><span class="o">.</span><span class="n">start</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">nextEntry</span><span class="o">.</span><span class="n">end</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">nextEntry</span><span class="o">.</span><span class="n">label</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="IntervalTier-102"><a href="#IntervalTier-102"><span class="linenos">102</span></a>                <span class="p">)</span>
</span><span id="IntervalTier-103"><a href="#IntervalTier-103"><span class="linenos">103</span></a>
</span><span id="IntervalTier-104"><a href="#IntervalTier-104"><span class="linenos">104</span></a>    <span class="nd">@property</span>
</span><span id="IntervalTier-105"><a href="#IntervalTier-105"><span class="linenos">105</span></a>    <span class="k">def</span> <span class="nf">timestamps</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
</span><span id="IntervalTier-106"><a href="#IntervalTier-106"><span class="linenos">106</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;All unique timestamps used in this tier&quot;&quot;&quot;</span>
</span><span id="IntervalTier-107"><a href="#IntervalTier-107"><span class="linenos">107</span></a>        <span class="n">tmpTimestamps</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="IntervalTier-108"><a href="#IntervalTier-108"><span class="linenos">108</span></a>            <span class="n">time</span>
</span><span id="IntervalTier-109"><a href="#IntervalTier-109"><span class="linenos">109</span></a>            <span class="k">for</span> <span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span>
</span><span id="IntervalTier-110"><a href="#IntervalTier-110"><span class="linenos">110</span></a>            <span class="k">for</span> <span class="n">time</span> <span class="ow">in</span> <span class="p">[</span>
</span><span id="IntervalTier-111"><a href="#IntervalTier-111"><span class="linenos">111</span></a>                <span class="n">start</span><span class="p">,</span>
</span><span id="IntervalTier-112"><a href="#IntervalTier-112"><span class="linenos">112</span></a>                <span class="n">stop</span><span class="p">,</span>
</span><span id="IntervalTier-113"><a href="#IntervalTier-113"><span class="linenos">113</span></a>            <span class="p">]</span>
</span><span id="IntervalTier-114"><a href="#IntervalTier-114"><span class="linenos">114</span></a>        <span class="p">]</span>
</span><span id="IntervalTier-115"><a href="#IntervalTier-115"><span class="linenos">115</span></a>
</span><span id="IntervalTier-116"><a href="#IntervalTier-116"><span class="linenos">116</span></a>        <span class="n">uniqueTimestamps</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">tmpTimestamps</span><span class="p">))</span>
</span><span id="IntervalTier-117"><a href="#IntervalTier-117"><span class="linenos">117</span></a>        <span class="n">uniqueTimestamps</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
</span><span id="IntervalTier-118"><a href="#IntervalTier-118"><span class="linenos">118</span></a>
</span><span id="IntervalTier-119"><a href="#IntervalTier-119"><span class="linenos">119</span></a>        <span class="k">return</span> <span class="n">uniqueTimestamps</span>
</span><span id="IntervalTier-120"><a href="#IntervalTier-120"><span class="linenos">120</span></a>
</span><span id="IntervalTier-121"><a href="#IntervalTier-121"><span class="linenos">121</span></a>    <span class="k">def</span> <span class="nf">crop</span><span class="p">(</span>
</span><span id="IntervalTier-122"><a href="#IntervalTier-122"><span class="linenos">122</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="IntervalTier-123"><a href="#IntervalTier-123"><span class="linenos">123</span></a>        <span class="n">cropStart</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="IntervalTier-124"><a href="#IntervalTier-124"><span class="linenos">124</span></a>        <span class="n">cropEnd</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="IntervalTier-125"><a href="#IntervalTier-125"><span class="linenos">125</span></a>        <span class="n">mode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;strict&quot;</span><span class="p">,</span> <span class="s2">&quot;lax&quot;</span><span class="p">,</span> <span class="s2">&quot;truncated&quot;</span><span class="p">],</span>
</span><span id="IntervalTier-126"><a href="#IntervalTier-126"><span class="linenos">126</span></a>        <span class="n">rebaseToZero</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="IntervalTier-127"><a href="#IntervalTier-127"><span class="linenos">127</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">:</span>
</span><span id="IntervalTier-128"><a href="#IntervalTier-128"><span class="linenos">128</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a new tier with all entries that fit inside the new interval</span>
</span><span id="IntervalTier-129"><a href="#IntervalTier-129"><span class="linenos">129</span></a>
</span><span id="IntervalTier-130"><a href="#IntervalTier-130"><span class="linenos">130</span></a><span class="sd">        Args:</span>
</span><span id="IntervalTier-131"><a href="#IntervalTier-131"><span class="linenos">131</span></a><span class="sd">            cropStart:</span>
</span><span id="IntervalTier-132"><a href="#IntervalTier-132"><span class="linenos">132</span></a><span class="sd">            cropEnd:</span>
</span><span id="IntervalTier-133"><a href="#IntervalTier-133"><span class="linenos">133</span></a><span class="sd">            mode: determines cropping behavior</span>
</span><span id="IntervalTier-134"><a href="#IntervalTier-134"><span class="linenos">134</span></a><span class="sd">                - &#39;strict&#39;, only intervals wholly contained by the crop</span>
</span><span id="IntervalTier-135"><a href="#IntervalTier-135"><span class="linenos">135</span></a><span class="sd">                    interval will be kept</span>
</span><span id="IntervalTier-136"><a href="#IntervalTier-136"><span class="linenos">136</span></a><span class="sd">                - &#39;lax&#39;, partially contained intervals will be kept</span>
</span><span id="IntervalTier-137"><a href="#IntervalTier-137"><span class="linenos">137</span></a><span class="sd">                - &#39;truncated&#39;, partially contained intervals will be</span>
</span><span id="IntervalTier-138"><a href="#IntervalTier-138"><span class="linenos">138</span></a><span class="sd">                    truncated to fit within the crop region.</span>
</span><span id="IntervalTier-139"><a href="#IntervalTier-139"><span class="linenos">139</span></a><span class="sd">            rebaseToZero: if True, the cropped textgrid values</span>
</span><span id="IntervalTier-140"><a href="#IntervalTier-140"><span class="linenos">140</span></a><span class="sd">                will be subtracted by the cropStart</span>
</span><span id="IntervalTier-141"><a href="#IntervalTier-141"><span class="linenos">141</span></a>
</span><span id="IntervalTier-142"><a href="#IntervalTier-142"><span class="linenos">142</span></a><span class="sd">        Returns:</span>
</span><span id="IntervalTier-143"><a href="#IntervalTier-143"><span class="linenos">143</span></a><span class="sd">            the modified version of the current tier</span>
</span><span id="IntervalTier-144"><a href="#IntervalTier-144"><span class="linenos">144</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier-145"><a href="#IntervalTier-145"><span class="linenos">145</span></a>
</span><span id="IntervalTier-146"><a href="#IntervalTier-146"><span class="linenos">146</span></a>        <span class="n">utils</span><span class="o">.</span><span class="n">validateOption</span><span class="p">(</span><span class="s2">&quot;mode&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">CropCollision</span><span class="p">)</span>
</span><span id="IntervalTier-147"><a href="#IntervalTier-147"><span class="linenos">147</span></a>
</span><span id="IntervalTier-148"><a href="#IntervalTier-148"><span class="linenos">148</span></a>        <span class="k">if</span> <span class="n">cropStart</span> <span class="o">&gt;=</span> <span class="n">cropEnd</span><span class="p">:</span>
</span><span id="IntervalTier-149"><a href="#IntervalTier-149"><span class="linenos">149</span></a>            <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">ArgumentError</span><span class="p">(</span>
</span><span id="IntervalTier-150"><a href="#IntervalTier-150"><span class="linenos">150</span></a>                <span class="sa">f</span><span class="s2">&quot;Crop error: start time (</span><span class="si">{</span><span class="n">cropStart</span><span class="si">}</span><span class="s2">) must occur before end time (</span><span class="si">{</span><span class="n">cropEnd</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="IntervalTier-151"><a href="#IntervalTier-151"><span class="linenos">151</span></a>            <span class="p">)</span>
</span><span id="IntervalTier-152"><a href="#IntervalTier-152"><span class="linenos">152</span></a>
</span><span id="IntervalTier-153"><a href="#IntervalTier-153"><span class="linenos">153</span></a>        <span class="n">newEntryList</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">getIntervalsInInterval</span><span class="p">(</span>
</span><span id="IntervalTier-154"><a href="#IntervalTier-154"><span class="linenos">154</span></a>            <span class="n">cropStart</span><span class="p">,</span> <span class="n">cropEnd</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">,</span> <span class="n">mode</span>
</span><span id="IntervalTier-155"><a href="#IntervalTier-155"><span class="linenos">155</span></a>        <span class="p">)</span>
</span><span id="IntervalTier-156"><a href="#IntervalTier-156"><span class="linenos">156</span></a>
</span><span id="IntervalTier-157"><a href="#IntervalTier-157"><span class="linenos">157</span></a>        <span class="k">if</span> <span class="n">rebaseToZero</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="IntervalTier-158"><a href="#IntervalTier-158"><span class="linenos">158</span></a>            <span class="n">newSmallestValue</span> <span class="o">=</span> <span class="n">newEntryList</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="IntervalTier-159"><a href="#IntervalTier-159"><span class="linenos">159</span></a>            <span class="k">if</span> <span class="n">newSmallestValue</span> <span class="o">&lt;</span> <span class="n">cropStart</span><span class="p">:</span>
</span><span id="IntervalTier-160"><a href="#IntervalTier-160"><span class="linenos">160</span></a>                <span class="n">timeDiff</span> <span class="o">=</span> <span class="n">newSmallestValue</span>
</span><span id="IntervalTier-161"><a href="#IntervalTier-161"><span class="linenos">161</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="IntervalTier-162"><a href="#IntervalTier-162"><span class="linenos">162</span></a>                <span class="n">timeDiff</span> <span class="o">=</span> <span class="n">cropStart</span>
</span><span id="IntervalTier-163"><a href="#IntervalTier-163"><span class="linenos">163</span></a>            <span class="n">newEntryList</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="IntervalTier-164"><a href="#IntervalTier-164"><span class="linenos">164</span></a>                <span class="n">Interval</span><span class="p">(</span><span class="n">start</span> <span class="o">-</span> <span class="n">timeDiff</span><span class="p">,</span> <span class="n">end</span> <span class="o">-</span> <span class="n">timeDiff</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span>
</span><span id="IntervalTier-165"><a href="#IntervalTier-165"><span class="linenos">165</span></a>                <span class="k">for</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">newEntryList</span>
</span><span id="IntervalTier-166"><a href="#IntervalTier-166"><span class="linenos">166</span></a>            <span class="p">]</span>
</span><span id="IntervalTier-167"><a href="#IntervalTier-167"><span class="linenos">167</span></a>            <span class="n">minT</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="IntervalTier-168"><a href="#IntervalTier-168"><span class="linenos">168</span></a>            <span class="n">maxT</span> <span class="o">=</span> <span class="n">cropEnd</span> <span class="o">-</span> <span class="n">cropStart</span>
</span><span id="IntervalTier-169"><a href="#IntervalTier-169"><span class="linenos">169</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="IntervalTier-170"><a href="#IntervalTier-170"><span class="linenos">170</span></a>            <span class="n">minT</span> <span class="o">=</span> <span class="n">cropStart</span>
</span><span id="IntervalTier-171"><a href="#IntervalTier-171"><span class="linenos">171</span></a>            <span class="n">maxT</span> <span class="o">=</span> <span class="n">cropEnd</span>
</span><span id="IntervalTier-172"><a href="#IntervalTier-172"><span class="linenos">172</span></a>
</span><span id="IntervalTier-173"><a href="#IntervalTier-173"><span class="linenos">173</span></a>        <span class="n">croppedTier</span> <span class="o">=</span> <span class="n">IntervalTier</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">newEntryList</span><span class="p">,</span> <span class="n">minT</span><span class="p">,</span> <span class="n">maxT</span><span class="p">)</span>
</span><span id="IntervalTier-174"><a href="#IntervalTier-174"><span class="linenos">174</span></a>
</span><span id="IntervalTier-175"><a href="#IntervalTier-175"><span class="linenos">175</span></a>        <span class="k">return</span> <span class="n">croppedTier</span>
</span><span id="IntervalTier-176"><a href="#IntervalTier-176"><span class="linenos">176</span></a>
</span><span id="IntervalTier-177"><a href="#IntervalTier-177"><span class="linenos">177</span></a>    <span class="k">def</span> <span class="nf">dejitter</span><span class="p">(</span>
</span><span id="IntervalTier-178"><a href="#IntervalTier-178"><span class="linenos">178</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="IntervalTier-179"><a href="#IntervalTier-179"><span class="linenos">179</span></a>        <span class="n">referenceTier</span><span class="p">:</span> <span class="n">textgrid_tier</span><span class="o">.</span><span class="n">TextgridTier</span><span class="p">,</span>
</span><span id="IntervalTier-180"><a href="#IntervalTier-180"><span class="linenos">180</span></a>        <span class="n">maxDifference</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.001</span><span class="p">,</span>
</span><span id="IntervalTier-181"><a href="#IntervalTier-181"><span class="linenos">181</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">textgrid_tier</span><span class="o">.</span><span class="n">TextgridTier</span><span class="p">:</span>
</span><span id="IntervalTier-182"><a href="#IntervalTier-182"><span class="linenos">182</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="IntervalTier-183"><a href="#IntervalTier-183"><span class="linenos">183</span></a><span class="sd">        Set timestamps in this tier to be the same as values in the reference tier</span>
</span><span id="IntervalTier-184"><a href="#IntervalTier-184"><span class="linenos">184</span></a>
</span><span id="IntervalTier-185"><a href="#IntervalTier-185"><span class="linenos">185</span></a><span class="sd">        Timestamps will only be moved if they are less than maxDifference away from the</span>
</span><span id="IntervalTier-186"><a href="#IntervalTier-186"><span class="linenos">186</span></a><span class="sd">        reference time.</span>
</span><span id="IntervalTier-187"><a href="#IntervalTier-187"><span class="linenos">187</span></a>
</span><span id="IntervalTier-188"><a href="#IntervalTier-188"><span class="linenos">188</span></a><span class="sd">        This can be used to correct minor alignment errors between tiers, as made when</span>
</span><span id="IntervalTier-189"><a href="#IntervalTier-189"><span class="linenos">189</span></a><span class="sd">        annotating files manually, etc.</span>
</span><span id="IntervalTier-190"><a href="#IntervalTier-190"><span class="linenos">190</span></a>
</span><span id="IntervalTier-191"><a href="#IntervalTier-191"><span class="linenos">191</span></a><span class="sd">        Args:</span>
</span><span id="IntervalTier-192"><a href="#IntervalTier-192"><span class="linenos">192</span></a><span class="sd">            referenceTier: the IntervalTier or PointTier to use as a reference</span>
</span><span id="IntervalTier-193"><a href="#IntervalTier-193"><span class="linenos">193</span></a><span class="sd">            maxDifference: the maximum amount to allow timestamps to be moved by</span>
</span><span id="IntervalTier-194"><a href="#IntervalTier-194"><span class="linenos">194</span></a>
</span><span id="IntervalTier-195"><a href="#IntervalTier-195"><span class="linenos">195</span></a><span class="sd">        Returns:</span>
</span><span id="IntervalTier-196"><a href="#IntervalTier-196"><span class="linenos">196</span></a><span class="sd">            the modified version of the current tier</span>
</span><span id="IntervalTier-197"><a href="#IntervalTier-197"><span class="linenos">197</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier-198"><a href="#IntervalTier-198"><span class="linenos">198</span></a>        <span class="n">referenceTimestamps</span> <span class="o">=</span> <span class="n">referenceTier</span><span class="o">.</span><span class="n">timestamps</span>
</span><span id="IntervalTier-199"><a href="#IntervalTier-199"><span class="linenos">199</span></a>
</span><span id="IntervalTier-200"><a href="#IntervalTier-200"><span class="linenos">200</span></a>        <span class="n">newEntries</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="IntervalTier-201"><a href="#IntervalTier-201"><span class="linenos">201</span></a>        <span class="k">for</span> <span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="IntervalTier-202"><a href="#IntervalTier-202"><span class="linenos">202</span></a>            <span class="n">startCompare</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">referenceTimestamps</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">start</span><span class="p">))</span>
</span><span id="IntervalTier-203"><a href="#IntervalTier-203"><span class="linenos">203</span></a>            <span class="n">stopCompare</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">referenceTimestamps</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">stop</span><span class="p">))</span>
</span><span id="IntervalTier-204"><a href="#IntervalTier-204"><span class="linenos">204</span></a>
</span><span id="IntervalTier-205"><a href="#IntervalTier-205"><span class="linenos">205</span></a>            <span class="k">if</span> <span class="n">my_math</span><span class="o">.</span><span class="n">lessThanOrEqual</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">start</span> <span class="o">-</span> <span class="n">startCompare</span><span class="p">),</span> <span class="n">maxDifference</span><span class="p">):</span>
</span><span id="IntervalTier-206"><a href="#IntervalTier-206"><span class="linenos">206</span></a>                <span class="n">start</span> <span class="o">=</span> <span class="n">startCompare</span>
</span><span id="IntervalTier-207"><a href="#IntervalTier-207"><span class="linenos">207</span></a>            <span class="k">if</span> <span class="n">my_math</span><span class="o">.</span><span class="n">lessThanOrEqual</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">stop</span> <span class="o">-</span> <span class="n">stopCompare</span><span class="p">),</span> <span class="n">maxDifference</span><span class="p">):</span>
</span><span id="IntervalTier-208"><a href="#IntervalTier-208"><span class="linenos">208</span></a>                <span class="n">stop</span> <span class="o">=</span> <span class="n">stopCompare</span>
</span><span id="IntervalTier-209"><a href="#IntervalTier-209"><span class="linenos">209</span></a>            <span class="n">newEntries</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">label</span><span class="p">))</span>
</span><span id="IntervalTier-210"><a href="#IntervalTier-210"><span class="linenos">210</span></a>
</span><span id="IntervalTier-211"><a href="#IntervalTier-211"><span class="linenos">211</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">entries</span><span class="o">=</span><span class="n">newEntries</span><span class="p">)</span>
</span><span id="IntervalTier-212"><a href="#IntervalTier-212"><span class="linenos">212</span></a>
</span><span id="IntervalTier-213"><a href="#IntervalTier-213"><span class="linenos">213</span></a>    <span class="k">def</span> <span class="nf">deleteEntry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entry</span><span class="p">:</span> <span class="n">Interval</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IntervalTier-214"><a href="#IntervalTier-214"><span class="linenos">214</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes an entry from the entries&quot;&quot;&quot;</span>
</span><span id="IntervalTier-215"><a href="#IntervalTier-215"><span class="linenos">215</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span>
</span><span id="IntervalTier-216"><a href="#IntervalTier-216"><span class="linenos">216</span></a>
</span><span id="IntervalTier-217"><a href="#IntervalTier-217"><span class="linenos">217</span></a>    <span class="k">def</span> <span class="nf">difference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tier</span><span class="p">:</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">:</span>
</span><span id="IntervalTier-218"><a href="#IntervalTier-218"><span class="linenos">218</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Takes the set difference of this tier and the given one</span>
</span><span id="IntervalTier-219"><a href="#IntervalTier-219"><span class="linenos">219</span></a>
</span><span id="IntervalTier-220"><a href="#IntervalTier-220"><span class="linenos">220</span></a><span class="sd">        Any overlapping portions of entries with entries in this textgrid</span>
</span><span id="IntervalTier-221"><a href="#IntervalTier-221"><span class="linenos">221</span></a><span class="sd">        will be removed from the returned tier.</span>
</span><span id="IntervalTier-222"><a href="#IntervalTier-222"><span class="linenos">222</span></a>
</span><span id="IntervalTier-223"><a href="#IntervalTier-223"><span class="linenos">223</span></a><span class="sd">        Args:</span>
</span><span id="IntervalTier-224"><a href="#IntervalTier-224"><span class="linenos">224</span></a><span class="sd">            tier: the tier to subtract from this one</span>
</span><span id="IntervalTier-225"><a href="#IntervalTier-225"><span class="linenos">225</span></a>
</span><span id="IntervalTier-226"><a href="#IntervalTier-226"><span class="linenos">226</span></a><span class="sd">        Returns:</span>
</span><span id="IntervalTier-227"><a href="#IntervalTier-227"><span class="linenos">227</span></a><span class="sd">            the modified version of the current tier</span>
</span><span id="IntervalTier-228"><a href="#IntervalTier-228"><span class="linenos">228</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier-229"><a href="#IntervalTier-229"><span class="linenos">229</span></a>        <span class="n">retTier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
</span><span id="IntervalTier-230"><a href="#IntervalTier-230"><span class="linenos">230</span></a>
</span><span id="IntervalTier-231"><a href="#IntervalTier-231"><span class="linenos">231</span></a>        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">tier</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="IntervalTier-232"><a href="#IntervalTier-232"><span class="linenos">232</span></a>            <span class="n">retTier</span> <span class="o">=</span> <span class="n">retTier</span><span class="o">.</span><span class="n">eraseRegion</span><span class="p">(</span>
</span><span id="IntervalTier-233"><a href="#IntervalTier-233"><span class="linenos">233</span></a>                <span class="n">entry</span><span class="o">.</span><span class="n">start</span><span class="p">,</span>
</span><span id="IntervalTier-234"><a href="#IntervalTier-234"><span class="linenos">234</span></a>                <span class="n">entry</span><span class="o">.</span><span class="n">end</span><span class="p">,</span>
</span><span id="IntervalTier-235"><a href="#IntervalTier-235"><span class="linenos">235</span></a>                <span class="n">collisionMode</span><span class="o">=</span><span class="n">constants</span><span class="o">.</span><span class="n">EraseCollision</span><span class="o">.</span><span class="n">TRUNCATE</span><span class="p">,</span>
</span><span id="IntervalTier-236"><a href="#IntervalTier-236"><span class="linenos">236</span></a>                <span class="n">doShrink</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="IntervalTier-237"><a href="#IntervalTier-237"><span class="linenos">237</span></a>            <span class="p">)</span>
</span><span id="IntervalTier-238"><a href="#IntervalTier-238"><span class="linenos">238</span></a>
</span><span id="IntervalTier-239"><a href="#IntervalTier-239"><span class="linenos">239</span></a>        <span class="k">return</span> <span class="n">retTier</span>
</span><span id="IntervalTier-240"><a href="#IntervalTier-240"><span class="linenos">240</span></a>
</span><span id="IntervalTier-241"><a href="#IntervalTier-241"><span class="linenos">241</span></a>    <span class="k">def</span> <span class="nf">editTimestamps</span><span class="p">(</span>
</span><span id="IntervalTier-242"><a href="#IntervalTier-242"><span class="linenos">242</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="IntervalTier-243"><a href="#IntervalTier-243"><span class="linenos">243</span></a>        <span class="n">offset</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="IntervalTier-244"><a href="#IntervalTier-244"><span class="linenos">244</span></a>        <span class="n">reportingMode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;silence&quot;</span><span class="p">,</span> <span class="s2">&quot;warning&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;warning&quot;</span><span class="p">,</span>
</span><span id="IntervalTier-245"><a href="#IntervalTier-245"><span class="linenos">245</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">:</span>
</span><span id="IntervalTier-246"><a href="#IntervalTier-246"><span class="linenos">246</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Modifies all timestamps by a constant amount</span>
</span><span id="IntervalTier-247"><a href="#IntervalTier-247"><span class="linenos">247</span></a>
</span><span id="IntervalTier-248"><a href="#IntervalTier-248"><span class="linenos">248</span></a><span class="sd">        Args:</span>
</span><span id="IntervalTier-249"><a href="#IntervalTier-249"><span class="linenos">249</span></a><span class="sd">            offset: the amount to shift all intervals</span>
</span><span id="IntervalTier-250"><a href="#IntervalTier-250"><span class="linenos">250</span></a><span class="sd">            reportingMode: Determines the behavior if an entries moves outside</span>
</span><span id="IntervalTier-251"><a href="#IntervalTier-251"><span class="linenos">251</span></a><span class="sd">                of minTimestamp or maxTimestamp after being edited</span>
</span><span id="IntervalTier-252"><a href="#IntervalTier-252"><span class="linenos">252</span></a>
</span><span id="IntervalTier-253"><a href="#IntervalTier-253"><span class="linenos">253</span></a><span class="sd">        Returns:</span>
</span><span id="IntervalTier-254"><a href="#IntervalTier-254"><span class="linenos">254</span></a><span class="sd">            the modified version of the current tier</span>
</span><span id="IntervalTier-255"><a href="#IntervalTier-255"><span class="linenos">255</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier-256"><a href="#IntervalTier-256"><span class="linenos">256</span></a>        <span class="n">utils</span><span class="o">.</span><span class="n">validateOption</span><span class="p">(</span>
</span><span id="IntervalTier-257"><a href="#IntervalTier-257"><span class="linenos">257</span></a>            <span class="s2">&quot;reportingMode&quot;</span><span class="p">,</span> <span class="n">reportingMode</span><span class="p">,</span> <span class="n">constants</span><span class="o">.</span><span class="n">ErrorReportingMode</span>
</span><span id="IntervalTier-258"><a href="#IntervalTier-258"><span class="linenos">258</span></a>        <span class="p">)</span>
</span><span id="IntervalTier-259"><a href="#IntervalTier-259"><span class="linenos">259</span></a>        <span class="n">errorReporter</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">getErrorReporter</span><span class="p">(</span><span class="n">reportingMode</span><span class="p">)</span>
</span><span id="IntervalTier-260"><a href="#IntervalTier-260"><span class="linenos">260</span></a>
</span><span id="IntervalTier-261"><a href="#IntervalTier-261"><span class="linenos">261</span></a>        <span class="n">newEntryList</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="IntervalTier-262"><a href="#IntervalTier-262"><span class="linenos">262</span></a>        <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="IntervalTier-263"><a href="#IntervalTier-263"><span class="linenos">263</span></a>            <span class="n">newStart</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span>
</span><span id="IntervalTier-264"><a href="#IntervalTier-264"><span class="linenos">264</span></a>            <span class="n">newEnd</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span>
</span><span id="IntervalTier-265"><a href="#IntervalTier-265"><span class="linenos">265</span></a>
</span><span id="IntervalTier-266"><a href="#IntervalTier-266"><span class="linenos">266</span></a>            <span class="n">utils</span><span class="o">.</span><span class="n">checkIsUndershoot</span><span class="p">(</span><span class="n">newStart</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">minTimestamp</span><span class="p">,</span> <span class="n">errorReporter</span><span class="p">)</span>
</span><span id="IntervalTier-267"><a href="#IntervalTier-267"><span class="linenos">267</span></a>            <span class="n">utils</span><span class="o">.</span><span class="n">checkIsOvershoot</span><span class="p">(</span><span class="n">newEnd</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span><span class="p">,</span> <span class="n">errorReporter</span><span class="p">)</span>
</span><span id="IntervalTier-268"><a href="#IntervalTier-268"><span class="linenos">268</span></a>
</span><span id="IntervalTier-269"><a href="#IntervalTier-269"><span class="linenos">269</span></a>            <span class="k">if</span> <span class="n">newEnd</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IntervalTier-270"><a href="#IntervalTier-270"><span class="linenos">270</span></a>                <span class="k">continue</span>
</span><span id="IntervalTier-271"><a href="#IntervalTier-271"><span class="linenos">271</span></a>            <span class="k">if</span> <span class="n">newStart</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IntervalTier-272"><a href="#IntervalTier-272"><span class="linenos">272</span></a>                <span class="n">newStart</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="IntervalTier-273"><a href="#IntervalTier-273"><span class="linenos">273</span></a>
</span><span id="IntervalTier-274"><a href="#IntervalTier-274"><span class="linenos">274</span></a>            <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Interval</span><span class="p">(</span><span class="n">newStart</span><span class="p">,</span> <span class="n">newEnd</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">label</span><span class="p">))</span>
</span><span id="IntervalTier-275"><a href="#IntervalTier-275"><span class="linenos">275</span></a>
</span><span id="IntervalTier-276"><a href="#IntervalTier-276"><span class="linenos">276</span></a>        <span class="c1"># Determine new min and max timestamps</span>
</span><span id="IntervalTier-277"><a href="#IntervalTier-277"><span class="linenos">277</span></a>        <span class="n">newMin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">([</span><span class="n">interval</span><span class="o">.</span><span class="n">start</span> <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">newEntryList</span><span class="p">])</span>
</span><span id="IntervalTier-278"><a href="#IntervalTier-278"><span class="linenos">278</span></a>        <span class="n">newMax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="n">interval</span><span class="o">.</span><span class="n">end</span> <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">newEntryList</span><span class="p">])</span>
</span><span id="IntervalTier-279"><a href="#IntervalTier-279"><span class="linenos">279</span></a>
</span><span id="IntervalTier-280"><a href="#IntervalTier-280"><span class="linenos">280</span></a>        <span class="k">if</span> <span class="n">newMin</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">minTimestamp</span><span class="p">:</span>
</span><span id="IntervalTier-281"><a href="#IntervalTier-281"><span class="linenos">281</span></a>            <span class="n">newMin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">minTimestamp</span>
</span><span id="IntervalTier-282"><a href="#IntervalTier-282"><span class="linenos">282</span></a>
</span><span id="IntervalTier-283"><a href="#IntervalTier-283"><span class="linenos">283</span></a>        <span class="k">if</span> <span class="n">newMax</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span><span class="p">:</span>
</span><span id="IntervalTier-284"><a href="#IntervalTier-284"><span class="linenos">284</span></a>            <span class="n">newMax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span>
</span><span id="IntervalTier-285"><a href="#IntervalTier-285"><span class="linenos">285</span></a>
</span><span id="IntervalTier-286"><a href="#IntervalTier-286"><span class="linenos">286</span></a>        <span class="k">return</span> <span class="n">IntervalTier</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">newEntryList</span><span class="p">,</span> <span class="n">newMin</span><span class="p">,</span> <span class="n">newMax</span><span class="p">)</span>
</span><span id="IntervalTier-287"><a href="#IntervalTier-287"><span class="linenos">287</span></a>
</span><span id="IntervalTier-288"><a href="#IntervalTier-288"><span class="linenos">288</span></a>    <span class="k">def</span> <span class="nf">eraseRegion</span><span class="p">(</span>
</span><span id="IntervalTier-289"><a href="#IntervalTier-289"><span class="linenos">289</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="IntervalTier-290"><a href="#IntervalTier-290"><span class="linenos">290</span></a>        <span class="n">start</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="IntervalTier-291"><a href="#IntervalTier-291"><span class="linenos">291</span></a>        <span class="n">end</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="IntervalTier-292"><a href="#IntervalTier-292"><span class="linenos">292</span></a>        <span class="n">collisionMode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;truncate&quot;</span><span class="p">,</span> <span class="s2">&quot;categorical&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
</span><span id="IntervalTier-293"><a href="#IntervalTier-293"><span class="linenos">293</span></a>        <span class="n">doShrink</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="IntervalTier-294"><a href="#IntervalTier-294"><span class="linenos">294</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">:</span>
</span><span id="IntervalTier-295"><a href="#IntervalTier-295"><span class="linenos">295</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Makes a region in a tier blank (removes all contained entries)</span>
</span><span id="IntervalTier-296"><a href="#IntervalTier-296"><span class="linenos">296</span></a>
</span><span id="IntervalTier-297"><a href="#IntervalTier-297"><span class="linenos">297</span></a><span class="sd">        Args:</span>
</span><span id="IntervalTier-298"><a href="#IntervalTier-298"><span class="linenos">298</span></a><span class="sd">            start:</span>
</span><span id="IntervalTier-299"><a href="#IntervalTier-299"><span class="linenos">299</span></a><span class="sd">            end:</span>
</span><span id="IntervalTier-300"><a href="#IntervalTier-300"><span class="linenos">300</span></a><span class="sd">            collisionMode: Determines the behavior when the region to erase</span>
</span><span id="IntervalTier-301"><a href="#IntervalTier-301"><span class="linenos">301</span></a><span class="sd">                overlaps with existing intervals.</span>
</span><span id="IntervalTier-302"><a href="#IntervalTier-302"><span class="linenos">302</span></a><span class="sd">                - &#39;truncate&#39; partially contained entries will have the portion</span>
</span><span id="IntervalTier-303"><a href="#IntervalTier-303"><span class="linenos">303</span></a><span class="sd">                    removed that overlaps with the target entry</span>
</span><span id="IntervalTier-304"><a href="#IntervalTier-304"><span class="linenos">304</span></a><span class="sd">                - &#39;categorical&#39; all entries that overlap, even partially, with</span>
</span><span id="IntervalTier-305"><a href="#IntervalTier-305"><span class="linenos">305</span></a><span class="sd">                    the target entry will be completely removed</span>
</span><span id="IntervalTier-306"><a href="#IntervalTier-306"><span class="linenos">306</span></a><span class="sd">                - None or any other value throws IntervalCollision</span>
</span><span id="IntervalTier-307"><a href="#IntervalTier-307"><span class="linenos">307</span></a><span class="sd">            doShrink: If True, moves leftward by (/end/ - /start/)</span>
</span><span id="IntervalTier-308"><a href="#IntervalTier-308"><span class="linenos">308</span></a><span class="sd">                amount, each item that occurs after /end/</span>
</span><span id="IntervalTier-309"><a href="#IntervalTier-309"><span class="linenos">309</span></a>
</span><span id="IntervalTier-310"><a href="#IntervalTier-310"><span class="linenos">310</span></a><span class="sd">        Returns:</span>
</span><span id="IntervalTier-311"><a href="#IntervalTier-311"><span class="linenos">311</span></a><span class="sd">            The modified version of the current tier</span>
</span><span id="IntervalTier-312"><a href="#IntervalTier-312"><span class="linenos">312</span></a>
</span><span id="IntervalTier-313"><a href="#IntervalTier-313"><span class="linenos">313</span></a><span class="sd">        Raises:</span>
</span><span id="IntervalTier-314"><a href="#IntervalTier-314"><span class="linenos">314</span></a><span class="sd">            CollisionError</span>
</span><span id="IntervalTier-315"><a href="#IntervalTier-315"><span class="linenos">315</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier-316"><a href="#IntervalTier-316"><span class="linenos">316</span></a>        <span class="n">utils</span><span class="o">.</span><span class="n">validateOption</span><span class="p">(</span><span class="s2">&quot;collisionMode&quot;</span><span class="p">,</span> <span class="n">collisionMode</span><span class="p">,</span> <span class="n">constants</span><span class="o">.</span><span class="n">EraseCollision</span><span class="p">)</span>
</span><span id="IntervalTier-317"><a href="#IntervalTier-317"><span class="linenos">317</span></a>
</span><span id="IntervalTier-318"><a href="#IntervalTier-318"><span class="linenos">318</span></a>        <span class="n">matchList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">CropCollision</span><span class="o">.</span><span class="n">LAX</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">entries</span>
</span><span id="IntervalTier-319"><a href="#IntervalTier-319"><span class="linenos">319</span></a>        <span class="n">newTier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
</span><span id="IntervalTier-320"><a href="#IntervalTier-320"><span class="linenos">320</span></a>
</span><span id="IntervalTier-321"><a href="#IntervalTier-321"><span class="linenos">321</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matchList</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IntervalTier-322"><a href="#IntervalTier-322"><span class="linenos">322</span></a>            <span class="k">pass</span>
</span><span id="IntervalTier-323"><a href="#IntervalTier-323"><span class="linenos">323</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="IntervalTier-324"><a href="#IntervalTier-324"><span class="linenos">324</span></a>            <span class="k">if</span> <span class="n">collisionMode</span> <span class="o">==</span> <span class="n">constants</span><span class="o">.</span><span class="n">EraseCollision</span><span class="o">.</span><span class="n">ERROR</span><span class="p">:</span>
</span><span id="IntervalTier-325"><a href="#IntervalTier-325"><span class="linenos">325</span></a>                <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">CollisionError</span><span class="p">(</span>
</span><span id="IntervalTier-326"><a href="#IntervalTier-326"><span class="linenos">326</span></a>                    <span class="sa">f</span><span class="s2">&quot;Erase region (</span><span class="si">{</span><span class="n">start</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">end</span><span class="si">}</span><span class="s2">)overlapped with an interval. &quot;</span>
</span><span id="IntervalTier-327"><a href="#IntervalTier-327"><span class="linenos">327</span></a>                    <span class="s2">&quot;If this was expected, consider setting the collisionMode&quot;</span>
</span><span id="IntervalTier-328"><a href="#IntervalTier-328"><span class="linenos">328</span></a>                <span class="p">)</span>
</span><span id="IntervalTier-329"><a href="#IntervalTier-329"><span class="linenos">329</span></a>
</span><span id="IntervalTier-330"><a href="#IntervalTier-330"><span class="linenos">330</span></a>            <span class="c1"># Remove all the matches from the entries</span>
</span><span id="IntervalTier-331"><a href="#IntervalTier-331"><span class="linenos">331</span></a>            <span class="c1"># Go in reverse order because we&#39;re destructively altering</span>
</span><span id="IntervalTier-332"><a href="#IntervalTier-332"><span class="linenos">332</span></a>            <span class="c1"># the order of the list (messes up index order)</span>
</span><span id="IntervalTier-333"><a href="#IntervalTier-333"><span class="linenos">333</span></a>            <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">matchList</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="IntervalTier-334"><a href="#IntervalTier-334"><span class="linenos">334</span></a>                <span class="n">newTier</span><span class="o">.</span><span class="n">deleteEntry</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
</span><span id="IntervalTier-335"><a href="#IntervalTier-335"><span class="linenos">335</span></a>
</span><span id="IntervalTier-336"><a href="#IntervalTier-336"><span class="linenos">336</span></a>            <span class="c1"># If we&#39;re only truncating, reinsert entries on the left and</span>
</span><span id="IntervalTier-337"><a href="#IntervalTier-337"><span class="linenos">337</span></a>            <span class="c1"># right edges</span>
</span><span id="IntervalTier-338"><a href="#IntervalTier-338"><span class="linenos">338</span></a>            <span class="c1"># if categorical, it doesn&#39;t make it into the list at all</span>
</span><span id="IntervalTier-339"><a href="#IntervalTier-339"><span class="linenos">339</span></a>            <span class="k">if</span> <span class="n">collisionMode</span> <span class="o">==</span> <span class="n">constants</span><span class="o">.</span><span class="n">EraseCollision</span><span class="o">.</span><span class="n">TRUNCATE</span><span class="p">:</span>
</span><span id="IntervalTier-340"><a href="#IntervalTier-340"><span class="linenos">340</span></a>                <span class="c1"># Check left edge</span>
</span><span id="IntervalTier-341"><a href="#IntervalTier-341"><span class="linenos">341</span></a>                <span class="k">if</span> <span class="n">matchList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">start</span> <span class="o">&lt;</span> <span class="n">start</span><span class="p">:</span>
</span><span id="IntervalTier-342"><a href="#IntervalTier-342"><span class="linenos">342</span></a>                    <span class="n">newEntry</span> <span class="o">=</span> <span class="n">Interval</span><span class="p">(</span><span class="n">matchList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">matchList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">label</span><span class="p">)</span>
</span><span id="IntervalTier-343"><a href="#IntervalTier-343"><span class="linenos">343</span></a>                    <span class="n">newTier</span><span class="o">.</span><span class="n">insertEntry</span><span class="p">(</span><span class="n">newEntry</span><span class="p">)</span>
</span><span id="IntervalTier-344"><a href="#IntervalTier-344"><span class="linenos">344</span></a>
</span><span id="IntervalTier-345"><a href="#IntervalTier-345"><span class="linenos">345</span></a>                <span class="c1"># Check right edge</span>
</span><span id="IntervalTier-346"><a href="#IntervalTier-346"><span class="linenos">346</span></a>                <span class="k">if</span> <span class="n">matchList</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span> <span class="o">&gt;</span> <span class="n">end</span><span class="p">:</span>
</span><span id="IntervalTier-347"><a href="#IntervalTier-347"><span class="linenos">347</span></a>                    <span class="n">newEntry</span> <span class="o">=</span> <span class="n">Interval</span><span class="p">(</span><span class="n">end</span><span class="p">,</span> <span class="n">matchList</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">matchList</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">label</span><span class="p">)</span>
</span><span id="IntervalTier-348"><a href="#IntervalTier-348"><span class="linenos">348</span></a>                    <span class="n">newTier</span><span class="o">.</span><span class="n">insertEntry</span><span class="p">(</span><span class="n">newEntry</span><span class="p">)</span>
</span><span id="IntervalTier-349"><a href="#IntervalTier-349"><span class="linenos">349</span></a>
</span><span id="IntervalTier-350"><a href="#IntervalTier-350"><span class="linenos">350</span></a>        <span class="k">if</span> <span class="n">doShrink</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="IntervalTier-351"><a href="#IntervalTier-351"><span class="linenos">351</span></a>            <span class="n">diff</span> <span class="o">=</span> <span class="n">end</span> <span class="o">-</span> <span class="n">start</span>
</span><span id="IntervalTier-352"><a href="#IntervalTier-352"><span class="linenos">352</span></a>            <span class="n">newEntryList</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="IntervalTier-353"><a href="#IntervalTier-353"><span class="linenos">353</span></a>            <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">newTier</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="IntervalTier-354"><a href="#IntervalTier-354"><span class="linenos">354</span></a>                <span class="k">if</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span> <span class="o">&lt;=</span> <span class="n">start</span><span class="p">:</span>
</span><span id="IntervalTier-355"><a href="#IntervalTier-355"><span class="linenos">355</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
</span><span id="IntervalTier-356"><a href="#IntervalTier-356"><span class="linenos">356</span></a>                <span class="k">elif</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span> <span class="o">&gt;=</span> <span class="n">end</span><span class="p">:</span>
</span><span id="IntervalTier-357"><a href="#IntervalTier-357"><span class="linenos">357</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="IntervalTier-358"><a href="#IntervalTier-358"><span class="linenos">358</span></a>                        <span class="n">Interval</span><span class="p">(</span>
</span><span id="IntervalTier-359"><a href="#IntervalTier-359"><span class="linenos">359</span></a>                            <span class="n">interval</span><span class="o">.</span><span class="n">start</span> <span class="o">-</span> <span class="n">diff</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">diff</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">label</span>
</span><span id="IntervalTier-360"><a href="#IntervalTier-360"><span class="linenos">360</span></a>                        <span class="p">)</span>
</span><span id="IntervalTier-361"><a href="#IntervalTier-361"><span class="linenos">361</span></a>                    <span class="p">)</span>
</span><span id="IntervalTier-362"><a href="#IntervalTier-362"><span class="linenos">362</span></a>
</span><span id="IntervalTier-363"><a href="#IntervalTier-363"><span class="linenos">363</span></a>            <span class="c1"># Special case: an interval that spanned the deleted</span>
</span><span id="IntervalTier-364"><a href="#IntervalTier-364"><span class="linenos">364</span></a>            <span class="c1"># section</span>
</span><span id="IntervalTier-365"><a href="#IntervalTier-365"><span class="linenos">365</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">newEntryList</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="IntervalTier-366"><a href="#IntervalTier-366"><span class="linenos">366</span></a>                <span class="n">rightEdge</span> <span class="o">=</span> <span class="n">newEntryList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">end</span> <span class="o">==</span> <span class="n">start</span>
</span><span id="IntervalTier-367"><a href="#IntervalTier-367"><span class="linenos">367</span></a>                <span class="n">leftEdge</span> <span class="o">=</span> <span class="n">newEntryList</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">start</span> <span class="o">==</span> <span class="n">start</span>
</span><span id="IntervalTier-368"><a href="#IntervalTier-368"><span class="linenos">368</span></a>                <span class="n">sameLabel</span> <span class="o">=</span> <span class="n">newEntryList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">label</span> <span class="o">==</span> <span class="n">newEntryList</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">label</span>
</span><span id="IntervalTier-369"><a href="#IntervalTier-369"><span class="linenos">369</span></a>                <span class="k">if</span> <span class="n">rightEdge</span> <span class="ow">and</span> <span class="n">leftEdge</span> <span class="ow">and</span> <span class="n">sameLabel</span><span class="p">:</span>
</span><span id="IntervalTier-370"><a href="#IntervalTier-370"><span class="linenos">370</span></a>                    <span class="n">newInterval</span> <span class="o">=</span> <span class="n">Interval</span><span class="p">(</span>
</span><span id="IntervalTier-371"><a href="#IntervalTier-371"><span class="linenos">371</span></a>                        <span class="n">newEntryList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">,</span>
</span><span id="IntervalTier-372"><a href="#IntervalTier-372"><span class="linenos">372</span></a>                        <span class="n">newEntryList</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">,</span>
</span><span id="IntervalTier-373"><a href="#IntervalTier-373"><span class="linenos">373</span></a>                        <span class="n">newEntryList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>
</span><span id="IntervalTier-374"><a href="#IntervalTier-374"><span class="linenos">374</span></a>                    <span class="p">)</span>
</span><span id="IntervalTier-375"><a href="#IntervalTier-375"><span class="linenos">375</span></a>
</span><span id="IntervalTier-376"><a href="#IntervalTier-376"><span class="linenos">376</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="IntervalTier-377"><a href="#IntervalTier-377"><span class="linenos">377</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="IntervalTier-378"><a href="#IntervalTier-378"><span class="linenos">378</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">newInterval</span><span class="p">)</span>
</span><span id="IntervalTier-379"><a href="#IntervalTier-379"><span class="linenos">379</span></a>
</span><span id="IntervalTier-380"><a href="#IntervalTier-380"><span class="linenos">380</span></a>                    <span class="c1"># Only one interval can span the deleted section,</span>
</span><span id="IntervalTier-381"><a href="#IntervalTier-381"><span class="linenos">381</span></a>                    <span class="c1"># so if we&#39;ve found it, move on</span>
</span><span id="IntervalTier-382"><a href="#IntervalTier-382"><span class="linenos">382</span></a>                    <span class="k">break</span>
</span><span id="IntervalTier-383"><a href="#IntervalTier-383"><span class="linenos">383</span></a>
</span><span id="IntervalTier-384"><a href="#IntervalTier-384"><span class="linenos">384</span></a>            <span class="n">newMax</span> <span class="o">=</span> <span class="n">newTier</span><span class="o">.</span><span class="n">maxTimestamp</span> <span class="o">-</span> <span class="n">diff</span>
</span><span id="IntervalTier-385"><a href="#IntervalTier-385"><span class="linenos">385</span></a>            <span class="n">newTier</span> <span class="o">=</span> <span class="n">newTier</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">entries</span><span class="o">=</span><span class="n">newEntryList</span><span class="p">,</span> <span class="n">maxTimestamp</span><span class="o">=</span><span class="n">newMax</span><span class="p">)</span>
</span><span id="IntervalTier-386"><a href="#IntervalTier-386"><span class="linenos">386</span></a>
</span><span id="IntervalTier-387"><a href="#IntervalTier-387"><span class="linenos">387</span></a>        <span class="k">return</span> <span class="n">newTier</span>
</span><span id="IntervalTier-388"><a href="#IntervalTier-388"><span class="linenos">388</span></a>
</span><span id="IntervalTier-389"><a href="#IntervalTier-389"><span class="linenos">389</span></a>    <span class="k">def</span> <span class="nf">getValuesInIntervals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataTupleList</span><span class="p">:</span> <span class="n">List</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Interval</span><span class="p">,</span> <span class="n">List</span><span class="p">]]:</span>
</span><span id="IntervalTier-390"><a href="#IntervalTier-390"><span class="linenos">390</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns data from dataTupleList contained in labeled intervals</span>
</span><span id="IntervalTier-391"><a href="#IntervalTier-391"><span class="linenos">391</span></a>
</span><span id="IntervalTier-392"><a href="#IntervalTier-392"><span class="linenos">392</span></a><span class="sd">        Each labeled interval will get its own list of data values.</span>
</span><span id="IntervalTier-393"><a href="#IntervalTier-393"><span class="linenos">393</span></a>
</span><span id="IntervalTier-394"><a href="#IntervalTier-394"><span class="linenos">394</span></a><span class="sd">        dataTupleList should be of the form:</span>
</span><span id="IntervalTier-395"><a href="#IntervalTier-395"><span class="linenos">395</span></a><span class="sd">        [(time1, value1a, value1b,...), (time2, value2a, value2b...), ...]</span>
</span><span id="IntervalTier-396"><a href="#IntervalTier-396"><span class="linenos">396</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier-397"><a href="#IntervalTier-397"><span class="linenos">397</span></a>
</span><span id="IntervalTier-398"><a href="#IntervalTier-398"><span class="linenos">398</span></a>        <span class="n">returnList</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="IntervalTier-399"><a href="#IntervalTier-399"><span class="linenos">399</span></a>
</span><span id="IntervalTier-400"><a href="#IntervalTier-400"><span class="linenos">400</span></a>        <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="IntervalTier-401"><a href="#IntervalTier-401"><span class="linenos">401</span></a>            <span class="n">intervalDataList</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">getValuesInInterval</span><span class="p">(</span>
</span><span id="IntervalTier-402"><a href="#IntervalTier-402"><span class="linenos">402</span></a>                <span class="n">dataTupleList</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span>
</span><span id="IntervalTier-403"><a href="#IntervalTier-403"><span class="linenos">403</span></a>            <span class="p">)</span>
</span><span id="IntervalTier-404"><a href="#IntervalTier-404"><span class="linenos">404</span></a>            <span class="n">returnList</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">interval</span><span class="p">,</span> <span class="n">intervalDataList</span><span class="p">))</span>
</span><span id="IntervalTier-405"><a href="#IntervalTier-405"><span class="linenos">405</span></a>
</span><span id="IntervalTier-406"><a href="#IntervalTier-406"><span class="linenos">406</span></a>        <span class="k">return</span> <span class="n">returnList</span>
</span><span id="IntervalTier-407"><a href="#IntervalTier-407"><span class="linenos">407</span></a>
</span><span id="IntervalTier-408"><a href="#IntervalTier-408"><span class="linenos">408</span></a>    <span class="k">def</span> <span class="nf">getNonEntries</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Interval</span><span class="p">]:</span>
</span><span id="IntervalTier-409"><a href="#IntervalTier-409"><span class="linenos">409</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the regions of the textgrid without labels</span>
</span><span id="IntervalTier-410"><a href="#IntervalTier-410"><span class="linenos">410</span></a>
</span><span id="IntervalTier-411"><a href="#IntervalTier-411"><span class="linenos">411</span></a><span class="sd">        This can include unlabeled segments and regions marked as silent.</span>
</span><span id="IntervalTier-412"><a href="#IntervalTier-412"><span class="linenos">412</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier-413"><a href="#IntervalTier-413"><span class="linenos">413</span></a>        <span class="n">entries</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span>
</span><span id="IntervalTier-414"><a href="#IntervalTier-414"><span class="linenos">414</span></a>        <span class="n">invertedEntryList</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="IntervalTier-415"><a href="#IntervalTier-415"><span class="linenos">415</span></a>            <span class="n">Interval</span><span class="p">(</span><span class="n">entries</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">entries</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="IntervalTier-416"><a href="#IntervalTier-416"><span class="linenos">416</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">entries</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="IntervalTier-417"><a href="#IntervalTier-417"><span class="linenos">417</span></a>        <span class="p">]</span>
</span><span id="IntervalTier-418"><a href="#IntervalTier-418"><span class="linenos">418</span></a>
</span><span id="IntervalTier-419"><a href="#IntervalTier-419"><span class="linenos">419</span></a>        <span class="c1"># Remove entries that have no duration (ie lie between two entries</span>
</span><span id="IntervalTier-420"><a href="#IntervalTier-420"><span class="linenos">420</span></a>        <span class="c1"># that share a border)</span>
</span><span id="IntervalTier-421"><a href="#IntervalTier-421"><span class="linenos">421</span></a>        <span class="n">invertedEntryList</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="IntervalTier-422"><a href="#IntervalTier-422"><span class="linenos">422</span></a>            <span class="n">interval</span> <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">invertedEntryList</span> <span class="k">if</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span> <span class="o">&lt;</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span>
</span><span id="IntervalTier-423"><a href="#IntervalTier-423"><span class="linenos">423</span></a>        <span class="p">]</span>
</span><span id="IntervalTier-424"><a href="#IntervalTier-424"><span class="linenos">424</span></a>
</span><span id="IntervalTier-425"><a href="#IntervalTier-425"><span class="linenos">425</span></a>        <span class="k">if</span> <span class="n">entries</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IntervalTier-426"><a href="#IntervalTier-426"><span class="linenos">426</span></a>            <span class="n">invertedEntryList</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">Interval</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">entries</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
</span><span id="IntervalTier-427"><a href="#IntervalTier-427"><span class="linenos">427</span></a>
</span><span id="IntervalTier-428"><a href="#IntervalTier-428"><span class="linenos">428</span></a>        <span class="k">if</span> <span class="n">entries</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span><span class="p">:</span>
</span><span id="IntervalTier-429"><a href="#IntervalTier-429"><span class="linenos">429</span></a>            <span class="n">invertedEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Interval</span><span class="p">(</span><span class="n">entries</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
</span><span id="IntervalTier-430"><a href="#IntervalTier-430"><span class="linenos">430</span></a>
</span><span id="IntervalTier-431"><a href="#IntervalTier-431"><span class="linenos">431</span></a>        <span class="n">invertedEntryList</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="IntervalTier-432"><a href="#IntervalTier-432"><span class="linenos">432</span></a>            <span class="n">interval</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">interval</span><span class="p">,</span> <span class="n">Interval</span><span class="p">)</span> <span class="k">else</span> <span class="n">Interval</span><span class="p">(</span><span class="o">*</span><span class="n">interval</span><span class="p">)</span>
</span><span id="IntervalTier-433"><a href="#IntervalTier-433"><span class="linenos">433</span></a>            <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">invertedEntryList</span>
</span><span id="IntervalTier-434"><a href="#IntervalTier-434"><span class="linenos">434</span></a>        <span class="p">]</span>
</span><span id="IntervalTier-435"><a href="#IntervalTier-435"><span class="linenos">435</span></a>
</span><span id="IntervalTier-436"><a href="#IntervalTier-436"><span class="linenos">436</span></a>        <span class="k">return</span> <span class="n">invertedEntryList</span>
</span><span id="IntervalTier-437"><a href="#IntervalTier-437"><span class="linenos">437</span></a>
</span><span id="IntervalTier-438"><a href="#IntervalTier-438"><span class="linenos">438</span></a>    <span class="k">def</span> <span class="nf">insertEntry</span><span class="p">(</span>
</span><span id="IntervalTier-439"><a href="#IntervalTier-439"><span class="linenos">439</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="IntervalTier-440"><a href="#IntervalTier-440"><span class="linenos">440</span></a>        <span class="n">entry</span><span class="p">:</span> <span class="n">Interval</span><span class="p">,</span>
</span><span id="IntervalTier-441"><a href="#IntervalTier-441"><span class="linenos">441</span></a>        <span class="n">collisionMode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;replace&quot;</span><span class="p">,</span> <span class="s2">&quot;merge&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
</span><span id="IntervalTier-442"><a href="#IntervalTier-442"><span class="linenos">442</span></a>        <span class="n">collisionReportingMode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;silence&quot;</span><span class="p">,</span> <span class="s2">&quot;warning&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;warning&quot;</span><span class="p">,</span>
</span><span id="IntervalTier-443"><a href="#IntervalTier-443"><span class="linenos">443</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IntervalTier-444"><a href="#IntervalTier-444"><span class="linenos">444</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Inserts an interval into the tier</span>
</span><span id="IntervalTier-445"><a href="#IntervalTier-445"><span class="linenos">445</span></a>
</span><span id="IntervalTier-446"><a href="#IntervalTier-446"><span class="linenos">446</span></a><span class="sd">        Args:</span>
</span><span id="IntervalTier-447"><a href="#IntervalTier-447"><span class="linenos">447</span></a><span class="sd">            entry: the Interval to insert</span>
</span><span id="IntervalTier-448"><a href="#IntervalTier-448"><span class="linenos">448</span></a><span class="sd">            collisionMode: determines the behavior in the event that intervals</span>
</span><span id="IntervalTier-449"><a href="#IntervalTier-449"><span class="linenos">449</span></a><span class="sd">                exist in the insertion area.</span>
</span><span id="IntervalTier-450"><a href="#IntervalTier-450"><span class="linenos">450</span></a><span class="sd">                - &#39;replace&#39; will remove existing items</span>
</span><span id="IntervalTier-451"><a href="#IntervalTier-451"><span class="linenos">451</span></a><span class="sd">                - &#39;merge&#39; will fuse the inserting item with existing items</span>
</span><span id="IntervalTier-452"><a href="#IntervalTier-452"><span class="linenos">452</span></a><span class="sd">                - None or any other value will throw a CollisionError</span>
</span><span id="IntervalTier-453"><a href="#IntervalTier-453"><span class="linenos">453</span></a><span class="sd">            collisionReportingMode: Determines the behavior if the new entry</span>
</span><span id="IntervalTier-454"><a href="#IntervalTier-454"><span class="linenos">454</span></a><span class="sd">                overlaps with an existing one</span>
</span><span id="IntervalTier-455"><a href="#IntervalTier-455"><span class="linenos">455</span></a>
</span><span id="IntervalTier-456"><a href="#IntervalTier-456"><span class="linenos">456</span></a><span class="sd">        Returns:</span>
</span><span id="IntervalTier-457"><a href="#IntervalTier-457"><span class="linenos">457</span></a><span class="sd">            the modified version of the current tier</span>
</span><span id="IntervalTier-458"><a href="#IntervalTier-458"><span class="linenos">458</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier-459"><a href="#IntervalTier-459"><span class="linenos">459</span></a>        <span class="n">utils</span><span class="o">.</span><span class="n">validateOption</span><span class="p">(</span>
</span><span id="IntervalTier-460"><a href="#IntervalTier-460"><span class="linenos">460</span></a>            <span class="s2">&quot;collisionMode&quot;</span><span class="p">,</span> <span class="n">collisionMode</span><span class="p">,</span> <span class="n">constants</span><span class="o">.</span><span class="n">IntervalCollision</span>
</span><span id="IntervalTier-461"><a href="#IntervalTier-461"><span class="linenos">461</span></a>        <span class="p">)</span>
</span><span id="IntervalTier-462"><a href="#IntervalTier-462"><span class="linenos">462</span></a>        <span class="n">utils</span><span class="o">.</span><span class="n">validateOption</span><span class="p">(</span>
</span><span id="IntervalTier-463"><a href="#IntervalTier-463"><span class="linenos">463</span></a>            <span class="s2">&quot;collisionReportingMode&quot;</span><span class="p">,</span>
</span><span id="IntervalTier-464"><a href="#IntervalTier-464"><span class="linenos">464</span></a>            <span class="n">collisionReportingMode</span><span class="p">,</span>
</span><span id="IntervalTier-465"><a href="#IntervalTier-465"><span class="linenos">465</span></a>            <span class="n">constants</span><span class="o">.</span><span class="n">ErrorReportingMode</span><span class="p">,</span>
</span><span id="IntervalTier-466"><a href="#IntervalTier-466"><span class="linenos">466</span></a>        <span class="p">)</span>
</span><span id="IntervalTier-467"><a href="#IntervalTier-467"><span class="linenos">467</span></a>        <span class="n">collisionReporter</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">getErrorReporter</span><span class="p">(</span><span class="n">collisionReportingMode</span><span class="p">)</span>
</span><span id="IntervalTier-468"><a href="#IntervalTier-468"><span class="linenos">468</span></a>
</span><span id="IntervalTier-469"><a href="#IntervalTier-469"><span class="linenos">469</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entry</span><span class="p">,</span> <span class="n">Interval</span><span class="p">):</span>
</span><span id="IntervalTier-470"><a href="#IntervalTier-470"><span class="linenos">470</span></a>            <span class="n">interval</span> <span class="o">=</span> <span class="n">Interval</span><span class="p">(</span><span class="o">*</span><span class="n">entry</span><span class="p">)</span>
</span><span id="IntervalTier-471"><a href="#IntervalTier-471"><span class="linenos">471</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="IntervalTier-472"><a href="#IntervalTier-472"><span class="linenos">472</span></a>            <span class="n">interval</span> <span class="o">=</span> <span class="n">entry</span>
</span><span id="IntervalTier-473"><a href="#IntervalTier-473"><span class="linenos">473</span></a>
</span><span id="IntervalTier-474"><a href="#IntervalTier-474"><span class="linenos">474</span></a>        <span class="n">matchList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span>
</span><span id="IntervalTier-475"><a href="#IntervalTier-475"><span class="linenos">475</span></a>            <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">CropCollision</span><span class="o">.</span><span class="n">LAX</span><span class="p">,</span> <span class="kc">False</span>
</span><span id="IntervalTier-476"><a href="#IntervalTier-476"><span class="linenos">476</span></a>        <span class="p">)</span><span class="o">.</span><span class="n">_entries</span>
</span><span id="IntervalTier-477"><a href="#IntervalTier-477"><span class="linenos">477</span></a>
</span><span id="IntervalTier-478"><a href="#IntervalTier-478"><span class="linenos">478</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matchList</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IntervalTier-479"><a href="#IntervalTier-479"><span class="linenos">479</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
</span><span id="IntervalTier-480"><a href="#IntervalTier-480"><span class="linenos">480</span></a>
</span><span id="IntervalTier-481"><a href="#IntervalTier-481"><span class="linenos">481</span></a>        <span class="k">elif</span> <span class="n">collisionMode</span> <span class="o">==</span> <span class="n">constants</span><span class="o">.</span><span class="n">IntervalCollision</span><span class="o">.</span><span class="n">REPLACE</span><span class="p">:</span>
</span><span id="IntervalTier-482"><a href="#IntervalTier-482"><span class="linenos">482</span></a>            <span class="k">for</span> <span class="n">matchEntry</span> <span class="ow">in</span> <span class="n">matchList</span><span class="p">:</span>
</span><span id="IntervalTier-483"><a href="#IntervalTier-483"><span class="linenos">483</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">deleteEntry</span><span class="p">(</span><span class="n">matchEntry</span><span class="p">)</span>
</span><span id="IntervalTier-484"><a href="#IntervalTier-484"><span class="linenos">484</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
</span><span id="IntervalTier-485"><a href="#IntervalTier-485"><span class="linenos">485</span></a>
</span><span id="IntervalTier-486"><a href="#IntervalTier-486"><span class="linenos">486</span></a>        <span class="k">elif</span> <span class="n">collisionMode</span> <span class="o">==</span> <span class="n">constants</span><span class="o">.</span><span class="n">IntervalCollision</span><span class="o">.</span><span class="n">MERGE</span><span class="p">:</span>
</span><span id="IntervalTier-487"><a href="#IntervalTier-487"><span class="linenos">487</span></a>            <span class="k">for</span> <span class="n">matchEntry</span> <span class="ow">in</span> <span class="n">matchList</span><span class="p">:</span>
</span><span id="IntervalTier-488"><a href="#IntervalTier-488"><span class="linenos">488</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">deleteEntry</span><span class="p">(</span><span class="n">matchEntry</span><span class="p">)</span>
</span><span id="IntervalTier-489"><a href="#IntervalTier-489"><span class="linenos">489</span></a>            <span class="n">matchList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
</span><span id="IntervalTier-490"><a href="#IntervalTier-490"><span class="linenos">490</span></a>            <span class="n">matchList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>  <span class="c1"># By starting time</span>
</span><span id="IntervalTier-491"><a href="#IntervalTier-491"><span class="linenos">491</span></a>
</span><span id="IntervalTier-492"><a href="#IntervalTier-492"><span class="linenos">492</span></a>            <span class="n">newInterval</span> <span class="o">=</span> <span class="n">Interval</span><span class="p">(</span>
</span><span id="IntervalTier-493"><a href="#IntervalTier-493"><span class="linenos">493</span></a>                <span class="nb">min</span><span class="p">([</span><span class="n">tmpInterval</span><span class="o">.</span><span class="n">start</span> <span class="k">for</span> <span class="n">tmpInterval</span> <span class="ow">in</span> <span class="n">matchList</span><span class="p">]),</span>
</span><span id="IntervalTier-494"><a href="#IntervalTier-494"><span class="linenos">494</span></a>                <span class="nb">max</span><span class="p">([</span><span class="n">tmpInterval</span><span class="o">.</span><span class="n">end</span> <span class="k">for</span> <span class="n">tmpInterval</span> <span class="ow">in</span> <span class="n">matchList</span><span class="p">]),</span>
</span><span id="IntervalTier-495"><a href="#IntervalTier-495"><span class="linenos">495</span></a>                <span class="s2">&quot;-&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">tmpInterval</span><span class="o">.</span><span class="n">label</span> <span class="k">for</span> <span class="n">tmpInterval</span> <span class="ow">in</span> <span class="n">matchList</span><span class="p">]),</span>
</span><span id="IntervalTier-496"><a href="#IntervalTier-496"><span class="linenos">496</span></a>            <span class="p">)</span>
</span><span id="IntervalTier-497"><a href="#IntervalTier-497"><span class="linenos">497</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newInterval</span><span class="p">)</span>
</span><span id="IntervalTier-498"><a href="#IntervalTier-498"><span class="linenos">498</span></a>
</span><span id="IntervalTier-499"><a href="#IntervalTier-499"><span class="linenos">499</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="IntervalTier-500"><a href="#IntervalTier-500"><span class="linenos">500</span></a>            <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">CollisionError</span><span class="p">(</span>
</span><span id="IntervalTier-501"><a href="#IntervalTier-501"><span class="linenos">501</span></a>                <span class="s2">&quot;Attempted to insert interval &quot;</span>
</span><span id="IntervalTier-502"><a href="#IntervalTier-502"><span class="linenos">502</span></a>                <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="si">}</span><span class="s2">, &#39;</span><span class="si">{</span><span class="n">interval</span><span class="o">.</span><span class="n">label</span><span class="si">}</span><span class="s2">&#39;) into tier </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> &quot;</span>
</span><span id="IntervalTier-503"><a href="#IntervalTier-503"><span class="linenos">503</span></a>                <span class="s2">&quot;of textgrid but overlapping entries &quot;</span>
</span><span id="IntervalTier-504"><a href="#IntervalTier-504"><span class="linenos">504</span></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">interval</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">matchList</span><span class="p">]</span><span class="si">}</span><span class="s2"> &quot;</span>
</span><span id="IntervalTier-505"><a href="#IntervalTier-505"><span class="linenos">505</span></a>                <span class="s2">&quot;already exist&quot;</span>
</span><span id="IntervalTier-506"><a href="#IntervalTier-506"><span class="linenos">506</span></a>            <span class="p">)</span>
</span><span id="IntervalTier-507"><a href="#IntervalTier-507"><span class="linenos">507</span></a>
</span><span id="IntervalTier-508"><a href="#IntervalTier-508"><span class="linenos">508</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
</span><span id="IntervalTier-509"><a href="#IntervalTier-509"><span class="linenos">509</span></a>
</span><span id="IntervalTier-510"><a href="#IntervalTier-510"><span class="linenos">510</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">minTimestamp</span><span class="p">:</span>
</span><span id="IntervalTier-511"><a href="#IntervalTier-511"><span class="linenos">511</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">minTimestamp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="IntervalTier-512"><a href="#IntervalTier-512"><span class="linenos">512</span></a>
</span><span id="IntervalTier-513"><a href="#IntervalTier-513"><span class="linenos">513</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span><span class="p">:</span>
</span><span id="IntervalTier-514"><a href="#IntervalTier-514"><span class="linenos">514</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
</span><span id="IntervalTier-515"><a href="#IntervalTier-515"><span class="linenos">515</span></a>
</span><span id="IntervalTier-516"><a href="#IntervalTier-516"><span class="linenos">516</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matchList</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IntervalTier-517"><a href="#IntervalTier-517"><span class="linenos">517</span></a>            <span class="n">collisionReporter</span><span class="p">(</span>
</span><span id="IntervalTier-518"><a href="#IntervalTier-518"><span class="linenos">518</span></a>                <span class="n">errors</span><span class="o">.</span><span class="n">CollisionError</span><span class="p">,</span>
</span><span id="IntervalTier-519"><a href="#IntervalTier-519"><span class="linenos">519</span></a>                <span class="sa">f</span><span class="s2">&quot;Collision warning for (</span><span class="si">{</span><span class="n">interval</span><span class="si">}</span><span class="s2">) with items &quot;</span>
</span><span id="IntervalTier-520"><a href="#IntervalTier-520"><span class="linenos">520</span></a>                <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">matchList</span><span class="si">}</span><span class="s2">) of tier &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="IntervalTier-521"><a href="#IntervalTier-521"><span class="linenos">521</span></a>            <span class="p">)</span>
</span><span id="IntervalTier-522"><a href="#IntervalTier-522"><span class="linenos">522</span></a>
</span><span id="IntervalTier-523"><a href="#IntervalTier-523"><span class="linenos">523</span></a>    <span class="k">def</span> <span class="nf">insertSpace</span><span class="p">(</span>
</span><span id="IntervalTier-524"><a href="#IntervalTier-524"><span class="linenos">524</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="IntervalTier-525"><a href="#IntervalTier-525"><span class="linenos">525</span></a>        <span class="n">start</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="IntervalTier-526"><a href="#IntervalTier-526"><span class="linenos">526</span></a>        <span class="n">duration</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="IntervalTier-527"><a href="#IntervalTier-527"><span class="linenos">527</span></a>        <span class="n">collisionMode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;stretch&quot;</span><span class="p">,</span> <span class="s2">&quot;split&quot;</span><span class="p">,</span> <span class="s2">&quot;no_change&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">],</span>
</span><span id="IntervalTier-528"><a href="#IntervalTier-528"><span class="linenos">528</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">:</span>
</span><span id="IntervalTier-529"><a href="#IntervalTier-529"><span class="linenos">529</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Inserts a blank region into the tier</span>
</span><span id="IntervalTier-530"><a href="#IntervalTier-530"><span class="linenos">530</span></a>
</span><span id="IntervalTier-531"><a href="#IntervalTier-531"><span class="linenos">531</span></a><span class="sd">        Args:</span>
</span><span id="IntervalTier-532"><a href="#IntervalTier-532"><span class="linenos">532</span></a><span class="sd">            start:</span>
</span><span id="IntervalTier-533"><a href="#IntervalTier-533"><span class="linenos">533</span></a><span class="sd">            duration:</span>
</span><span id="IntervalTier-534"><a href="#IntervalTier-534"><span class="linenos">534</span></a><span class="sd">            collisionMode: Determines the behavior that occurs if</span>
</span><span id="IntervalTier-535"><a href="#IntervalTier-535"><span class="linenos">535</span></a><span class="sd">                an interval stradles the starting point</span>
</span><span id="IntervalTier-536"><a href="#IntervalTier-536"><span class="linenos">536</span></a><span class="sd">                - &#39;stretch&#39; stretches the interval by /duration/ amount</span>
</span><span id="IntervalTier-537"><a href="#IntervalTier-537"><span class="linenos">537</span></a><span class="sd">                - &#39;split&#39; splits the interval into two--everything to the</span>
</span><span id="IntervalTier-538"><a href="#IntervalTier-538"><span class="linenos">538</span></a><span class="sd">                    right of &#39;start&#39; will be advanced by &#39;duration&#39; seconds</span>
</span><span id="IntervalTier-539"><a href="#IntervalTier-539"><span class="linenos">539</span></a><span class="sd">                - &#39;no change&#39; leaves the interval as is with no change</span>
</span><span id="IntervalTier-540"><a href="#IntervalTier-540"><span class="linenos">540</span></a><span class="sd">                - &#39;error&#39; will stop execution and raise an error</span>
</span><span id="IntervalTier-541"><a href="#IntervalTier-541"><span class="linenos">541</span></a>
</span><span id="IntervalTier-542"><a href="#IntervalTier-542"><span class="linenos">542</span></a><span class="sd">        Returns:</span>
</span><span id="IntervalTier-543"><a href="#IntervalTier-543"><span class="linenos">543</span></a><span class="sd">            the modified version of the current tier</span>
</span><span id="IntervalTier-544"><a href="#IntervalTier-544"><span class="linenos">544</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier-545"><a href="#IntervalTier-545"><span class="linenos">545</span></a>        <span class="n">utils</span><span class="o">.</span><span class="n">validateOption</span><span class="p">(</span>
</span><span id="IntervalTier-546"><a href="#IntervalTier-546"><span class="linenos">546</span></a>            <span class="s2">&quot;collisionMode&quot;</span><span class="p">,</span> <span class="n">collisionMode</span><span class="p">,</span> <span class="n">constants</span><span class="o">.</span><span class="n">WhitespaceCollision</span>
</span><span id="IntervalTier-547"><a href="#IntervalTier-547"><span class="linenos">547</span></a>        <span class="p">)</span>
</span><span id="IntervalTier-548"><a href="#IntervalTier-548"><span class="linenos">548</span></a>
</span><span id="IntervalTier-549"><a href="#IntervalTier-549"><span class="linenos">549</span></a>        <span class="n">newEntryList</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="IntervalTier-550"><a href="#IntervalTier-550"><span class="linenos">550</span></a>        <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="IntervalTier-551"><a href="#IntervalTier-551"><span class="linenos">551</span></a>            <span class="c1"># Entry exists before the insertion point</span>
</span><span id="IntervalTier-552"><a href="#IntervalTier-552"><span class="linenos">552</span></a>            <span class="k">if</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span> <span class="o">&lt;=</span> <span class="n">start</span><span class="p">:</span>
</span><span id="IntervalTier-553"><a href="#IntervalTier-553"><span class="linenos">553</span></a>                <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
</span><span id="IntervalTier-554"><a href="#IntervalTier-554"><span class="linenos">554</span></a>            <span class="c1"># Entry exists after the insertion point</span>
</span><span id="IntervalTier-555"><a href="#IntervalTier-555"><span class="linenos">555</span></a>            <span class="k">elif</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span> <span class="o">&gt;=</span> <span class="n">start</span><span class="p">:</span>
</span><span id="IntervalTier-556"><a href="#IntervalTier-556"><span class="linenos">556</span></a>                <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="IntervalTier-557"><a href="#IntervalTier-557"><span class="linenos">557</span></a>                    <span class="n">Interval</span><span class="p">(</span>
</span><span id="IntervalTier-558"><a href="#IntervalTier-558"><span class="linenos">558</span></a>                        <span class="n">interval</span><span class="o">.</span><span class="n">start</span> <span class="o">+</span> <span class="n">duration</span><span class="p">,</span>
</span><span id="IntervalTier-559"><a href="#IntervalTier-559"><span class="linenos">559</span></a>                        <span class="n">interval</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="n">duration</span><span class="p">,</span>
</span><span id="IntervalTier-560"><a href="#IntervalTier-560"><span class="linenos">560</span></a>                        <span class="n">interval</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>
</span><span id="IntervalTier-561"><a href="#IntervalTier-561"><span class="linenos">561</span></a>                    <span class="p">)</span>
</span><span id="IntervalTier-562"><a href="#IntervalTier-562"><span class="linenos">562</span></a>                <span class="p">)</span>
</span><span id="IntervalTier-563"><a href="#IntervalTier-563"><span class="linenos">563</span></a>            <span class="c1"># Entry straddles the insertion point</span>
</span><span id="IntervalTier-564"><a href="#IntervalTier-564"><span class="linenos">564</span></a>            <span class="k">elif</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span> <span class="o">&lt;=</span> <span class="n">start</span> <span class="ow">and</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span> <span class="o">&gt;</span> <span class="n">start</span><span class="p">:</span>
</span><span id="IntervalTier-565"><a href="#IntervalTier-565"><span class="linenos">565</span></a>                <span class="k">if</span> <span class="n">collisionMode</span> <span class="o">==</span> <span class="n">constants</span><span class="o">.</span><span class="n">WhitespaceCollision</span><span class="o">.</span><span class="n">STRETCH</span><span class="p">:</span>
</span><span id="IntervalTier-566"><a href="#IntervalTier-566"><span class="linenos">566</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="IntervalTier-567"><a href="#IntervalTier-567"><span class="linenos">567</span></a>                        <span class="n">Interval</span><span class="p">(</span>
</span><span id="IntervalTier-568"><a href="#IntervalTier-568"><span class="linenos">568</span></a>                            <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="n">duration</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">label</span>
</span><span id="IntervalTier-569"><a href="#IntervalTier-569"><span class="linenos">569</span></a>                        <span class="p">)</span>
</span><span id="IntervalTier-570"><a href="#IntervalTier-570"><span class="linenos">570</span></a>                    <span class="p">)</span>
</span><span id="IntervalTier-571"><a href="#IntervalTier-571"><span class="linenos">571</span></a>                <span class="k">elif</span> <span class="n">collisionMode</span> <span class="o">==</span> <span class="n">constants</span><span class="o">.</span><span class="n">WhitespaceCollision</span><span class="o">.</span><span class="n">SPLIT</span><span class="p">:</span>
</span><span id="IntervalTier-572"><a href="#IntervalTier-572"><span class="linenos">572</span></a>                    <span class="c1"># Left side of the split</span>
</span><span id="IntervalTier-573"><a href="#IntervalTier-573"><span class="linenos">573</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Interval</span><span class="p">(</span><span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">label</span><span class="p">))</span>
</span><span id="IntervalTier-574"><a href="#IntervalTier-574"><span class="linenos">574</span></a>                    <span class="c1"># Right side of the split</span>
</span><span id="IntervalTier-575"><a href="#IntervalTier-575"><span class="linenos">575</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="IntervalTier-576"><a href="#IntervalTier-576"><span class="linenos">576</span></a>                        <span class="p">(</span>
</span><span id="IntervalTier-577"><a href="#IntervalTier-577"><span class="linenos">577</span></a>                            <span class="n">start</span> <span class="o">+</span> <span class="n">duration</span><span class="p">,</span>
</span><span id="IntervalTier-578"><a href="#IntervalTier-578"><span class="linenos">578</span></a>                            <span class="n">start</span> <span class="o">+</span> <span class="n">duration</span> <span class="o">+</span> <span class="p">(</span><span class="n">interval</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="p">),</span>
</span><span id="IntervalTier-579"><a href="#IntervalTier-579"><span class="linenos">579</span></a>                            <span class="n">interval</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>
</span><span id="IntervalTier-580"><a href="#IntervalTier-580"><span class="linenos">580</span></a>                        <span class="p">)</span>
</span><span id="IntervalTier-581"><a href="#IntervalTier-581"><span class="linenos">581</span></a>                    <span class="p">)</span>
</span><span id="IntervalTier-582"><a href="#IntervalTier-582"><span class="linenos">582</span></a>                <span class="k">elif</span> <span class="n">collisionMode</span> <span class="o">==</span> <span class="n">constants</span><span class="o">.</span><span class="n">WhitespaceCollision</span><span class="o">.</span><span class="n">NO_CHANGE</span><span class="p">:</span>
</span><span id="IntervalTier-583"><a href="#IntervalTier-583"><span class="linenos">583</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
</span><span id="IntervalTier-584"><a href="#IntervalTier-584"><span class="linenos">584</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="IntervalTier-585"><a href="#IntervalTier-585"><span class="linenos">585</span></a>                    <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">ArgumentError</span><span class="p">(</span>
</span><span id="IntervalTier-586"><a href="#IntervalTier-586"><span class="linenos">586</span></a>                        <span class="sa">f</span><span class="s2">&quot;Collision occured during insertSpace() for interval &#39;</span><span class="si">{</span><span class="n">interval</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
</span><span id="IntervalTier-587"><a href="#IntervalTier-587"><span class="linenos">587</span></a>                        <span class="sa">f</span><span class="s2">&quot;and given white space insertion interval (</span><span class="si">{</span><span class="n">start</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">start</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">duration</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="IntervalTier-588"><a href="#IntervalTier-588"><span class="linenos">588</span></a>                    <span class="p">)</span>
</span><span id="IntervalTier-589"><a href="#IntervalTier-589"><span class="linenos">589</span></a>
</span><span id="IntervalTier-590"><a href="#IntervalTier-590"><span class="linenos">590</span></a>        <span class="n">newTier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
</span><span id="IntervalTier-591"><a href="#IntervalTier-591"><span class="linenos">591</span></a>            <span class="n">entries</span><span class="o">=</span><span class="n">newEntryList</span><span class="p">,</span> <span class="n">maxTimestamp</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span> <span class="o">+</span> <span class="n">duration</span>
</span><span id="IntervalTier-592"><a href="#IntervalTier-592"><span class="linenos">592</span></a>        <span class="p">)</span>
</span><span id="IntervalTier-593"><a href="#IntervalTier-593"><span class="linenos">593</span></a>
</span><span id="IntervalTier-594"><a href="#IntervalTier-594"><span class="linenos">594</span></a>        <span class="k">return</span> <span class="n">newTier</span>
</span><span id="IntervalTier-595"><a href="#IntervalTier-595"><span class="linenos">595</span></a>
</span><span id="IntervalTier-596"><a href="#IntervalTier-596"><span class="linenos">596</span></a>    <span class="k">def</span> <span class="nf">intersection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tier</span><span class="p">:</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">,</span> <span class="n">demarcator</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">:</span>
</span><span id="IntervalTier-597"><a href="#IntervalTier-597"><span class="linenos">597</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Takes the set intersection of this tier and the given one</span>
</span><span id="IntervalTier-598"><a href="#IntervalTier-598"><span class="linenos">598</span></a>
</span><span id="IntervalTier-599"><a href="#IntervalTier-599"><span class="linenos">599</span></a><span class="sd">        - The output will contain one interval for each overlapping pair</span>
</span><span id="IntervalTier-600"><a href="#IntervalTier-600"><span class="linenos">600</span></a><span class="sd">          e.g. [(1, 2, &#39;foo&#39;)] and [(1, 1.3, &#39;bang&#39;), (1.7, 2, &#39;wizz&#39;)]</span>
</span><span id="IntervalTier-601"><a href="#IntervalTier-601"><span class="linenos">601</span></a><span class="sd">                -&gt; [(1, 1.3, &#39;foo-bang&#39;), (1.7, 2, &#39;foo-wizz&#39;)]</span>
</span><span id="IntervalTier-602"><a href="#IntervalTier-602"><span class="linenos">602</span></a><span class="sd">        - Only intervals that exist in both tiers will remain in the returned tier.</span>
</span><span id="IntervalTier-603"><a href="#IntervalTier-603"><span class="linenos">603</span></a><span class="sd">          e.g. [(1, 2, &#39;foo&#39;), (3, 4, &#39;bar&#39;)] and [(1, 2, &#39;bang&#39;), (2, 3, &#39;wizz&#39;)]</span>
</span><span id="IntervalTier-604"><a href="#IntervalTier-604"><span class="linenos">604</span></a><span class="sd">                -&gt; [(1, 2, &#39;foo-bang&#39;)]</span>
</span><span id="IntervalTier-605"><a href="#IntervalTier-605"><span class="linenos">605</span></a><span class="sd">        - If intervals partially overlap, only the overlapping portion will be returned.</span>
</span><span id="IntervalTier-606"><a href="#IntervalTier-606"><span class="linenos">606</span></a><span class="sd">          e.g. [(1, 2, &#39;foo&#39;)] and [(0.5, 1.5, &#39;bang&#39;)]</span>
</span><span id="IntervalTier-607"><a href="#IntervalTier-607"><span class="linenos">607</span></a><span class="sd">                -&gt; [(1, 1.5, &#39;foo-bang&#39;)]</span>
</span><span id="IntervalTier-608"><a href="#IntervalTier-608"><span class="linenos">608</span></a>
</span><span id="IntervalTier-609"><a href="#IntervalTier-609"><span class="linenos">609</span></a><span class="sd">        Compare with IntervalTier.mergeLabels</span>
</span><span id="IntervalTier-610"><a href="#IntervalTier-610"><span class="linenos">610</span></a>
</span><span id="IntervalTier-611"><a href="#IntervalTier-611"><span class="linenos">611</span></a><span class="sd">        Args:</span>
</span><span id="IntervalTier-612"><a href="#IntervalTier-612"><span class="linenos">612</span></a><span class="sd">            tier: the tier to intersect with</span>
</span><span id="IntervalTier-613"><a href="#IntervalTier-613"><span class="linenos">613</span></a><span class="sd">            demarcator: the character to separate the labels of the overlapping intervals</span>
</span><span id="IntervalTier-614"><a href="#IntervalTier-614"><span class="linenos">614</span></a>
</span><span id="IntervalTier-615"><a href="#IntervalTier-615"><span class="linenos">615</span></a><span class="sd">        Returns:</span>
</span><span id="IntervalTier-616"><a href="#IntervalTier-616"><span class="linenos">616</span></a><span class="sd">            IntervalTier: the modified version of the current tier</span>
</span><span id="IntervalTier-617"><a href="#IntervalTier-617"><span class="linenos">617</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier-618"><a href="#IntervalTier-618"><span class="linenos">618</span></a>        <span class="n">retEntryList</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="IntervalTier-619"><a href="#IntervalTier-619"><span class="linenos">619</span></a>        <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">tier</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="IntervalTier-620"><a href="#IntervalTier-620"><span class="linenos">620</span></a>            <span class="n">subTier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span>
</span><span id="IntervalTier-621"><a href="#IntervalTier-621"><span class="linenos">621</span></a>                <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">CropCollision</span><span class="o">.</span><span class="n">TRUNCATED</span><span class="p">,</span> <span class="kc">False</span>
</span><span id="IntervalTier-622"><a href="#IntervalTier-622"><span class="linenos">622</span></a>            <span class="p">)</span>
</span><span id="IntervalTier-623"><a href="#IntervalTier-623"><span class="linenos">623</span></a>
</span><span id="IntervalTier-624"><a href="#IntervalTier-624"><span class="linenos">624</span></a>            <span class="c1"># Combine the labels in the two tiers</span>
</span><span id="IntervalTier-625"><a href="#IntervalTier-625"><span class="linenos">625</span></a>            <span class="n">subEntryList</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="IntervalTier-626"><a href="#IntervalTier-626"><span class="linenos">626</span></a>                <span class="p">(</span>
</span><span id="IntervalTier-627"><a href="#IntervalTier-627"><span class="linenos">627</span></a>                    <span class="n">subInterval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span>
</span><span id="IntervalTier-628"><a href="#IntervalTier-628"><span class="linenos">628</span></a>                    <span class="n">subInterval</span><span class="o">.</span><span class="n">end</span><span class="p">,</span>
</span><span id="IntervalTier-629"><a href="#IntervalTier-629"><span class="linenos">629</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">subInterval</span><span class="o">.</span><span class="n">label</span><span class="si">}{</span><span class="n">demarcator</span><span class="si">}{</span><span class="n">interval</span><span class="o">.</span><span class="n">label</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="IntervalTier-630"><a href="#IntervalTier-630"><span class="linenos">630</span></a>                <span class="p">)</span>
</span><span id="IntervalTier-631"><a href="#IntervalTier-631"><span class="linenos">631</span></a>                <span class="k">for</span> <span class="n">subInterval</span> <span class="ow">in</span> <span class="n">subTier</span><span class="o">.</span><span class="n">entries</span>
</span><span id="IntervalTier-632"><a href="#IntervalTier-632"><span class="linenos">632</span></a>            <span class="p">]</span>
</span><span id="IntervalTier-633"><a href="#IntervalTier-633"><span class="linenos">633</span></a>
</span><span id="IntervalTier-634"><a href="#IntervalTier-634"><span class="linenos">634</span></a>            <span class="n">retEntryList</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">subEntryList</span><span class="p">)</span>
</span><span id="IntervalTier-635"><a href="#IntervalTier-635"><span class="linenos">635</span></a>
</span><span id="IntervalTier-636"><a href="#IntervalTier-636"><span class="linenos">636</span></a>        <span class="n">newName</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">tier</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="IntervalTier-637"><a href="#IntervalTier-637"><span class="linenos">637</span></a>
</span><span id="IntervalTier-638"><a href="#IntervalTier-638"><span class="linenos">638</span></a>        <span class="n">retTier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">newName</span><span class="p">,</span> <span class="n">retEntryList</span><span class="p">)</span>
</span><span id="IntervalTier-639"><a href="#IntervalTier-639"><span class="linenos">639</span></a>
</span><span id="IntervalTier-640"><a href="#IntervalTier-640"><span class="linenos">640</span></a>        <span class="k">return</span> <span class="n">retTier</span>
</span><span id="IntervalTier-641"><a href="#IntervalTier-641"><span class="linenos">641</span></a>
</span><span id="IntervalTier-642"><a href="#IntervalTier-642"><span class="linenos">642</span></a>    <span class="k">def</span> <span class="nf">mergeLabels</span><span class="p">(</span>
</span><span id="IntervalTier-643"><a href="#IntervalTier-643"><span class="linenos">643</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">tier</span><span class="p">:</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">,</span> <span class="n">demarcator</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span>
</span><span id="IntervalTier-644"><a href="#IntervalTier-644"><span class="linenos">644</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">:</span>
</span><span id="IntervalTier-645"><a href="#IntervalTier-645"><span class="linenos">645</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Merges labels of overlapping tiers into this tier</span>
</span><span id="IntervalTier-646"><a href="#IntervalTier-646"><span class="linenos">646</span></a>
</span><span id="IntervalTier-647"><a href="#IntervalTier-647"><span class="linenos">647</span></a><span class="sd">        - All intervals in this tier will appear in the output; for the given tier, only intervals</span>
</span><span id="IntervalTier-648"><a href="#IntervalTier-648"><span class="linenos">648</span></a><span class="sd">          that overlap with content in this tier will appear in the output</span>
</span><span id="IntervalTier-649"><a href="#IntervalTier-649"><span class="linenos">649</span></a><span class="sd">          e.g. [(1, 2, &#39;foo&#39;), (3, 4, &#39;bar&#39;)] and [(1, 2, &#39;bang&#39;), (2, 3, &#39;wizz&#39;)]</span>
</span><span id="IntervalTier-650"><a href="#IntervalTier-650"><span class="linenos">650</span></a><span class="sd">                -&gt; [(1, 2, &#39;foo(bang)&#39;), (3, 4, &#39;bar()&#39;)]</span>
</span><span id="IntervalTier-651"><a href="#IntervalTier-651"><span class="linenos">651</span></a><span class="sd">        - If multiple entries exist in a subinterval, their labels will be concatenated</span>
</span><span id="IntervalTier-652"><a href="#IntervalTier-652"><span class="linenos">652</span></a><span class="sd">          e.g. [(1, 2, &#39;hi&#39;)] and [(1, 1.5, &#39;h&#39;), (1.5, 2, &#39;ai&#39;)] -&gt; [(1, 2, &#39;hi(h,ai)&#39;)]</span>
</span><span id="IntervalTier-653"><a href="#IntervalTier-653"><span class="linenos">653</span></a>
</span><span id="IntervalTier-654"><a href="#IntervalTier-654"><span class="linenos">654</span></a><span class="sd">        compare with IntervalTier.intersection</span>
</span><span id="IntervalTier-655"><a href="#IntervalTier-655"><span class="linenos">655</span></a>
</span><span id="IntervalTier-656"><a href="#IntervalTier-656"><span class="linenos">656</span></a><span class="sd">        Args:</span>
</span><span id="IntervalTier-657"><a href="#IntervalTier-657"><span class="linenos">657</span></a><span class="sd">            tier: the tier to intersect with</span>
</span><span id="IntervalTier-658"><a href="#IntervalTier-658"><span class="linenos">658</span></a><span class="sd">            demarcator: the string to separate items that fall in the same subinterval</span>
</span><span id="IntervalTier-659"><a href="#IntervalTier-659"><span class="linenos">659</span></a>
</span><span id="IntervalTier-660"><a href="#IntervalTier-660"><span class="linenos">660</span></a><span class="sd">        Returns:</span>
</span><span id="IntervalTier-661"><a href="#IntervalTier-661"><span class="linenos">661</span></a><span class="sd">            IntervalTier: the modified version of the current tier</span>
</span><span id="IntervalTier-662"><a href="#IntervalTier-662"><span class="linenos">662</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier-663"><a href="#IntervalTier-663"><span class="linenos">663</span></a>        <span class="n">retEntryList</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="IntervalTier-664"><a href="#IntervalTier-664"><span class="linenos">664</span></a>        <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="IntervalTier-665"><a href="#IntervalTier-665"><span class="linenos">665</span></a>            <span class="n">subTier</span> <span class="o">=</span> <span class="n">tier</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span>
</span><span id="IntervalTier-666"><a href="#IntervalTier-666"><span class="linenos">666</span></a>                <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">CropCollision</span><span class="o">.</span><span class="n">TRUNCATED</span><span class="p">,</span> <span class="kc">False</span>
</span><span id="IntervalTier-667"><a href="#IntervalTier-667"><span class="linenos">667</span></a>            <span class="p">)</span>
</span><span id="IntervalTier-668"><a href="#IntervalTier-668"><span class="linenos">668</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">subTier</span><span class="o">.</span><span class="n">_entries</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IntervalTier-669"><a href="#IntervalTier-669"><span class="linenos">669</span></a>                <span class="k">continue</span>
</span><span id="IntervalTier-670"><a href="#IntervalTier-670"><span class="linenos">670</span></a>
</span><span id="IntervalTier-671"><a href="#IntervalTier-671"><span class="linenos">671</span></a>            <span class="n">subLabel</span> <span class="o">=</span> <span class="n">demarcator</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">entry</span><span class="o">.</span><span class="n">label</span> <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">subTier</span><span class="o">.</span><span class="n">entries</span><span class="p">])</span>
</span><span id="IntervalTier-672"><a href="#IntervalTier-672"><span class="linenos">672</span></a>            <span class="n">label</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">interval</span><span class="o">.</span><span class="n">label</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">subLabel</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="IntervalTier-673"><a href="#IntervalTier-673"><span class="linenos">673</span></a>
</span><span id="IntervalTier-674"><a href="#IntervalTier-674"><span class="linenos">674</span></a>            <span class="n">start</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">subTier</span><span class="o">.</span><span class="n">_entries</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
</span><span id="IntervalTier-675"><a href="#IntervalTier-675"><span class="linenos">675</span></a>            <span class="n">end</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">subTier</span><span class="o">.</span><span class="n">_entries</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
</span><span id="IntervalTier-676"><a href="#IntervalTier-676"><span class="linenos">676</span></a>
</span><span id="IntervalTier-677"><a href="#IntervalTier-677"><span class="linenos">677</span></a>            <span class="n">intersectedInterval</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="IntervalTier-678"><a href="#IntervalTier-678"><span class="linenos">678</span></a>                <span class="n">start</span><span class="p">,</span>
</span><span id="IntervalTier-679"><a href="#IntervalTier-679"><span class="linenos">679</span></a>                <span class="n">end</span><span class="p">,</span>
</span><span id="IntervalTier-680"><a href="#IntervalTier-680"><span class="linenos">680</span></a>                <span class="n">label</span><span class="p">,</span>
</span><span id="IntervalTier-681"><a href="#IntervalTier-681"><span class="linenos">681</span></a>            <span class="p">)</span>
</span><span id="IntervalTier-682"><a href="#IntervalTier-682"><span class="linenos">682</span></a>
</span><span id="IntervalTier-683"><a href="#IntervalTier-683"><span class="linenos">683</span></a>            <span class="n">retEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">intersectedInterval</span><span class="p">)</span>
</span><span id="IntervalTier-684"><a href="#IntervalTier-684"><span class="linenos">684</span></a>
</span><span id="IntervalTier-685"><a href="#IntervalTier-685"><span class="linenos">685</span></a>        <span class="n">newName</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">tier</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="IntervalTier-686"><a href="#IntervalTier-686"><span class="linenos">686</span></a>
</span><span id="IntervalTier-687"><a href="#IntervalTier-687"><span class="linenos">687</span></a>        <span class="n">retTier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">newName</span><span class="p">,</span> <span class="n">retEntryList</span><span class="p">)</span>
</span><span id="IntervalTier-688"><a href="#IntervalTier-688"><span class="linenos">688</span></a>
</span><span id="IntervalTier-689"><a href="#IntervalTier-689"><span class="linenos">689</span></a>        <span class="k">return</span> <span class="n">retTier</span>
</span><span id="IntervalTier-690"><a href="#IntervalTier-690"><span class="linenos">690</span></a>
</span><span id="IntervalTier-691"><a href="#IntervalTier-691"><span class="linenos">691</span></a>    <span class="k">def</span> <span class="nf">morph</span><span class="p">(</span>
</span><span id="IntervalTier-692"><a href="#IntervalTier-692"><span class="linenos">692</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="IntervalTier-693"><a href="#IntervalTier-693"><span class="linenos">693</span></a>        <span class="n">targetTier</span><span class="p">:</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">,</span>
</span><span id="IntervalTier-694"><a href="#IntervalTier-694"><span class="linenos">694</span></a>        <span class="n">filterFunc</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="IntervalTier-695"><a href="#IntervalTier-695"><span class="linenos">695</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">:</span>
</span><span id="IntervalTier-696"><a href="#IntervalTier-696"><span class="linenos">696</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Morphs the duration of segments in this tier to those in another</span>
</span><span id="IntervalTier-697"><a href="#IntervalTier-697"><span class="linenos">697</span></a>
</span><span id="IntervalTier-698"><a href="#IntervalTier-698"><span class="linenos">698</span></a><span class="sd">        This preserves the labels and the duration of silence in</span>
</span><span id="IntervalTier-699"><a href="#IntervalTier-699"><span class="linenos">699</span></a><span class="sd">        this tier while changing the duration of labeled segments.</span>
</span><span id="IntervalTier-700"><a href="#IntervalTier-700"><span class="linenos">700</span></a>
</span><span id="IntervalTier-701"><a href="#IntervalTier-701"><span class="linenos">701</span></a><span class="sd">        Args:</span>
</span><span id="IntervalTier-702"><a href="#IntervalTier-702"><span class="linenos">702</span></a><span class="sd">            targetTier:</span>
</span><span id="IntervalTier-703"><a href="#IntervalTier-703"><span class="linenos">703</span></a><span class="sd">            filterFunc: if specified, filters entries. The</span>
</span><span id="IntervalTier-704"><a href="#IntervalTier-704"><span class="linenos">704</span></a><span class="sd">                functor takes one argument, an Interval. It returns true</span>
</span><span id="IntervalTier-705"><a href="#IntervalTier-705"><span class="linenos">705</span></a><span class="sd">                if the Interval should be modified and false if not.</span>
</span><span id="IntervalTier-706"><a href="#IntervalTier-706"><span class="linenos">706</span></a>
</span><span id="IntervalTier-707"><a href="#IntervalTier-707"><span class="linenos">707</span></a><span class="sd">        Returns:</span>
</span><span id="IntervalTier-708"><a href="#IntervalTier-708"><span class="linenos">708</span></a><span class="sd">            The modified version of the current tier</span>
</span><span id="IntervalTier-709"><a href="#IntervalTier-709"><span class="linenos">709</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier-710"><a href="#IntervalTier-710"><span class="linenos">710</span></a>        <span class="n">cumulativeAdjustAmount</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="IntervalTier-711"><a href="#IntervalTier-711"><span class="linenos">711</span></a>        <span class="n">newEntryList</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="IntervalTier-712"><a href="#IntervalTier-712"><span class="linenos">712</span></a>        <span class="n">allIntervals</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">,</span> <span class="n">targetTier</span><span class="o">.</span><span class="n">entries</span><span class="p">]</span>
</span><span id="IntervalTier-713"><a href="#IntervalTier-713"><span class="linenos">713</span></a>        <span class="k">for</span> <span class="n">sourceInterval</span><span class="p">,</span> <span class="n">targetInterval</span> <span class="ow">in</span> <span class="n">utils</span><span class="o">.</span><span class="n">safeZip</span><span class="p">(</span><span class="n">allIntervals</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>
</span><span id="IntervalTier-714"><a href="#IntervalTier-714"><span class="linenos">714</span></a>            <span class="c1"># sourceInterval.start - lastFromEnd -&gt; was this interval and the</span>
</span><span id="IntervalTier-715"><a href="#IntervalTier-715"><span class="linenos">715</span></a>            <span class="c1"># last one adjacent?</span>
</span><span id="IntervalTier-716"><a href="#IntervalTier-716"><span class="linenos">716</span></a>            <span class="n">newStart</span> <span class="o">=</span> <span class="n">sourceInterval</span><span class="o">.</span><span class="n">start</span> <span class="o">+</span> <span class="n">cumulativeAdjustAmount</span>
</span><span id="IntervalTier-717"><a href="#IntervalTier-717"><span class="linenos">717</span></a>
</span><span id="IntervalTier-718"><a href="#IntervalTier-718"><span class="linenos">718</span></a>            <span class="n">currIntervalDuration</span> <span class="o">=</span> <span class="n">sourceInterval</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">sourceInterval</span><span class="o">.</span><span class="n">start</span>
</span><span id="IntervalTier-719"><a href="#IntervalTier-719"><span class="linenos">719</span></a>            <span class="k">if</span> <span class="n">filterFunc</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">filterFunc</span><span class="p">(</span><span class="n">sourceInterval</span><span class="o">.</span><span class="n">label</span><span class="p">):</span>
</span><span id="IntervalTier-720"><a href="#IntervalTier-720"><span class="linenos">720</span></a>                <span class="n">newIntervalDuration</span> <span class="o">=</span> <span class="n">targetInterval</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">targetInterval</span><span class="o">.</span><span class="n">start</span>
</span><span id="IntervalTier-721"><a href="#IntervalTier-721"><span class="linenos">721</span></a>                <span class="n">cumulativeAdjustAmount</span> <span class="o">+=</span> <span class="n">newIntervalDuration</span> <span class="o">-</span> <span class="n">currIntervalDuration</span>
</span><span id="IntervalTier-722"><a href="#IntervalTier-722"><span class="linenos">722</span></a>                <span class="n">newEnd</span> <span class="o">=</span> <span class="n">newStart</span> <span class="o">+</span> <span class="n">newIntervalDuration</span>
</span><span id="IntervalTier-723"><a href="#IntervalTier-723"><span class="linenos">723</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="IntervalTier-724"><a href="#IntervalTier-724"><span class="linenos">724</span></a>                <span class="n">newEnd</span> <span class="o">=</span> <span class="n">newStart</span> <span class="o">+</span> <span class="n">currIntervalDuration</span>
</span><span id="IntervalTier-725"><a href="#IntervalTier-725"><span class="linenos">725</span></a>
</span><span id="IntervalTier-726"><a href="#IntervalTier-726"><span class="linenos">726</span></a>            <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Interval</span><span class="p">(</span><span class="n">newStart</span><span class="p">,</span> <span class="n">newEnd</span><span class="p">,</span> <span class="n">sourceInterval</span><span class="o">.</span><span class="n">label</span><span class="p">))</span>
</span><span id="IntervalTier-727"><a href="#IntervalTier-727"><span class="linenos">727</span></a>
</span><span id="IntervalTier-728"><a href="#IntervalTier-728"><span class="linenos">728</span></a>        <span class="n">newMin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">minTimestamp</span>
</span><span id="IntervalTier-729"><a href="#IntervalTier-729"><span class="linenos">729</span></a>        <span class="n">cumulativeDifference</span> <span class="o">=</span> <span class="n">newEntryList</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span>
</span><span id="IntervalTier-730"><a href="#IntervalTier-730"><span class="linenos">730</span></a>        <span class="n">newMax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span> <span class="o">+</span> <span class="n">cumulativeDifference</span>
</span><span id="IntervalTier-731"><a href="#IntervalTier-731"><span class="linenos">731</span></a>
</span><span id="IntervalTier-732"><a href="#IntervalTier-732"><span class="linenos">732</span></a>        <span class="k">return</span> <span class="n">IntervalTier</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">newEntryList</span><span class="p">,</span> <span class="n">newMin</span><span class="p">,</span> <span class="n">newMax</span><span class="p">)</span>
</span><span id="IntervalTier-733"><a href="#IntervalTier-733"><span class="linenos">733</span></a>
</span><span id="IntervalTier-734"><a href="#IntervalTier-734"><span class="linenos">734</span></a>    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span>
</span><span id="IntervalTier-735"><a href="#IntervalTier-735"><span class="linenos">735</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">reportingMode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;silence&quot;</span><span class="p">,</span> <span class="s2">&quot;warning&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;warning&quot;</span>
</span><span id="IntervalTier-736"><a href="#IntervalTier-736"><span class="linenos">736</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="IntervalTier-737"><a href="#IntervalTier-737"><span class="linenos">737</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate this tier</span>
</span><span id="IntervalTier-738"><a href="#IntervalTier-738"><span class="linenos">738</span></a>
</span><span id="IntervalTier-739"><a href="#IntervalTier-739"><span class="linenos">739</span></a><span class="sd">        Args:</span>
</span><span id="IntervalTier-740"><a href="#IntervalTier-740"><span class="linenos">740</span></a><span class="sd">            reportingMode (str): Determines the behavior if validation fails.</span>
</span><span id="IntervalTier-741"><a href="#IntervalTier-741"><span class="linenos">741</span></a>
</span><span id="IntervalTier-742"><a href="#IntervalTier-742"><span class="linenos">742</span></a><span class="sd">        Returns:</span>
</span><span id="IntervalTier-743"><a href="#IntervalTier-743"><span class="linenos">743</span></a><span class="sd">            True if the tier is valid; False if not</span>
</span><span id="IntervalTier-744"><a href="#IntervalTier-744"><span class="linenos">744</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier-745"><a href="#IntervalTier-745"><span class="linenos">745</span></a>        <span class="n">utils</span><span class="o">.</span><span class="n">validateOption</span><span class="p">(</span>
</span><span id="IntervalTier-746"><a href="#IntervalTier-746"><span class="linenos">746</span></a>            <span class="s2">&quot;reportingMode&quot;</span><span class="p">,</span> <span class="n">reportingMode</span><span class="p">,</span> <span class="n">constants</span><span class="o">.</span><span class="n">ErrorReportingMode</span>
</span><span id="IntervalTier-747"><a href="#IntervalTier-747"><span class="linenos">747</span></a>        <span class="p">)</span>
</span><span id="IntervalTier-748"><a href="#IntervalTier-748"><span class="linenos">748</span></a>        <span class="n">errorReporter</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">getErrorReporter</span><span class="p">(</span><span class="n">reportingMode</span><span class="p">)</span>
</span><span id="IntervalTier-749"><a href="#IntervalTier-749"><span class="linenos">749</span></a>
</span><span id="IntervalTier-750"><a href="#IntervalTier-750"><span class="linenos">750</span></a>        <span class="n">isValid</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="IntervalTier-751"><a href="#IntervalTier-751"><span class="linenos">751</span></a>        <span class="n">previousInterval</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="IntervalTier-752"><a href="#IntervalTier-752"><span class="linenos">752</span></a>        <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="IntervalTier-753"><a href="#IntervalTier-753"><span class="linenos">753</span></a>            <span class="k">if</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span> <span class="o">&gt;=</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="p">:</span>
</span><span id="IntervalTier-754"><a href="#IntervalTier-754"><span class="linenos">754</span></a>                <span class="n">isValid</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="IntervalTier-755"><a href="#IntervalTier-755"><span class="linenos">755</span></a>                <span class="n">errorReporter</span><span class="p">(</span>
</span><span id="IntervalTier-756"><a href="#IntervalTier-756"><span class="linenos">756</span></a>                    <span class="n">errors</span><span class="o">.</span><span class="n">TextgridStateError</span><span class="p">,</span>
</span><span id="IntervalTier-757"><a href="#IntervalTier-757"><span class="linenos">757</span></a>                    <span class="sa">f</span><span class="s2">&quot;Invalid interval. End time occurs before or on the start time(</span><span class="si">{</span><span class="n">interval</span><span class="si">}</span><span class="s2">).&quot;</span><span class="p">,</span>
</span><span id="IntervalTier-758"><a href="#IntervalTier-758"><span class="linenos">758</span></a>                <span class="p">)</span>
</span><span id="IntervalTier-759"><a href="#IntervalTier-759"><span class="linenos">759</span></a>
</span><span id="IntervalTier-760"><a href="#IntervalTier-760"><span class="linenos">760</span></a>            <span class="k">if</span> <span class="n">previousInterval</span> <span class="ow">and</span> <span class="n">previousInterval</span><span class="o">.</span><span class="n">end</span> <span class="o">&gt;</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">:</span>
</span><span id="IntervalTier-761"><a href="#IntervalTier-761"><span class="linenos">761</span></a>                <span class="n">isValid</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="IntervalTier-762"><a href="#IntervalTier-762"><span class="linenos">762</span></a>                <span class="n">errorReporter</span><span class="p">(</span>
</span><span id="IntervalTier-763"><a href="#IntervalTier-763"><span class="linenos">763</span></a>                    <span class="n">errors</span><span class="o">.</span><span class="n">TextgridStateError</span><span class="p">,</span>
</span><span id="IntervalTier-764"><a href="#IntervalTier-764"><span class="linenos">764</span></a>                    <span class="sa">f</span><span class="s2">&quot;Intervals are not sorted in time: &quot;</span>
</span><span id="IntervalTier-765"><a href="#IntervalTier-765"><span class="linenos">765</span></a>                    <span class="sa">f</span><span class="s2">&quot;[(</span><span class="si">{</span><span class="n">previousInterval</span><span class="si">}</span><span class="s2">), (</span><span class="si">{</span><span class="n">interval</span><span class="si">}</span><span class="s2">)]&quot;</span><span class="p">,</span>
</span><span id="IntervalTier-766"><a href="#IntervalTier-766"><span class="linenos">766</span></a>                <span class="p">)</span>
</span><span id="IntervalTier-767"><a href="#IntervalTier-767"><span class="linenos">767</span></a>
</span><span id="IntervalTier-768"><a href="#IntervalTier-768"><span class="linenos">768</span></a>            <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">checkIsUndershoot</span><span class="p">(</span>
</span><span id="IntervalTier-769"><a href="#IntervalTier-769"><span class="linenos">769</span></a>                <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">minTimestamp</span><span class="p">,</span> <span class="n">errorReporter</span>
</span><span id="IntervalTier-770"><a href="#IntervalTier-770"><span class="linenos">770</span></a>            <span class="p">):</span>
</span><span id="IntervalTier-771"><a href="#IntervalTier-771"><span class="linenos">771</span></a>                <span class="n">isValid</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="IntervalTier-772"><a href="#IntervalTier-772"><span class="linenos">772</span></a>
</span><span id="IntervalTier-773"><a href="#IntervalTier-773"><span class="linenos">773</span></a>            <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">checkIsOvershoot</span><span class="p">(</span><span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span><span class="p">,</span> <span class="n">errorReporter</span><span class="p">):</span>
</span><span id="IntervalTier-774"><a href="#IntervalTier-774"><span class="linenos">774</span></a>                <span class="n">isValid</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="IntervalTier-775"><a href="#IntervalTier-775"><span class="linenos">775</span></a>
</span><span id="IntervalTier-776"><a href="#IntervalTier-776"><span class="linenos">776</span></a>            <span class="n">previousInterval</span> <span class="o">=</span> <span class="n">interval</span>
</span><span id="IntervalTier-777"><a href="#IntervalTier-777"><span class="linenos">777</span></a>
</span><span id="IntervalTier-778"><a href="#IntervalTier-778"><span class="linenos">778</span></a>        <span class="k">return</span> <span class="n">isValid</span>
</span></pre></div>


            <div class="docstring"><p>Helper class that provides a standard way to create an ABC using
inheritance.</p>
</div>


                            <div id="IntervalTier.__init__" class="classattr">
                                        <input id="IntervalTier.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">IntervalTier</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">entries</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n"><a href="../utilities/constants.html#Interval">praatio.utilities.constants.Interval</a></span><span class="p">]</span>,</span><span class="param">	<span class="n">minT</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">maxT</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="IntervalTier.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntervalTier.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntervalTier.__init__-62"><a href="#IntervalTier.__init__-62"><span class="linenos">62</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="IntervalTier.__init__-63"><a href="#IntervalTier.__init__-63"><span class="linenos">63</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="IntervalTier.__init__-64"><a href="#IntervalTier.__init__-64"><span class="linenos">64</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="IntervalTier.__init__-65"><a href="#IntervalTier.__init__-65"><span class="linenos">65</span></a>        <span class="n">entries</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Interval</span><span class="p">],</span>
</span><span id="IntervalTier.__init__-66"><a href="#IntervalTier.__init__-66"><span class="linenos">66</span></a>        <span class="n">minT</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="IntervalTier.__init__-67"><a href="#IntervalTier.__init__-67"><span class="linenos">67</span></a>        <span class="n">maxT</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="IntervalTier.__init__-68"><a href="#IntervalTier.__init__-68"><span class="linenos">68</span></a>    <span class="p">):</span>
</span><span id="IntervalTier.__init__-69"><a href="#IntervalTier.__init__-69"><span class="linenos">69</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;An interval tier is for annotating events that have duration</span>
</span><span id="IntervalTier.__init__-70"><a href="#IntervalTier.__init__-70"><span class="linenos">70</span></a>
</span><span id="IntervalTier.__init__-71"><a href="#IntervalTier.__init__-71"><span class="linenos">71</span></a><span class="sd">        The entries is of the form:</span>
</span><span id="IntervalTier.__init__-72"><a href="#IntervalTier.__init__-72"><span class="linenos">72</span></a><span class="sd">        [(startTime1, endTime1, label1), (startTime2, endTime2, label2), ]</span>
</span><span id="IntervalTier.__init__-73"><a href="#IntervalTier.__init__-73"><span class="linenos">73</span></a>
</span><span id="IntervalTier.__init__-74"><a href="#IntervalTier.__init__-74"><span class="linenos">74</span></a><span class="sd">        The data stored in the labels can be anything but will</span>
</span><span id="IntervalTier.__init__-75"><a href="#IntervalTier.__init__-75"><span class="linenos">75</span></a><span class="sd">        be interpreted as text by praatio (the label could be descriptive</span>
</span><span id="IntervalTier.__init__-76"><a href="#IntervalTier.__init__-76"><span class="linenos">76</span></a><span class="sd">        text e.g. (&#39;erase this region&#39;) or numerical data e.g. (average pitch</span>
</span><span id="IntervalTier.__init__-77"><a href="#IntervalTier.__init__-77"><span class="linenos">77</span></a><span class="sd">        values like &#39;132&#39;))</span>
</span><span id="IntervalTier.__init__-78"><a href="#IntervalTier.__init__-78"><span class="linenos">78</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier.__init__-79"><a href="#IntervalTier.__init__-79"><span class="linenos">79</span></a>        <span class="n">entries</span> <span class="o">=</span> <span class="n">_homogenizeEntries</span><span class="p">(</span><span class="n">entries</span><span class="p">)</span>
</span><span id="IntervalTier.__init__-80"><a href="#IntervalTier.__init__-80"><span class="linenos">80</span></a>        <span class="n">calculatedMinT</span><span class="p">,</span> <span class="n">calculatedMaxT</span> <span class="o">=</span> <span class="n">_calculateMinAndMaxTime</span><span class="p">(</span><span class="n">entries</span><span class="p">,</span> <span class="n">minT</span><span class="p">,</span> <span class="n">maxT</span><span class="p">)</span>
</span><span id="IntervalTier.__init__-81"><a href="#IntervalTier.__init__-81"><span class="linenos">81</span></a>
</span><span id="IntervalTier.__init__-82"><a href="#IntervalTier.__init__-82"><span class="linenos">82</span></a>        <span class="nb">super</span><span class="p">(</span><span class="n">IntervalTier</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="IntervalTier.__init__-83"><a href="#IntervalTier.__init__-83"><span class="linenos">83</span></a>            <span class="n">name</span><span class="p">,</span> <span class="n">entries</span><span class="p">,</span> <span class="n">calculatedMinT</span><span class="p">,</span> <span class="n">calculatedMaxT</span>
</span><span id="IntervalTier.__init__-84"><a href="#IntervalTier.__init__-84"><span class="linenos">84</span></a>        <span class="p">)</span>
</span><span id="IntervalTier.__init__-85"><a href="#IntervalTier.__init__-85"><span class="linenos">85</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>An interval tier is for annotating events that have duration</p>

<p>The entries is of the form:
[(startTime1, endTime1, label1), (startTime2, endTime2, label2), ]</p>

<p>The data stored in the labels can be anything but will
be interpreted as text by praatio (the label could be descriptive
text e.g. ('erase this region') or numerical data e.g. (average pitch
values like '132'))</p>
</div>


                            </div>
                            <div id="IntervalTier.tierType" class="classattr">
                                <div class="attr variable">
            <span class="name">tierType</span>        =
<span class="default_value">&#39;IntervalTier&#39;</span>

        
    </div>
    <a class="headerlink" href="#IntervalTier.tierType"></a>
    
    

                            </div>
                            <div id="IntervalTier.entryType" class="classattr">
                                <div class="attr variable">
            <span class="name">entryType</span>        =
<span class="default_value">&lt;class &#39;<a href="../utilities/constants.html#Interval">praatio.utilities.constants.Interval</a>&#39;&gt;</span>

        
    </div>
    <a class="headerlink" href="#IntervalTier.entryType"></a>
    
    

                            </div>
                            <div id="IntervalTier.timestamps" class="classattr">
                                <div class="attr variable">
            <span class="name">timestamps</span><span class="annotation">: List[float]</span>

        
    </div>
    <a class="headerlink" href="#IntervalTier.timestamps"></a>
    
            <div class="docstring"><p>All unique timestamps used in this tier</p>
</div>


                            </div>
                            <div id="IntervalTier.crop" class="classattr">
                                        <input id="IntervalTier.crop-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">crop</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">cropStart</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">cropEnd</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">mode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;strict&#39;</span><span class="p">,</span> <span class="s1">&#39;lax&#39;</span><span class="p">,</span> <span class="s1">&#39;truncated&#39;</span><span class="p">]</span>,</span><span class="param">	<span class="n">rebaseToZero</span><span class="p">:</span> <span class="nb">bool</span></span><span class="return-annotation">) -> <span class="n"><a href="#IntervalTier">IntervalTier</a></span>:</span></span>

                <label class="view-source-button" for="IntervalTier.crop-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntervalTier.crop"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntervalTier.crop-121"><a href="#IntervalTier.crop-121"><span class="linenos">121</span></a>    <span class="k">def</span> <span class="nf">crop</span><span class="p">(</span>
</span><span id="IntervalTier.crop-122"><a href="#IntervalTier.crop-122"><span class="linenos">122</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="IntervalTier.crop-123"><a href="#IntervalTier.crop-123"><span class="linenos">123</span></a>        <span class="n">cropStart</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="IntervalTier.crop-124"><a href="#IntervalTier.crop-124"><span class="linenos">124</span></a>        <span class="n">cropEnd</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="IntervalTier.crop-125"><a href="#IntervalTier.crop-125"><span class="linenos">125</span></a>        <span class="n">mode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;strict&quot;</span><span class="p">,</span> <span class="s2">&quot;lax&quot;</span><span class="p">,</span> <span class="s2">&quot;truncated&quot;</span><span class="p">],</span>
</span><span id="IntervalTier.crop-126"><a href="#IntervalTier.crop-126"><span class="linenos">126</span></a>        <span class="n">rebaseToZero</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="IntervalTier.crop-127"><a href="#IntervalTier.crop-127"><span class="linenos">127</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">:</span>
</span><span id="IntervalTier.crop-128"><a href="#IntervalTier.crop-128"><span class="linenos">128</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a new tier with all entries that fit inside the new interval</span>
</span><span id="IntervalTier.crop-129"><a href="#IntervalTier.crop-129"><span class="linenos">129</span></a>
</span><span id="IntervalTier.crop-130"><a href="#IntervalTier.crop-130"><span class="linenos">130</span></a><span class="sd">        Args:</span>
</span><span id="IntervalTier.crop-131"><a href="#IntervalTier.crop-131"><span class="linenos">131</span></a><span class="sd">            cropStart:</span>
</span><span id="IntervalTier.crop-132"><a href="#IntervalTier.crop-132"><span class="linenos">132</span></a><span class="sd">            cropEnd:</span>
</span><span id="IntervalTier.crop-133"><a href="#IntervalTier.crop-133"><span class="linenos">133</span></a><span class="sd">            mode: determines cropping behavior</span>
</span><span id="IntervalTier.crop-134"><a href="#IntervalTier.crop-134"><span class="linenos">134</span></a><span class="sd">                - &#39;strict&#39;, only intervals wholly contained by the crop</span>
</span><span id="IntervalTier.crop-135"><a href="#IntervalTier.crop-135"><span class="linenos">135</span></a><span class="sd">                    interval will be kept</span>
</span><span id="IntervalTier.crop-136"><a href="#IntervalTier.crop-136"><span class="linenos">136</span></a><span class="sd">                - &#39;lax&#39;, partially contained intervals will be kept</span>
</span><span id="IntervalTier.crop-137"><a href="#IntervalTier.crop-137"><span class="linenos">137</span></a><span class="sd">                - &#39;truncated&#39;, partially contained intervals will be</span>
</span><span id="IntervalTier.crop-138"><a href="#IntervalTier.crop-138"><span class="linenos">138</span></a><span class="sd">                    truncated to fit within the crop region.</span>
</span><span id="IntervalTier.crop-139"><a href="#IntervalTier.crop-139"><span class="linenos">139</span></a><span class="sd">            rebaseToZero: if True, the cropped textgrid values</span>
</span><span id="IntervalTier.crop-140"><a href="#IntervalTier.crop-140"><span class="linenos">140</span></a><span class="sd">                will be subtracted by the cropStart</span>
</span><span id="IntervalTier.crop-141"><a href="#IntervalTier.crop-141"><span class="linenos">141</span></a>
</span><span id="IntervalTier.crop-142"><a href="#IntervalTier.crop-142"><span class="linenos">142</span></a><span class="sd">        Returns:</span>
</span><span id="IntervalTier.crop-143"><a href="#IntervalTier.crop-143"><span class="linenos">143</span></a><span class="sd">            the modified version of the current tier</span>
</span><span id="IntervalTier.crop-144"><a href="#IntervalTier.crop-144"><span class="linenos">144</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier.crop-145"><a href="#IntervalTier.crop-145"><span class="linenos">145</span></a>
</span><span id="IntervalTier.crop-146"><a href="#IntervalTier.crop-146"><span class="linenos">146</span></a>        <span class="n">utils</span><span class="o">.</span><span class="n">validateOption</span><span class="p">(</span><span class="s2">&quot;mode&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">CropCollision</span><span class="p">)</span>
</span><span id="IntervalTier.crop-147"><a href="#IntervalTier.crop-147"><span class="linenos">147</span></a>
</span><span id="IntervalTier.crop-148"><a href="#IntervalTier.crop-148"><span class="linenos">148</span></a>        <span class="k">if</span> <span class="n">cropStart</span> <span class="o">&gt;=</span> <span class="n">cropEnd</span><span class="p">:</span>
</span><span id="IntervalTier.crop-149"><a href="#IntervalTier.crop-149"><span class="linenos">149</span></a>            <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">ArgumentError</span><span class="p">(</span>
</span><span id="IntervalTier.crop-150"><a href="#IntervalTier.crop-150"><span class="linenos">150</span></a>                <span class="sa">f</span><span class="s2">&quot;Crop error: start time (</span><span class="si">{</span><span class="n">cropStart</span><span class="si">}</span><span class="s2">) must occur before end time (</span><span class="si">{</span><span class="n">cropEnd</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="IntervalTier.crop-151"><a href="#IntervalTier.crop-151"><span class="linenos">151</span></a>            <span class="p">)</span>
</span><span id="IntervalTier.crop-152"><a href="#IntervalTier.crop-152"><span class="linenos">152</span></a>
</span><span id="IntervalTier.crop-153"><a href="#IntervalTier.crop-153"><span class="linenos">153</span></a>        <span class="n">newEntryList</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">getIntervalsInInterval</span><span class="p">(</span>
</span><span id="IntervalTier.crop-154"><a href="#IntervalTier.crop-154"><span class="linenos">154</span></a>            <span class="n">cropStart</span><span class="p">,</span> <span class="n">cropEnd</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">,</span> <span class="n">mode</span>
</span><span id="IntervalTier.crop-155"><a href="#IntervalTier.crop-155"><span class="linenos">155</span></a>        <span class="p">)</span>
</span><span id="IntervalTier.crop-156"><a href="#IntervalTier.crop-156"><span class="linenos">156</span></a>
</span><span id="IntervalTier.crop-157"><a href="#IntervalTier.crop-157"><span class="linenos">157</span></a>        <span class="k">if</span> <span class="n">rebaseToZero</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="IntervalTier.crop-158"><a href="#IntervalTier.crop-158"><span class="linenos">158</span></a>            <span class="n">newSmallestValue</span> <span class="o">=</span> <span class="n">newEntryList</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="IntervalTier.crop-159"><a href="#IntervalTier.crop-159"><span class="linenos">159</span></a>            <span class="k">if</span> <span class="n">newSmallestValue</span> <span class="o">&lt;</span> <span class="n">cropStart</span><span class="p">:</span>
</span><span id="IntervalTier.crop-160"><a href="#IntervalTier.crop-160"><span class="linenos">160</span></a>                <span class="n">timeDiff</span> <span class="o">=</span> <span class="n">newSmallestValue</span>
</span><span id="IntervalTier.crop-161"><a href="#IntervalTier.crop-161"><span class="linenos">161</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="IntervalTier.crop-162"><a href="#IntervalTier.crop-162"><span class="linenos">162</span></a>                <span class="n">timeDiff</span> <span class="o">=</span> <span class="n">cropStart</span>
</span><span id="IntervalTier.crop-163"><a href="#IntervalTier.crop-163"><span class="linenos">163</span></a>            <span class="n">newEntryList</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="IntervalTier.crop-164"><a href="#IntervalTier.crop-164"><span class="linenos">164</span></a>                <span class="n">Interval</span><span class="p">(</span><span class="n">start</span> <span class="o">-</span> <span class="n">timeDiff</span><span class="p">,</span> <span class="n">end</span> <span class="o">-</span> <span class="n">timeDiff</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span>
</span><span id="IntervalTier.crop-165"><a href="#IntervalTier.crop-165"><span class="linenos">165</span></a>                <span class="k">for</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">newEntryList</span>
</span><span id="IntervalTier.crop-166"><a href="#IntervalTier.crop-166"><span class="linenos">166</span></a>            <span class="p">]</span>
</span><span id="IntervalTier.crop-167"><a href="#IntervalTier.crop-167"><span class="linenos">167</span></a>            <span class="n">minT</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="IntervalTier.crop-168"><a href="#IntervalTier.crop-168"><span class="linenos">168</span></a>            <span class="n">maxT</span> <span class="o">=</span> <span class="n">cropEnd</span> <span class="o">-</span> <span class="n">cropStart</span>
</span><span id="IntervalTier.crop-169"><a href="#IntervalTier.crop-169"><span class="linenos">169</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="IntervalTier.crop-170"><a href="#IntervalTier.crop-170"><span class="linenos">170</span></a>            <span class="n">minT</span> <span class="o">=</span> <span class="n">cropStart</span>
</span><span id="IntervalTier.crop-171"><a href="#IntervalTier.crop-171"><span class="linenos">171</span></a>            <span class="n">maxT</span> <span class="o">=</span> <span class="n">cropEnd</span>
</span><span id="IntervalTier.crop-172"><a href="#IntervalTier.crop-172"><span class="linenos">172</span></a>
</span><span id="IntervalTier.crop-173"><a href="#IntervalTier.crop-173"><span class="linenos">173</span></a>        <span class="n">croppedTier</span> <span class="o">=</span> <span class="n">IntervalTier</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">newEntryList</span><span class="p">,</span> <span class="n">minT</span><span class="p">,</span> <span class="n">maxT</span><span class="p">)</span>
</span><span id="IntervalTier.crop-174"><a href="#IntervalTier.crop-174"><span class="linenos">174</span></a>
</span><span id="IntervalTier.crop-175"><a href="#IntervalTier.crop-175"><span class="linenos">175</span></a>        <span class="k">return</span> <span class="n">croppedTier</span>
</span></pre></div>


            <div class="docstring"><p>Creates a new tier with all entries that fit inside the new interval</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>cropStart:</strong> </li>
<li><strong>cropEnd:</strong> </li>
<li><strong>mode:</strong>  determines cropping behavior
<ul>
<li>'strict', only intervals wholly contained by the crop
interval will be kept</li>
<li>'lax', partially contained intervals will be kept</li>
<li>'truncated', partially contained intervals will be
truncated to fit within the crop region.</li>
</ul></li>
<li><strong>rebaseToZero:</strong>  if True, the cropped textgrid values
will be subtracted by the cropStart</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>the modified version of the current tier</p>
</blockquote>
</div>


                            </div>
                            <div id="IntervalTier.dejitter" class="classattr">
                                        <input id="IntervalTier.dejitter-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">dejitter</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">referenceTier</span><span class="p">:</span> <span class="n"><a href="textgrid_tier.html#TextgridTier">praatio.data_classes.textgrid_tier.TextgridTier</a></span>,</span><span class="param">	<span class="n">maxDifference</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.001</span></span><span class="return-annotation">) -> <span class="n"><a href="textgrid_tier.html#TextgridTier">praatio.data_classes.textgrid_tier.TextgridTier</a></span>:</span></span>

                <label class="view-source-button" for="IntervalTier.dejitter-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntervalTier.dejitter"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntervalTier.dejitter-177"><a href="#IntervalTier.dejitter-177"><span class="linenos">177</span></a>    <span class="k">def</span> <span class="nf">dejitter</span><span class="p">(</span>
</span><span id="IntervalTier.dejitter-178"><a href="#IntervalTier.dejitter-178"><span class="linenos">178</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="IntervalTier.dejitter-179"><a href="#IntervalTier.dejitter-179"><span class="linenos">179</span></a>        <span class="n">referenceTier</span><span class="p">:</span> <span class="n">textgrid_tier</span><span class="o">.</span><span class="n">TextgridTier</span><span class="p">,</span>
</span><span id="IntervalTier.dejitter-180"><a href="#IntervalTier.dejitter-180"><span class="linenos">180</span></a>        <span class="n">maxDifference</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.001</span><span class="p">,</span>
</span><span id="IntervalTier.dejitter-181"><a href="#IntervalTier.dejitter-181"><span class="linenos">181</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">textgrid_tier</span><span class="o">.</span><span class="n">TextgridTier</span><span class="p">:</span>
</span><span id="IntervalTier.dejitter-182"><a href="#IntervalTier.dejitter-182"><span class="linenos">182</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="IntervalTier.dejitter-183"><a href="#IntervalTier.dejitter-183"><span class="linenos">183</span></a><span class="sd">        Set timestamps in this tier to be the same as values in the reference tier</span>
</span><span id="IntervalTier.dejitter-184"><a href="#IntervalTier.dejitter-184"><span class="linenos">184</span></a>
</span><span id="IntervalTier.dejitter-185"><a href="#IntervalTier.dejitter-185"><span class="linenos">185</span></a><span class="sd">        Timestamps will only be moved if they are less than maxDifference away from the</span>
</span><span id="IntervalTier.dejitter-186"><a href="#IntervalTier.dejitter-186"><span class="linenos">186</span></a><span class="sd">        reference time.</span>
</span><span id="IntervalTier.dejitter-187"><a href="#IntervalTier.dejitter-187"><span class="linenos">187</span></a>
</span><span id="IntervalTier.dejitter-188"><a href="#IntervalTier.dejitter-188"><span class="linenos">188</span></a><span class="sd">        This can be used to correct minor alignment errors between tiers, as made when</span>
</span><span id="IntervalTier.dejitter-189"><a href="#IntervalTier.dejitter-189"><span class="linenos">189</span></a><span class="sd">        annotating files manually, etc.</span>
</span><span id="IntervalTier.dejitter-190"><a href="#IntervalTier.dejitter-190"><span class="linenos">190</span></a>
</span><span id="IntervalTier.dejitter-191"><a href="#IntervalTier.dejitter-191"><span class="linenos">191</span></a><span class="sd">        Args:</span>
</span><span id="IntervalTier.dejitter-192"><a href="#IntervalTier.dejitter-192"><span class="linenos">192</span></a><span class="sd">            referenceTier: the IntervalTier or PointTier to use as a reference</span>
</span><span id="IntervalTier.dejitter-193"><a href="#IntervalTier.dejitter-193"><span class="linenos">193</span></a><span class="sd">            maxDifference: the maximum amount to allow timestamps to be moved by</span>
</span><span id="IntervalTier.dejitter-194"><a href="#IntervalTier.dejitter-194"><span class="linenos">194</span></a>
</span><span id="IntervalTier.dejitter-195"><a href="#IntervalTier.dejitter-195"><span class="linenos">195</span></a><span class="sd">        Returns:</span>
</span><span id="IntervalTier.dejitter-196"><a href="#IntervalTier.dejitter-196"><span class="linenos">196</span></a><span class="sd">            the modified version of the current tier</span>
</span><span id="IntervalTier.dejitter-197"><a href="#IntervalTier.dejitter-197"><span class="linenos">197</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier.dejitter-198"><a href="#IntervalTier.dejitter-198"><span class="linenos">198</span></a>        <span class="n">referenceTimestamps</span> <span class="o">=</span> <span class="n">referenceTier</span><span class="o">.</span><span class="n">timestamps</span>
</span><span id="IntervalTier.dejitter-199"><a href="#IntervalTier.dejitter-199"><span class="linenos">199</span></a>
</span><span id="IntervalTier.dejitter-200"><a href="#IntervalTier.dejitter-200"><span class="linenos">200</span></a>        <span class="n">newEntries</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="IntervalTier.dejitter-201"><a href="#IntervalTier.dejitter-201"><span class="linenos">201</span></a>        <span class="k">for</span> <span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="IntervalTier.dejitter-202"><a href="#IntervalTier.dejitter-202"><span class="linenos">202</span></a>            <span class="n">startCompare</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">referenceTimestamps</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">start</span><span class="p">))</span>
</span><span id="IntervalTier.dejitter-203"><a href="#IntervalTier.dejitter-203"><span class="linenos">203</span></a>            <span class="n">stopCompare</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">referenceTimestamps</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">stop</span><span class="p">))</span>
</span><span id="IntervalTier.dejitter-204"><a href="#IntervalTier.dejitter-204"><span class="linenos">204</span></a>
</span><span id="IntervalTier.dejitter-205"><a href="#IntervalTier.dejitter-205"><span class="linenos">205</span></a>            <span class="k">if</span> <span class="n">my_math</span><span class="o">.</span><span class="n">lessThanOrEqual</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">start</span> <span class="o">-</span> <span class="n">startCompare</span><span class="p">),</span> <span class="n">maxDifference</span><span class="p">):</span>
</span><span id="IntervalTier.dejitter-206"><a href="#IntervalTier.dejitter-206"><span class="linenos">206</span></a>                <span class="n">start</span> <span class="o">=</span> <span class="n">startCompare</span>
</span><span id="IntervalTier.dejitter-207"><a href="#IntervalTier.dejitter-207"><span class="linenos">207</span></a>            <span class="k">if</span> <span class="n">my_math</span><span class="o">.</span><span class="n">lessThanOrEqual</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">stop</span> <span class="o">-</span> <span class="n">stopCompare</span><span class="p">),</span> <span class="n">maxDifference</span><span class="p">):</span>
</span><span id="IntervalTier.dejitter-208"><a href="#IntervalTier.dejitter-208"><span class="linenos">208</span></a>                <span class="n">stop</span> <span class="o">=</span> <span class="n">stopCompare</span>
</span><span id="IntervalTier.dejitter-209"><a href="#IntervalTier.dejitter-209"><span class="linenos">209</span></a>            <span class="n">newEntries</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">label</span><span class="p">))</span>
</span><span id="IntervalTier.dejitter-210"><a href="#IntervalTier.dejitter-210"><span class="linenos">210</span></a>
</span><span id="IntervalTier.dejitter-211"><a href="#IntervalTier.dejitter-211"><span class="linenos">211</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">entries</span><span class="o">=</span><span class="n">newEntries</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Set timestamps in this tier to be the same as values in the reference tier</p>

<p>Timestamps will only be moved if they are less than maxDifference away from the
reference time.</p>

<p>This can be used to correct minor alignment errors between tiers, as made when
annotating files manually, etc.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>referenceTier:</strong>  the IntervalTier or PointTier to use as a reference</li>
<li><strong>maxDifference:</strong>  the maximum amount to allow timestamps to be moved by</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>the modified version of the current tier</p>
</blockquote>
</div>


                            </div>
                            <div id="IntervalTier.deleteEntry" class="classattr">
                                        <input id="IntervalTier.deleteEntry-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">deleteEntry</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">entry</span><span class="p">:</span> <span class="n"><a href="../utilities/constants.html#Interval">praatio.utilities.constants.Interval</a></span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="IntervalTier.deleteEntry-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntervalTier.deleteEntry"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntervalTier.deleteEntry-213"><a href="#IntervalTier.deleteEntry-213"><span class="linenos">213</span></a>    <span class="k">def</span> <span class="nf">deleteEntry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entry</span><span class="p">:</span> <span class="n">Interval</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IntervalTier.deleteEntry-214"><a href="#IntervalTier.deleteEntry-214"><span class="linenos">214</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes an entry from the entries&quot;&quot;&quot;</span>
</span><span id="IntervalTier.deleteEntry-215"><a href="#IntervalTier.deleteEntry-215"><span class="linenos">215</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Removes an entry from the entries</p>
</div>


                            </div>
                            <div id="IntervalTier.difference" class="classattr">
                                        <input id="IntervalTier.difference-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">difference</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">tier</span><span class="p">:</span> <span class="n"><a href="#IntervalTier">IntervalTier</a></span></span><span class="return-annotation">) -> <span class="n"><a href="#IntervalTier">IntervalTier</a></span>:</span></span>

                <label class="view-source-button" for="IntervalTier.difference-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntervalTier.difference"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntervalTier.difference-217"><a href="#IntervalTier.difference-217"><span class="linenos">217</span></a>    <span class="k">def</span> <span class="nf">difference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tier</span><span class="p">:</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">:</span>
</span><span id="IntervalTier.difference-218"><a href="#IntervalTier.difference-218"><span class="linenos">218</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Takes the set difference of this tier and the given one</span>
</span><span id="IntervalTier.difference-219"><a href="#IntervalTier.difference-219"><span class="linenos">219</span></a>
</span><span id="IntervalTier.difference-220"><a href="#IntervalTier.difference-220"><span class="linenos">220</span></a><span class="sd">        Any overlapping portions of entries with entries in this textgrid</span>
</span><span id="IntervalTier.difference-221"><a href="#IntervalTier.difference-221"><span class="linenos">221</span></a><span class="sd">        will be removed from the returned tier.</span>
</span><span id="IntervalTier.difference-222"><a href="#IntervalTier.difference-222"><span class="linenos">222</span></a>
</span><span id="IntervalTier.difference-223"><a href="#IntervalTier.difference-223"><span class="linenos">223</span></a><span class="sd">        Args:</span>
</span><span id="IntervalTier.difference-224"><a href="#IntervalTier.difference-224"><span class="linenos">224</span></a><span class="sd">            tier: the tier to subtract from this one</span>
</span><span id="IntervalTier.difference-225"><a href="#IntervalTier.difference-225"><span class="linenos">225</span></a>
</span><span id="IntervalTier.difference-226"><a href="#IntervalTier.difference-226"><span class="linenos">226</span></a><span class="sd">        Returns:</span>
</span><span id="IntervalTier.difference-227"><a href="#IntervalTier.difference-227"><span class="linenos">227</span></a><span class="sd">            the modified version of the current tier</span>
</span><span id="IntervalTier.difference-228"><a href="#IntervalTier.difference-228"><span class="linenos">228</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier.difference-229"><a href="#IntervalTier.difference-229"><span class="linenos">229</span></a>        <span class="n">retTier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
</span><span id="IntervalTier.difference-230"><a href="#IntervalTier.difference-230"><span class="linenos">230</span></a>
</span><span id="IntervalTier.difference-231"><a href="#IntervalTier.difference-231"><span class="linenos">231</span></a>        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">tier</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="IntervalTier.difference-232"><a href="#IntervalTier.difference-232"><span class="linenos">232</span></a>            <span class="n">retTier</span> <span class="o">=</span> <span class="n">retTier</span><span class="o">.</span><span class="n">eraseRegion</span><span class="p">(</span>
</span><span id="IntervalTier.difference-233"><a href="#IntervalTier.difference-233"><span class="linenos">233</span></a>                <span class="n">entry</span><span class="o">.</span><span class="n">start</span><span class="p">,</span>
</span><span id="IntervalTier.difference-234"><a href="#IntervalTier.difference-234"><span class="linenos">234</span></a>                <span class="n">entry</span><span class="o">.</span><span class="n">end</span><span class="p">,</span>
</span><span id="IntervalTier.difference-235"><a href="#IntervalTier.difference-235"><span class="linenos">235</span></a>                <span class="n">collisionMode</span><span class="o">=</span><span class="n">constants</span><span class="o">.</span><span class="n">EraseCollision</span><span class="o">.</span><span class="n">TRUNCATE</span><span class="p">,</span>
</span><span id="IntervalTier.difference-236"><a href="#IntervalTier.difference-236"><span class="linenos">236</span></a>                <span class="n">doShrink</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="IntervalTier.difference-237"><a href="#IntervalTier.difference-237"><span class="linenos">237</span></a>            <span class="p">)</span>
</span><span id="IntervalTier.difference-238"><a href="#IntervalTier.difference-238"><span class="linenos">238</span></a>
</span><span id="IntervalTier.difference-239"><a href="#IntervalTier.difference-239"><span class="linenos">239</span></a>        <span class="k">return</span> <span class="n">retTier</span>
</span></pre></div>


            <div class="docstring"><p>Takes the set difference of this tier and the given one</p>

<p>Any overlapping portions of entries with entries in this textgrid
will be removed from the returned tier.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>tier:</strong>  the tier to subtract from this one</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>the modified version of the current tier</p>
</blockquote>
</div>


                            </div>
                            <div id="IntervalTier.editTimestamps" class="classattr">
                                        <input id="IntervalTier.editTimestamps-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">editTimestamps</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">offset</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">reportingMode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;silence&#39;</span><span class="p">,</span> <span class="s1">&#39;warning&#39;</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;warning&#39;</span></span><span class="return-annotation">) -> <span class="n"><a href="#IntervalTier">IntervalTier</a></span>:</span></span>

                <label class="view-source-button" for="IntervalTier.editTimestamps-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntervalTier.editTimestamps"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntervalTier.editTimestamps-241"><a href="#IntervalTier.editTimestamps-241"><span class="linenos">241</span></a>    <span class="k">def</span> <span class="nf">editTimestamps</span><span class="p">(</span>
</span><span id="IntervalTier.editTimestamps-242"><a href="#IntervalTier.editTimestamps-242"><span class="linenos">242</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="IntervalTier.editTimestamps-243"><a href="#IntervalTier.editTimestamps-243"><span class="linenos">243</span></a>        <span class="n">offset</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="IntervalTier.editTimestamps-244"><a href="#IntervalTier.editTimestamps-244"><span class="linenos">244</span></a>        <span class="n">reportingMode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;silence&quot;</span><span class="p">,</span> <span class="s2">&quot;warning&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;warning&quot;</span><span class="p">,</span>
</span><span id="IntervalTier.editTimestamps-245"><a href="#IntervalTier.editTimestamps-245"><span class="linenos">245</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">:</span>
</span><span id="IntervalTier.editTimestamps-246"><a href="#IntervalTier.editTimestamps-246"><span class="linenos">246</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Modifies all timestamps by a constant amount</span>
</span><span id="IntervalTier.editTimestamps-247"><a href="#IntervalTier.editTimestamps-247"><span class="linenos">247</span></a>
</span><span id="IntervalTier.editTimestamps-248"><a href="#IntervalTier.editTimestamps-248"><span class="linenos">248</span></a><span class="sd">        Args:</span>
</span><span id="IntervalTier.editTimestamps-249"><a href="#IntervalTier.editTimestamps-249"><span class="linenos">249</span></a><span class="sd">            offset: the amount to shift all intervals</span>
</span><span id="IntervalTier.editTimestamps-250"><a href="#IntervalTier.editTimestamps-250"><span class="linenos">250</span></a><span class="sd">            reportingMode: Determines the behavior if an entries moves outside</span>
</span><span id="IntervalTier.editTimestamps-251"><a href="#IntervalTier.editTimestamps-251"><span class="linenos">251</span></a><span class="sd">                of minTimestamp or maxTimestamp after being edited</span>
</span><span id="IntervalTier.editTimestamps-252"><a href="#IntervalTier.editTimestamps-252"><span class="linenos">252</span></a>
</span><span id="IntervalTier.editTimestamps-253"><a href="#IntervalTier.editTimestamps-253"><span class="linenos">253</span></a><span class="sd">        Returns:</span>
</span><span id="IntervalTier.editTimestamps-254"><a href="#IntervalTier.editTimestamps-254"><span class="linenos">254</span></a><span class="sd">            the modified version of the current tier</span>
</span><span id="IntervalTier.editTimestamps-255"><a href="#IntervalTier.editTimestamps-255"><span class="linenos">255</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier.editTimestamps-256"><a href="#IntervalTier.editTimestamps-256"><span class="linenos">256</span></a>        <span class="n">utils</span><span class="o">.</span><span class="n">validateOption</span><span class="p">(</span>
</span><span id="IntervalTier.editTimestamps-257"><a href="#IntervalTier.editTimestamps-257"><span class="linenos">257</span></a>            <span class="s2">&quot;reportingMode&quot;</span><span class="p">,</span> <span class="n">reportingMode</span><span class="p">,</span> <span class="n">constants</span><span class="o">.</span><span class="n">ErrorReportingMode</span>
</span><span id="IntervalTier.editTimestamps-258"><a href="#IntervalTier.editTimestamps-258"><span class="linenos">258</span></a>        <span class="p">)</span>
</span><span id="IntervalTier.editTimestamps-259"><a href="#IntervalTier.editTimestamps-259"><span class="linenos">259</span></a>        <span class="n">errorReporter</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">getErrorReporter</span><span class="p">(</span><span class="n">reportingMode</span><span class="p">)</span>
</span><span id="IntervalTier.editTimestamps-260"><a href="#IntervalTier.editTimestamps-260"><span class="linenos">260</span></a>
</span><span id="IntervalTier.editTimestamps-261"><a href="#IntervalTier.editTimestamps-261"><span class="linenos">261</span></a>        <span class="n">newEntryList</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="IntervalTier.editTimestamps-262"><a href="#IntervalTier.editTimestamps-262"><span class="linenos">262</span></a>        <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="IntervalTier.editTimestamps-263"><a href="#IntervalTier.editTimestamps-263"><span class="linenos">263</span></a>            <span class="n">newStart</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span>
</span><span id="IntervalTier.editTimestamps-264"><a href="#IntervalTier.editTimestamps-264"><span class="linenos">264</span></a>            <span class="n">newEnd</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span>
</span><span id="IntervalTier.editTimestamps-265"><a href="#IntervalTier.editTimestamps-265"><span class="linenos">265</span></a>
</span><span id="IntervalTier.editTimestamps-266"><a href="#IntervalTier.editTimestamps-266"><span class="linenos">266</span></a>            <span class="n">utils</span><span class="o">.</span><span class="n">checkIsUndershoot</span><span class="p">(</span><span class="n">newStart</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">minTimestamp</span><span class="p">,</span> <span class="n">errorReporter</span><span class="p">)</span>
</span><span id="IntervalTier.editTimestamps-267"><a href="#IntervalTier.editTimestamps-267"><span class="linenos">267</span></a>            <span class="n">utils</span><span class="o">.</span><span class="n">checkIsOvershoot</span><span class="p">(</span><span class="n">newEnd</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span><span class="p">,</span> <span class="n">errorReporter</span><span class="p">)</span>
</span><span id="IntervalTier.editTimestamps-268"><a href="#IntervalTier.editTimestamps-268"><span class="linenos">268</span></a>
</span><span id="IntervalTier.editTimestamps-269"><a href="#IntervalTier.editTimestamps-269"><span class="linenos">269</span></a>            <span class="k">if</span> <span class="n">newEnd</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IntervalTier.editTimestamps-270"><a href="#IntervalTier.editTimestamps-270"><span class="linenos">270</span></a>                <span class="k">continue</span>
</span><span id="IntervalTier.editTimestamps-271"><a href="#IntervalTier.editTimestamps-271"><span class="linenos">271</span></a>            <span class="k">if</span> <span class="n">newStart</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IntervalTier.editTimestamps-272"><a href="#IntervalTier.editTimestamps-272"><span class="linenos">272</span></a>                <span class="n">newStart</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="IntervalTier.editTimestamps-273"><a href="#IntervalTier.editTimestamps-273"><span class="linenos">273</span></a>
</span><span id="IntervalTier.editTimestamps-274"><a href="#IntervalTier.editTimestamps-274"><span class="linenos">274</span></a>            <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Interval</span><span class="p">(</span><span class="n">newStart</span><span class="p">,</span> <span class="n">newEnd</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">label</span><span class="p">))</span>
</span><span id="IntervalTier.editTimestamps-275"><a href="#IntervalTier.editTimestamps-275"><span class="linenos">275</span></a>
</span><span id="IntervalTier.editTimestamps-276"><a href="#IntervalTier.editTimestamps-276"><span class="linenos">276</span></a>        <span class="c1"># Determine new min and max timestamps</span>
</span><span id="IntervalTier.editTimestamps-277"><a href="#IntervalTier.editTimestamps-277"><span class="linenos">277</span></a>        <span class="n">newMin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">([</span><span class="n">interval</span><span class="o">.</span><span class="n">start</span> <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">newEntryList</span><span class="p">])</span>
</span><span id="IntervalTier.editTimestamps-278"><a href="#IntervalTier.editTimestamps-278"><span class="linenos">278</span></a>        <span class="n">newMax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="n">interval</span><span class="o">.</span><span class="n">end</span> <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">newEntryList</span><span class="p">])</span>
</span><span id="IntervalTier.editTimestamps-279"><a href="#IntervalTier.editTimestamps-279"><span class="linenos">279</span></a>
</span><span id="IntervalTier.editTimestamps-280"><a href="#IntervalTier.editTimestamps-280"><span class="linenos">280</span></a>        <span class="k">if</span> <span class="n">newMin</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">minTimestamp</span><span class="p">:</span>
</span><span id="IntervalTier.editTimestamps-281"><a href="#IntervalTier.editTimestamps-281"><span class="linenos">281</span></a>            <span class="n">newMin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">minTimestamp</span>
</span><span id="IntervalTier.editTimestamps-282"><a href="#IntervalTier.editTimestamps-282"><span class="linenos">282</span></a>
</span><span id="IntervalTier.editTimestamps-283"><a href="#IntervalTier.editTimestamps-283"><span class="linenos">283</span></a>        <span class="k">if</span> <span class="n">newMax</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span><span class="p">:</span>
</span><span id="IntervalTier.editTimestamps-284"><a href="#IntervalTier.editTimestamps-284"><span class="linenos">284</span></a>            <span class="n">newMax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span>
</span><span id="IntervalTier.editTimestamps-285"><a href="#IntervalTier.editTimestamps-285"><span class="linenos">285</span></a>
</span><span id="IntervalTier.editTimestamps-286"><a href="#IntervalTier.editTimestamps-286"><span class="linenos">286</span></a>        <span class="k">return</span> <span class="n">IntervalTier</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">newEntryList</span><span class="p">,</span> <span class="n">newMin</span><span class="p">,</span> <span class="n">newMax</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Modifies all timestamps by a constant amount</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>offset:</strong>  the amount to shift all intervals</li>
<li><strong>reportingMode:</strong>  Determines the behavior if an entries moves outside
of minTimestamp or maxTimestamp after being edited</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>the modified version of the current tier</p>
</blockquote>
</div>


                            </div>
                            <div id="IntervalTier.eraseRegion" class="classattr">
                                        <input id="IntervalTier.eraseRegion-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">eraseRegion</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">start</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">end</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">collisionMode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;truncate&#39;</span><span class="p">,</span> <span class="s1">&#39;categorical&#39;</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;error&#39;</span>,</span><span class="param">	<span class="n">doShrink</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span><span class="return-annotation">) -> <span class="n"><a href="#IntervalTier">IntervalTier</a></span>:</span></span>

                <label class="view-source-button" for="IntervalTier.eraseRegion-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntervalTier.eraseRegion"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntervalTier.eraseRegion-288"><a href="#IntervalTier.eraseRegion-288"><span class="linenos">288</span></a>    <span class="k">def</span> <span class="nf">eraseRegion</span><span class="p">(</span>
</span><span id="IntervalTier.eraseRegion-289"><a href="#IntervalTier.eraseRegion-289"><span class="linenos">289</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="IntervalTier.eraseRegion-290"><a href="#IntervalTier.eraseRegion-290"><span class="linenos">290</span></a>        <span class="n">start</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="IntervalTier.eraseRegion-291"><a href="#IntervalTier.eraseRegion-291"><span class="linenos">291</span></a>        <span class="n">end</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="IntervalTier.eraseRegion-292"><a href="#IntervalTier.eraseRegion-292"><span class="linenos">292</span></a>        <span class="n">collisionMode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;truncate&quot;</span><span class="p">,</span> <span class="s2">&quot;categorical&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
</span><span id="IntervalTier.eraseRegion-293"><a href="#IntervalTier.eraseRegion-293"><span class="linenos">293</span></a>        <span class="n">doShrink</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="IntervalTier.eraseRegion-294"><a href="#IntervalTier.eraseRegion-294"><span class="linenos">294</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">:</span>
</span><span id="IntervalTier.eraseRegion-295"><a href="#IntervalTier.eraseRegion-295"><span class="linenos">295</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Makes a region in a tier blank (removes all contained entries)</span>
</span><span id="IntervalTier.eraseRegion-296"><a href="#IntervalTier.eraseRegion-296"><span class="linenos">296</span></a>
</span><span id="IntervalTier.eraseRegion-297"><a href="#IntervalTier.eraseRegion-297"><span class="linenos">297</span></a><span class="sd">        Args:</span>
</span><span id="IntervalTier.eraseRegion-298"><a href="#IntervalTier.eraseRegion-298"><span class="linenos">298</span></a><span class="sd">            start:</span>
</span><span id="IntervalTier.eraseRegion-299"><a href="#IntervalTier.eraseRegion-299"><span class="linenos">299</span></a><span class="sd">            end:</span>
</span><span id="IntervalTier.eraseRegion-300"><a href="#IntervalTier.eraseRegion-300"><span class="linenos">300</span></a><span class="sd">            collisionMode: Determines the behavior when the region to erase</span>
</span><span id="IntervalTier.eraseRegion-301"><a href="#IntervalTier.eraseRegion-301"><span class="linenos">301</span></a><span class="sd">                overlaps with existing intervals.</span>
</span><span id="IntervalTier.eraseRegion-302"><a href="#IntervalTier.eraseRegion-302"><span class="linenos">302</span></a><span class="sd">                - &#39;truncate&#39; partially contained entries will have the portion</span>
</span><span id="IntervalTier.eraseRegion-303"><a href="#IntervalTier.eraseRegion-303"><span class="linenos">303</span></a><span class="sd">                    removed that overlaps with the target entry</span>
</span><span id="IntervalTier.eraseRegion-304"><a href="#IntervalTier.eraseRegion-304"><span class="linenos">304</span></a><span class="sd">                - &#39;categorical&#39; all entries that overlap, even partially, with</span>
</span><span id="IntervalTier.eraseRegion-305"><a href="#IntervalTier.eraseRegion-305"><span class="linenos">305</span></a><span class="sd">                    the target entry will be completely removed</span>
</span><span id="IntervalTier.eraseRegion-306"><a href="#IntervalTier.eraseRegion-306"><span class="linenos">306</span></a><span class="sd">                - None or any other value throws IntervalCollision</span>
</span><span id="IntervalTier.eraseRegion-307"><a href="#IntervalTier.eraseRegion-307"><span class="linenos">307</span></a><span class="sd">            doShrink: If True, moves leftward by (/end/ - /start/)</span>
</span><span id="IntervalTier.eraseRegion-308"><a href="#IntervalTier.eraseRegion-308"><span class="linenos">308</span></a><span class="sd">                amount, each item that occurs after /end/</span>
</span><span id="IntervalTier.eraseRegion-309"><a href="#IntervalTier.eraseRegion-309"><span class="linenos">309</span></a>
</span><span id="IntervalTier.eraseRegion-310"><a href="#IntervalTier.eraseRegion-310"><span class="linenos">310</span></a><span class="sd">        Returns:</span>
</span><span id="IntervalTier.eraseRegion-311"><a href="#IntervalTier.eraseRegion-311"><span class="linenos">311</span></a><span class="sd">            The modified version of the current tier</span>
</span><span id="IntervalTier.eraseRegion-312"><a href="#IntervalTier.eraseRegion-312"><span class="linenos">312</span></a>
</span><span id="IntervalTier.eraseRegion-313"><a href="#IntervalTier.eraseRegion-313"><span class="linenos">313</span></a><span class="sd">        Raises:</span>
</span><span id="IntervalTier.eraseRegion-314"><a href="#IntervalTier.eraseRegion-314"><span class="linenos">314</span></a><span class="sd">            CollisionError</span>
</span><span id="IntervalTier.eraseRegion-315"><a href="#IntervalTier.eraseRegion-315"><span class="linenos">315</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier.eraseRegion-316"><a href="#IntervalTier.eraseRegion-316"><span class="linenos">316</span></a>        <span class="n">utils</span><span class="o">.</span><span class="n">validateOption</span><span class="p">(</span><span class="s2">&quot;collisionMode&quot;</span><span class="p">,</span> <span class="n">collisionMode</span><span class="p">,</span> <span class="n">constants</span><span class="o">.</span><span class="n">EraseCollision</span><span class="p">)</span>
</span><span id="IntervalTier.eraseRegion-317"><a href="#IntervalTier.eraseRegion-317"><span class="linenos">317</span></a>
</span><span id="IntervalTier.eraseRegion-318"><a href="#IntervalTier.eraseRegion-318"><span class="linenos">318</span></a>        <span class="n">matchList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">CropCollision</span><span class="o">.</span><span class="n">LAX</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">entries</span>
</span><span id="IntervalTier.eraseRegion-319"><a href="#IntervalTier.eraseRegion-319"><span class="linenos">319</span></a>        <span class="n">newTier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
</span><span id="IntervalTier.eraseRegion-320"><a href="#IntervalTier.eraseRegion-320"><span class="linenos">320</span></a>
</span><span id="IntervalTier.eraseRegion-321"><a href="#IntervalTier.eraseRegion-321"><span class="linenos">321</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matchList</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IntervalTier.eraseRegion-322"><a href="#IntervalTier.eraseRegion-322"><span class="linenos">322</span></a>            <span class="k">pass</span>
</span><span id="IntervalTier.eraseRegion-323"><a href="#IntervalTier.eraseRegion-323"><span class="linenos">323</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="IntervalTier.eraseRegion-324"><a href="#IntervalTier.eraseRegion-324"><span class="linenos">324</span></a>            <span class="k">if</span> <span class="n">collisionMode</span> <span class="o">==</span> <span class="n">constants</span><span class="o">.</span><span class="n">EraseCollision</span><span class="o">.</span><span class="n">ERROR</span><span class="p">:</span>
</span><span id="IntervalTier.eraseRegion-325"><a href="#IntervalTier.eraseRegion-325"><span class="linenos">325</span></a>                <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">CollisionError</span><span class="p">(</span>
</span><span id="IntervalTier.eraseRegion-326"><a href="#IntervalTier.eraseRegion-326"><span class="linenos">326</span></a>                    <span class="sa">f</span><span class="s2">&quot;Erase region (</span><span class="si">{</span><span class="n">start</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">end</span><span class="si">}</span><span class="s2">)overlapped with an interval. &quot;</span>
</span><span id="IntervalTier.eraseRegion-327"><a href="#IntervalTier.eraseRegion-327"><span class="linenos">327</span></a>                    <span class="s2">&quot;If this was expected, consider setting the collisionMode&quot;</span>
</span><span id="IntervalTier.eraseRegion-328"><a href="#IntervalTier.eraseRegion-328"><span class="linenos">328</span></a>                <span class="p">)</span>
</span><span id="IntervalTier.eraseRegion-329"><a href="#IntervalTier.eraseRegion-329"><span class="linenos">329</span></a>
</span><span id="IntervalTier.eraseRegion-330"><a href="#IntervalTier.eraseRegion-330"><span class="linenos">330</span></a>            <span class="c1"># Remove all the matches from the entries</span>
</span><span id="IntervalTier.eraseRegion-331"><a href="#IntervalTier.eraseRegion-331"><span class="linenos">331</span></a>            <span class="c1"># Go in reverse order because we&#39;re destructively altering</span>
</span><span id="IntervalTier.eraseRegion-332"><a href="#IntervalTier.eraseRegion-332"><span class="linenos">332</span></a>            <span class="c1"># the order of the list (messes up index order)</span>
</span><span id="IntervalTier.eraseRegion-333"><a href="#IntervalTier.eraseRegion-333"><span class="linenos">333</span></a>            <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">matchList</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="IntervalTier.eraseRegion-334"><a href="#IntervalTier.eraseRegion-334"><span class="linenos">334</span></a>                <span class="n">newTier</span><span class="o">.</span><span class="n">deleteEntry</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
</span><span id="IntervalTier.eraseRegion-335"><a href="#IntervalTier.eraseRegion-335"><span class="linenos">335</span></a>
</span><span id="IntervalTier.eraseRegion-336"><a href="#IntervalTier.eraseRegion-336"><span class="linenos">336</span></a>            <span class="c1"># If we&#39;re only truncating, reinsert entries on the left and</span>
</span><span id="IntervalTier.eraseRegion-337"><a href="#IntervalTier.eraseRegion-337"><span class="linenos">337</span></a>            <span class="c1"># right edges</span>
</span><span id="IntervalTier.eraseRegion-338"><a href="#IntervalTier.eraseRegion-338"><span class="linenos">338</span></a>            <span class="c1"># if categorical, it doesn&#39;t make it into the list at all</span>
</span><span id="IntervalTier.eraseRegion-339"><a href="#IntervalTier.eraseRegion-339"><span class="linenos">339</span></a>            <span class="k">if</span> <span class="n">collisionMode</span> <span class="o">==</span> <span class="n">constants</span><span class="o">.</span><span class="n">EraseCollision</span><span class="o">.</span><span class="n">TRUNCATE</span><span class="p">:</span>
</span><span id="IntervalTier.eraseRegion-340"><a href="#IntervalTier.eraseRegion-340"><span class="linenos">340</span></a>                <span class="c1"># Check left edge</span>
</span><span id="IntervalTier.eraseRegion-341"><a href="#IntervalTier.eraseRegion-341"><span class="linenos">341</span></a>                <span class="k">if</span> <span class="n">matchList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">start</span> <span class="o">&lt;</span> <span class="n">start</span><span class="p">:</span>
</span><span id="IntervalTier.eraseRegion-342"><a href="#IntervalTier.eraseRegion-342"><span class="linenos">342</span></a>                    <span class="n">newEntry</span> <span class="o">=</span> <span class="n">Interval</span><span class="p">(</span><span class="n">matchList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">matchList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">label</span><span class="p">)</span>
</span><span id="IntervalTier.eraseRegion-343"><a href="#IntervalTier.eraseRegion-343"><span class="linenos">343</span></a>                    <span class="n">newTier</span><span class="o">.</span><span class="n">insertEntry</span><span class="p">(</span><span class="n">newEntry</span><span class="p">)</span>
</span><span id="IntervalTier.eraseRegion-344"><a href="#IntervalTier.eraseRegion-344"><span class="linenos">344</span></a>
</span><span id="IntervalTier.eraseRegion-345"><a href="#IntervalTier.eraseRegion-345"><span class="linenos">345</span></a>                <span class="c1"># Check right edge</span>
</span><span id="IntervalTier.eraseRegion-346"><a href="#IntervalTier.eraseRegion-346"><span class="linenos">346</span></a>                <span class="k">if</span> <span class="n">matchList</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span> <span class="o">&gt;</span> <span class="n">end</span><span class="p">:</span>
</span><span id="IntervalTier.eraseRegion-347"><a href="#IntervalTier.eraseRegion-347"><span class="linenos">347</span></a>                    <span class="n">newEntry</span> <span class="o">=</span> <span class="n">Interval</span><span class="p">(</span><span class="n">end</span><span class="p">,</span> <span class="n">matchList</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">matchList</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">label</span><span class="p">)</span>
</span><span id="IntervalTier.eraseRegion-348"><a href="#IntervalTier.eraseRegion-348"><span class="linenos">348</span></a>                    <span class="n">newTier</span><span class="o">.</span><span class="n">insertEntry</span><span class="p">(</span><span class="n">newEntry</span><span class="p">)</span>
</span><span id="IntervalTier.eraseRegion-349"><a href="#IntervalTier.eraseRegion-349"><span class="linenos">349</span></a>
</span><span id="IntervalTier.eraseRegion-350"><a href="#IntervalTier.eraseRegion-350"><span class="linenos">350</span></a>        <span class="k">if</span> <span class="n">doShrink</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="IntervalTier.eraseRegion-351"><a href="#IntervalTier.eraseRegion-351"><span class="linenos">351</span></a>            <span class="n">diff</span> <span class="o">=</span> <span class="n">end</span> <span class="o">-</span> <span class="n">start</span>
</span><span id="IntervalTier.eraseRegion-352"><a href="#IntervalTier.eraseRegion-352"><span class="linenos">352</span></a>            <span class="n">newEntryList</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="IntervalTier.eraseRegion-353"><a href="#IntervalTier.eraseRegion-353"><span class="linenos">353</span></a>            <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">newTier</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="IntervalTier.eraseRegion-354"><a href="#IntervalTier.eraseRegion-354"><span class="linenos">354</span></a>                <span class="k">if</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span> <span class="o">&lt;=</span> <span class="n">start</span><span class="p">:</span>
</span><span id="IntervalTier.eraseRegion-355"><a href="#IntervalTier.eraseRegion-355"><span class="linenos">355</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
</span><span id="IntervalTier.eraseRegion-356"><a href="#IntervalTier.eraseRegion-356"><span class="linenos">356</span></a>                <span class="k">elif</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span> <span class="o">&gt;=</span> <span class="n">end</span><span class="p">:</span>
</span><span id="IntervalTier.eraseRegion-357"><a href="#IntervalTier.eraseRegion-357"><span class="linenos">357</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="IntervalTier.eraseRegion-358"><a href="#IntervalTier.eraseRegion-358"><span class="linenos">358</span></a>                        <span class="n">Interval</span><span class="p">(</span>
</span><span id="IntervalTier.eraseRegion-359"><a href="#IntervalTier.eraseRegion-359"><span class="linenos">359</span></a>                            <span class="n">interval</span><span class="o">.</span><span class="n">start</span> <span class="o">-</span> <span class="n">diff</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">diff</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">label</span>
</span><span id="IntervalTier.eraseRegion-360"><a href="#IntervalTier.eraseRegion-360"><span class="linenos">360</span></a>                        <span class="p">)</span>
</span><span id="IntervalTier.eraseRegion-361"><a href="#IntervalTier.eraseRegion-361"><span class="linenos">361</span></a>                    <span class="p">)</span>
</span><span id="IntervalTier.eraseRegion-362"><a href="#IntervalTier.eraseRegion-362"><span class="linenos">362</span></a>
</span><span id="IntervalTier.eraseRegion-363"><a href="#IntervalTier.eraseRegion-363"><span class="linenos">363</span></a>            <span class="c1"># Special case: an interval that spanned the deleted</span>
</span><span id="IntervalTier.eraseRegion-364"><a href="#IntervalTier.eraseRegion-364"><span class="linenos">364</span></a>            <span class="c1"># section</span>
</span><span id="IntervalTier.eraseRegion-365"><a href="#IntervalTier.eraseRegion-365"><span class="linenos">365</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">newEntryList</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="IntervalTier.eraseRegion-366"><a href="#IntervalTier.eraseRegion-366"><span class="linenos">366</span></a>                <span class="n">rightEdge</span> <span class="o">=</span> <span class="n">newEntryList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">end</span> <span class="o">==</span> <span class="n">start</span>
</span><span id="IntervalTier.eraseRegion-367"><a href="#IntervalTier.eraseRegion-367"><span class="linenos">367</span></a>                <span class="n">leftEdge</span> <span class="o">=</span> <span class="n">newEntryList</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">start</span> <span class="o">==</span> <span class="n">start</span>
</span><span id="IntervalTier.eraseRegion-368"><a href="#IntervalTier.eraseRegion-368"><span class="linenos">368</span></a>                <span class="n">sameLabel</span> <span class="o">=</span> <span class="n">newEntryList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">label</span> <span class="o">==</span> <span class="n">newEntryList</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">label</span>
</span><span id="IntervalTier.eraseRegion-369"><a href="#IntervalTier.eraseRegion-369"><span class="linenos">369</span></a>                <span class="k">if</span> <span class="n">rightEdge</span> <span class="ow">and</span> <span class="n">leftEdge</span> <span class="ow">and</span> <span class="n">sameLabel</span><span class="p">:</span>
</span><span id="IntervalTier.eraseRegion-370"><a href="#IntervalTier.eraseRegion-370"><span class="linenos">370</span></a>                    <span class="n">newInterval</span> <span class="o">=</span> <span class="n">Interval</span><span class="p">(</span>
</span><span id="IntervalTier.eraseRegion-371"><a href="#IntervalTier.eraseRegion-371"><span class="linenos">371</span></a>                        <span class="n">newEntryList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">,</span>
</span><span id="IntervalTier.eraseRegion-372"><a href="#IntervalTier.eraseRegion-372"><span class="linenos">372</span></a>                        <span class="n">newEntryList</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">,</span>
</span><span id="IntervalTier.eraseRegion-373"><a href="#IntervalTier.eraseRegion-373"><span class="linenos">373</span></a>                        <span class="n">newEntryList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>
</span><span id="IntervalTier.eraseRegion-374"><a href="#IntervalTier.eraseRegion-374"><span class="linenos">374</span></a>                    <span class="p">)</span>
</span><span id="IntervalTier.eraseRegion-375"><a href="#IntervalTier.eraseRegion-375"><span class="linenos">375</span></a>
</span><span id="IntervalTier.eraseRegion-376"><a href="#IntervalTier.eraseRegion-376"><span class="linenos">376</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="IntervalTier.eraseRegion-377"><a href="#IntervalTier.eraseRegion-377"><span class="linenos">377</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="IntervalTier.eraseRegion-378"><a href="#IntervalTier.eraseRegion-378"><span class="linenos">378</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">newInterval</span><span class="p">)</span>
</span><span id="IntervalTier.eraseRegion-379"><a href="#IntervalTier.eraseRegion-379"><span class="linenos">379</span></a>
</span><span id="IntervalTier.eraseRegion-380"><a href="#IntervalTier.eraseRegion-380"><span class="linenos">380</span></a>                    <span class="c1"># Only one interval can span the deleted section,</span>
</span><span id="IntervalTier.eraseRegion-381"><a href="#IntervalTier.eraseRegion-381"><span class="linenos">381</span></a>                    <span class="c1"># so if we&#39;ve found it, move on</span>
</span><span id="IntervalTier.eraseRegion-382"><a href="#IntervalTier.eraseRegion-382"><span class="linenos">382</span></a>                    <span class="k">break</span>
</span><span id="IntervalTier.eraseRegion-383"><a href="#IntervalTier.eraseRegion-383"><span class="linenos">383</span></a>
</span><span id="IntervalTier.eraseRegion-384"><a href="#IntervalTier.eraseRegion-384"><span class="linenos">384</span></a>            <span class="n">newMax</span> <span class="o">=</span> <span class="n">newTier</span><span class="o">.</span><span class="n">maxTimestamp</span> <span class="o">-</span> <span class="n">diff</span>
</span><span id="IntervalTier.eraseRegion-385"><a href="#IntervalTier.eraseRegion-385"><span class="linenos">385</span></a>            <span class="n">newTier</span> <span class="o">=</span> <span class="n">newTier</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">entries</span><span class="o">=</span><span class="n">newEntryList</span><span class="p">,</span> <span class="n">maxTimestamp</span><span class="o">=</span><span class="n">newMax</span><span class="p">)</span>
</span><span id="IntervalTier.eraseRegion-386"><a href="#IntervalTier.eraseRegion-386"><span class="linenos">386</span></a>
</span><span id="IntervalTier.eraseRegion-387"><a href="#IntervalTier.eraseRegion-387"><span class="linenos">387</span></a>        <span class="k">return</span> <span class="n">newTier</span>
</span></pre></div>


            <div class="docstring"><p>Makes a region in a tier blank (removes all contained entries)</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>start:</strong> </li>
<li><strong>end:</strong> </li>
<li><strong>collisionMode:</strong>  Determines the behavior when the region to erase
overlaps with existing intervals.
<ul>
<li>'truncate' partially contained entries will have the portion
removed that overlaps with the target entry</li>
<li>'categorical' all entries that overlap, even partially, with
the target entry will be completely removed</li>
<li>None or any other value throws IntervalCollision</li>
</ul></li>
<li><strong>doShrink:</strong>  If True, moves leftward by (/end/ - /start/)
amount, each item that occurs after /end/</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>The modified version of the current tier</p>
</blockquote>

<h6 id="raises">Raises:</h6>

<ul>
<li>CollisionError</li>
</ul>
</div>


                            </div>
                            <div id="IntervalTier.getValuesInIntervals" class="classattr">
                                        <input id="IntervalTier.getValuesInIntervals-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getValuesInIntervals</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">dataTupleList</span><span class="p">:</span> <span class="n">List</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n"><a href="../utilities/constants.html#Interval">praatio.utilities.constants.Interval</a></span><span class="p">,</span> <span class="n">List</span><span class="p">]]</span>:</span></span>

                <label class="view-source-button" for="IntervalTier.getValuesInIntervals-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntervalTier.getValuesInIntervals"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntervalTier.getValuesInIntervals-389"><a href="#IntervalTier.getValuesInIntervals-389"><span class="linenos">389</span></a>    <span class="k">def</span> <span class="nf">getValuesInIntervals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataTupleList</span><span class="p">:</span> <span class="n">List</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Interval</span><span class="p">,</span> <span class="n">List</span><span class="p">]]:</span>
</span><span id="IntervalTier.getValuesInIntervals-390"><a href="#IntervalTier.getValuesInIntervals-390"><span class="linenos">390</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns data from dataTupleList contained in labeled intervals</span>
</span><span id="IntervalTier.getValuesInIntervals-391"><a href="#IntervalTier.getValuesInIntervals-391"><span class="linenos">391</span></a>
</span><span id="IntervalTier.getValuesInIntervals-392"><a href="#IntervalTier.getValuesInIntervals-392"><span class="linenos">392</span></a><span class="sd">        Each labeled interval will get its own list of data values.</span>
</span><span id="IntervalTier.getValuesInIntervals-393"><a href="#IntervalTier.getValuesInIntervals-393"><span class="linenos">393</span></a>
</span><span id="IntervalTier.getValuesInIntervals-394"><a href="#IntervalTier.getValuesInIntervals-394"><span class="linenos">394</span></a><span class="sd">        dataTupleList should be of the form:</span>
</span><span id="IntervalTier.getValuesInIntervals-395"><a href="#IntervalTier.getValuesInIntervals-395"><span class="linenos">395</span></a><span class="sd">        [(time1, value1a, value1b,...), (time2, value2a, value2b...), ...]</span>
</span><span id="IntervalTier.getValuesInIntervals-396"><a href="#IntervalTier.getValuesInIntervals-396"><span class="linenos">396</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier.getValuesInIntervals-397"><a href="#IntervalTier.getValuesInIntervals-397"><span class="linenos">397</span></a>
</span><span id="IntervalTier.getValuesInIntervals-398"><a href="#IntervalTier.getValuesInIntervals-398"><span class="linenos">398</span></a>        <span class="n">returnList</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="IntervalTier.getValuesInIntervals-399"><a href="#IntervalTier.getValuesInIntervals-399"><span class="linenos">399</span></a>
</span><span id="IntervalTier.getValuesInIntervals-400"><a href="#IntervalTier.getValuesInIntervals-400"><span class="linenos">400</span></a>        <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="IntervalTier.getValuesInIntervals-401"><a href="#IntervalTier.getValuesInIntervals-401"><span class="linenos">401</span></a>            <span class="n">intervalDataList</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">getValuesInInterval</span><span class="p">(</span>
</span><span id="IntervalTier.getValuesInIntervals-402"><a href="#IntervalTier.getValuesInIntervals-402"><span class="linenos">402</span></a>                <span class="n">dataTupleList</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span>
</span><span id="IntervalTier.getValuesInIntervals-403"><a href="#IntervalTier.getValuesInIntervals-403"><span class="linenos">403</span></a>            <span class="p">)</span>
</span><span id="IntervalTier.getValuesInIntervals-404"><a href="#IntervalTier.getValuesInIntervals-404"><span class="linenos">404</span></a>            <span class="n">returnList</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">interval</span><span class="p">,</span> <span class="n">intervalDataList</span><span class="p">))</span>
</span><span id="IntervalTier.getValuesInIntervals-405"><a href="#IntervalTier.getValuesInIntervals-405"><span class="linenos">405</span></a>
</span><span id="IntervalTier.getValuesInIntervals-406"><a href="#IntervalTier.getValuesInIntervals-406"><span class="linenos">406</span></a>        <span class="k">return</span> <span class="n">returnList</span>
</span></pre></div>


            <div class="docstring"><p>Returns data from dataTupleList contained in labeled intervals</p>

<p>Each labeled interval will get its own list of data values.</p>

<p>dataTupleList should be of the form:
[(time1, value1a, value1b,...), (time2, value2a, value2b...), ...]</p>
</div>


                            </div>
                            <div id="IntervalTier.getNonEntries" class="classattr">
                                        <input id="IntervalTier.getNonEntries-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getNonEntries</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="n"><a href="../utilities/constants.html#Interval">praatio.utilities.constants.Interval</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="IntervalTier.getNonEntries-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntervalTier.getNonEntries"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntervalTier.getNonEntries-408"><a href="#IntervalTier.getNonEntries-408"><span class="linenos">408</span></a>    <span class="k">def</span> <span class="nf">getNonEntries</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Interval</span><span class="p">]:</span>
</span><span id="IntervalTier.getNonEntries-409"><a href="#IntervalTier.getNonEntries-409"><span class="linenos">409</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the regions of the textgrid without labels</span>
</span><span id="IntervalTier.getNonEntries-410"><a href="#IntervalTier.getNonEntries-410"><span class="linenos">410</span></a>
</span><span id="IntervalTier.getNonEntries-411"><a href="#IntervalTier.getNonEntries-411"><span class="linenos">411</span></a><span class="sd">        This can include unlabeled segments and regions marked as silent.</span>
</span><span id="IntervalTier.getNonEntries-412"><a href="#IntervalTier.getNonEntries-412"><span class="linenos">412</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier.getNonEntries-413"><a href="#IntervalTier.getNonEntries-413"><span class="linenos">413</span></a>        <span class="n">entries</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span>
</span><span id="IntervalTier.getNonEntries-414"><a href="#IntervalTier.getNonEntries-414"><span class="linenos">414</span></a>        <span class="n">invertedEntryList</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="IntervalTier.getNonEntries-415"><a href="#IntervalTier.getNonEntries-415"><span class="linenos">415</span></a>            <span class="n">Interval</span><span class="p">(</span><span class="n">entries</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">entries</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="IntervalTier.getNonEntries-416"><a href="#IntervalTier.getNonEntries-416"><span class="linenos">416</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">entries</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="IntervalTier.getNonEntries-417"><a href="#IntervalTier.getNonEntries-417"><span class="linenos">417</span></a>        <span class="p">]</span>
</span><span id="IntervalTier.getNonEntries-418"><a href="#IntervalTier.getNonEntries-418"><span class="linenos">418</span></a>
</span><span id="IntervalTier.getNonEntries-419"><a href="#IntervalTier.getNonEntries-419"><span class="linenos">419</span></a>        <span class="c1"># Remove entries that have no duration (ie lie between two entries</span>
</span><span id="IntervalTier.getNonEntries-420"><a href="#IntervalTier.getNonEntries-420"><span class="linenos">420</span></a>        <span class="c1"># that share a border)</span>
</span><span id="IntervalTier.getNonEntries-421"><a href="#IntervalTier.getNonEntries-421"><span class="linenos">421</span></a>        <span class="n">invertedEntryList</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="IntervalTier.getNonEntries-422"><a href="#IntervalTier.getNonEntries-422"><span class="linenos">422</span></a>            <span class="n">interval</span> <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">invertedEntryList</span> <span class="k">if</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span> <span class="o">&lt;</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span>
</span><span id="IntervalTier.getNonEntries-423"><a href="#IntervalTier.getNonEntries-423"><span class="linenos">423</span></a>        <span class="p">]</span>
</span><span id="IntervalTier.getNonEntries-424"><a href="#IntervalTier.getNonEntries-424"><span class="linenos">424</span></a>
</span><span id="IntervalTier.getNonEntries-425"><a href="#IntervalTier.getNonEntries-425"><span class="linenos">425</span></a>        <span class="k">if</span> <span class="n">entries</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IntervalTier.getNonEntries-426"><a href="#IntervalTier.getNonEntries-426"><span class="linenos">426</span></a>            <span class="n">invertedEntryList</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">Interval</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">entries</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
</span><span id="IntervalTier.getNonEntries-427"><a href="#IntervalTier.getNonEntries-427"><span class="linenos">427</span></a>
</span><span id="IntervalTier.getNonEntries-428"><a href="#IntervalTier.getNonEntries-428"><span class="linenos">428</span></a>        <span class="k">if</span> <span class="n">entries</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span><span class="p">:</span>
</span><span id="IntervalTier.getNonEntries-429"><a href="#IntervalTier.getNonEntries-429"><span class="linenos">429</span></a>            <span class="n">invertedEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Interval</span><span class="p">(</span><span class="n">entries</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
</span><span id="IntervalTier.getNonEntries-430"><a href="#IntervalTier.getNonEntries-430"><span class="linenos">430</span></a>
</span><span id="IntervalTier.getNonEntries-431"><a href="#IntervalTier.getNonEntries-431"><span class="linenos">431</span></a>        <span class="n">invertedEntryList</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="IntervalTier.getNonEntries-432"><a href="#IntervalTier.getNonEntries-432"><span class="linenos">432</span></a>            <span class="n">interval</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">interval</span><span class="p">,</span> <span class="n">Interval</span><span class="p">)</span> <span class="k">else</span> <span class="n">Interval</span><span class="p">(</span><span class="o">*</span><span class="n">interval</span><span class="p">)</span>
</span><span id="IntervalTier.getNonEntries-433"><a href="#IntervalTier.getNonEntries-433"><span class="linenos">433</span></a>            <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">invertedEntryList</span>
</span><span id="IntervalTier.getNonEntries-434"><a href="#IntervalTier.getNonEntries-434"><span class="linenos">434</span></a>        <span class="p">]</span>
</span><span id="IntervalTier.getNonEntries-435"><a href="#IntervalTier.getNonEntries-435"><span class="linenos">435</span></a>
</span><span id="IntervalTier.getNonEntries-436"><a href="#IntervalTier.getNonEntries-436"><span class="linenos">436</span></a>        <span class="k">return</span> <span class="n">invertedEntryList</span>
</span></pre></div>


            <div class="docstring"><p>Returns the regions of the textgrid without labels</p>

<p>This can include unlabeled segments and regions marked as silent.</p>
</div>


                            </div>
                            <div id="IntervalTier.insertEntry" class="classattr">
                                        <input id="IntervalTier.insertEntry-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">insertEntry</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">entry</span><span class="p">:</span> <span class="n"><a href="../utilities/constants.html#Interval">praatio.utilities.constants.Interval</a></span>,</span><span class="param">	<span class="n">collisionMode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;replace&#39;</span><span class="p">,</span> <span class="s1">&#39;merge&#39;</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;error&#39;</span>,</span><span class="param">	<span class="n">collisionReportingMode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;silence&#39;</span><span class="p">,</span> <span class="s1">&#39;warning&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;warning&#39;</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="IntervalTier.insertEntry-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntervalTier.insertEntry"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntervalTier.insertEntry-438"><a href="#IntervalTier.insertEntry-438"><span class="linenos">438</span></a>    <span class="k">def</span> <span class="nf">insertEntry</span><span class="p">(</span>
</span><span id="IntervalTier.insertEntry-439"><a href="#IntervalTier.insertEntry-439"><span class="linenos">439</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="IntervalTier.insertEntry-440"><a href="#IntervalTier.insertEntry-440"><span class="linenos">440</span></a>        <span class="n">entry</span><span class="p">:</span> <span class="n">Interval</span><span class="p">,</span>
</span><span id="IntervalTier.insertEntry-441"><a href="#IntervalTier.insertEntry-441"><span class="linenos">441</span></a>        <span class="n">collisionMode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;replace&quot;</span><span class="p">,</span> <span class="s2">&quot;merge&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
</span><span id="IntervalTier.insertEntry-442"><a href="#IntervalTier.insertEntry-442"><span class="linenos">442</span></a>        <span class="n">collisionReportingMode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;silence&quot;</span><span class="p">,</span> <span class="s2">&quot;warning&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;warning&quot;</span><span class="p">,</span>
</span><span id="IntervalTier.insertEntry-443"><a href="#IntervalTier.insertEntry-443"><span class="linenos">443</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IntervalTier.insertEntry-444"><a href="#IntervalTier.insertEntry-444"><span class="linenos">444</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Inserts an interval into the tier</span>
</span><span id="IntervalTier.insertEntry-445"><a href="#IntervalTier.insertEntry-445"><span class="linenos">445</span></a>
</span><span id="IntervalTier.insertEntry-446"><a href="#IntervalTier.insertEntry-446"><span class="linenos">446</span></a><span class="sd">        Args:</span>
</span><span id="IntervalTier.insertEntry-447"><a href="#IntervalTier.insertEntry-447"><span class="linenos">447</span></a><span class="sd">            entry: the Interval to insert</span>
</span><span id="IntervalTier.insertEntry-448"><a href="#IntervalTier.insertEntry-448"><span class="linenos">448</span></a><span class="sd">            collisionMode: determines the behavior in the event that intervals</span>
</span><span id="IntervalTier.insertEntry-449"><a href="#IntervalTier.insertEntry-449"><span class="linenos">449</span></a><span class="sd">                exist in the insertion area.</span>
</span><span id="IntervalTier.insertEntry-450"><a href="#IntervalTier.insertEntry-450"><span class="linenos">450</span></a><span class="sd">                - &#39;replace&#39; will remove existing items</span>
</span><span id="IntervalTier.insertEntry-451"><a href="#IntervalTier.insertEntry-451"><span class="linenos">451</span></a><span class="sd">                - &#39;merge&#39; will fuse the inserting item with existing items</span>
</span><span id="IntervalTier.insertEntry-452"><a href="#IntervalTier.insertEntry-452"><span class="linenos">452</span></a><span class="sd">                - None or any other value will throw a CollisionError</span>
</span><span id="IntervalTier.insertEntry-453"><a href="#IntervalTier.insertEntry-453"><span class="linenos">453</span></a><span class="sd">            collisionReportingMode: Determines the behavior if the new entry</span>
</span><span id="IntervalTier.insertEntry-454"><a href="#IntervalTier.insertEntry-454"><span class="linenos">454</span></a><span class="sd">                overlaps with an existing one</span>
</span><span id="IntervalTier.insertEntry-455"><a href="#IntervalTier.insertEntry-455"><span class="linenos">455</span></a>
</span><span id="IntervalTier.insertEntry-456"><a href="#IntervalTier.insertEntry-456"><span class="linenos">456</span></a><span class="sd">        Returns:</span>
</span><span id="IntervalTier.insertEntry-457"><a href="#IntervalTier.insertEntry-457"><span class="linenos">457</span></a><span class="sd">            the modified version of the current tier</span>
</span><span id="IntervalTier.insertEntry-458"><a href="#IntervalTier.insertEntry-458"><span class="linenos">458</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier.insertEntry-459"><a href="#IntervalTier.insertEntry-459"><span class="linenos">459</span></a>        <span class="n">utils</span><span class="o">.</span><span class="n">validateOption</span><span class="p">(</span>
</span><span id="IntervalTier.insertEntry-460"><a href="#IntervalTier.insertEntry-460"><span class="linenos">460</span></a>            <span class="s2">&quot;collisionMode&quot;</span><span class="p">,</span> <span class="n">collisionMode</span><span class="p">,</span> <span class="n">constants</span><span class="o">.</span><span class="n">IntervalCollision</span>
</span><span id="IntervalTier.insertEntry-461"><a href="#IntervalTier.insertEntry-461"><span class="linenos">461</span></a>        <span class="p">)</span>
</span><span id="IntervalTier.insertEntry-462"><a href="#IntervalTier.insertEntry-462"><span class="linenos">462</span></a>        <span class="n">utils</span><span class="o">.</span><span class="n">validateOption</span><span class="p">(</span>
</span><span id="IntervalTier.insertEntry-463"><a href="#IntervalTier.insertEntry-463"><span class="linenos">463</span></a>            <span class="s2">&quot;collisionReportingMode&quot;</span><span class="p">,</span>
</span><span id="IntervalTier.insertEntry-464"><a href="#IntervalTier.insertEntry-464"><span class="linenos">464</span></a>            <span class="n">collisionReportingMode</span><span class="p">,</span>
</span><span id="IntervalTier.insertEntry-465"><a href="#IntervalTier.insertEntry-465"><span class="linenos">465</span></a>            <span class="n">constants</span><span class="o">.</span><span class="n">ErrorReportingMode</span><span class="p">,</span>
</span><span id="IntervalTier.insertEntry-466"><a href="#IntervalTier.insertEntry-466"><span class="linenos">466</span></a>        <span class="p">)</span>
</span><span id="IntervalTier.insertEntry-467"><a href="#IntervalTier.insertEntry-467"><span class="linenos">467</span></a>        <span class="n">collisionReporter</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">getErrorReporter</span><span class="p">(</span><span class="n">collisionReportingMode</span><span class="p">)</span>
</span><span id="IntervalTier.insertEntry-468"><a href="#IntervalTier.insertEntry-468"><span class="linenos">468</span></a>
</span><span id="IntervalTier.insertEntry-469"><a href="#IntervalTier.insertEntry-469"><span class="linenos">469</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entry</span><span class="p">,</span> <span class="n">Interval</span><span class="p">):</span>
</span><span id="IntervalTier.insertEntry-470"><a href="#IntervalTier.insertEntry-470"><span class="linenos">470</span></a>            <span class="n">interval</span> <span class="o">=</span> <span class="n">Interval</span><span class="p">(</span><span class="o">*</span><span class="n">entry</span><span class="p">)</span>
</span><span id="IntervalTier.insertEntry-471"><a href="#IntervalTier.insertEntry-471"><span class="linenos">471</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="IntervalTier.insertEntry-472"><a href="#IntervalTier.insertEntry-472"><span class="linenos">472</span></a>            <span class="n">interval</span> <span class="o">=</span> <span class="n">entry</span>
</span><span id="IntervalTier.insertEntry-473"><a href="#IntervalTier.insertEntry-473"><span class="linenos">473</span></a>
</span><span id="IntervalTier.insertEntry-474"><a href="#IntervalTier.insertEntry-474"><span class="linenos">474</span></a>        <span class="n">matchList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span>
</span><span id="IntervalTier.insertEntry-475"><a href="#IntervalTier.insertEntry-475"><span class="linenos">475</span></a>            <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">CropCollision</span><span class="o">.</span><span class="n">LAX</span><span class="p">,</span> <span class="kc">False</span>
</span><span id="IntervalTier.insertEntry-476"><a href="#IntervalTier.insertEntry-476"><span class="linenos">476</span></a>        <span class="p">)</span><span class="o">.</span><span class="n">_entries</span>
</span><span id="IntervalTier.insertEntry-477"><a href="#IntervalTier.insertEntry-477"><span class="linenos">477</span></a>
</span><span id="IntervalTier.insertEntry-478"><a href="#IntervalTier.insertEntry-478"><span class="linenos">478</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matchList</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IntervalTier.insertEntry-479"><a href="#IntervalTier.insertEntry-479"><span class="linenos">479</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
</span><span id="IntervalTier.insertEntry-480"><a href="#IntervalTier.insertEntry-480"><span class="linenos">480</span></a>
</span><span id="IntervalTier.insertEntry-481"><a href="#IntervalTier.insertEntry-481"><span class="linenos">481</span></a>        <span class="k">elif</span> <span class="n">collisionMode</span> <span class="o">==</span> <span class="n">constants</span><span class="o">.</span><span class="n">IntervalCollision</span><span class="o">.</span><span class="n">REPLACE</span><span class="p">:</span>
</span><span id="IntervalTier.insertEntry-482"><a href="#IntervalTier.insertEntry-482"><span class="linenos">482</span></a>            <span class="k">for</span> <span class="n">matchEntry</span> <span class="ow">in</span> <span class="n">matchList</span><span class="p">:</span>
</span><span id="IntervalTier.insertEntry-483"><a href="#IntervalTier.insertEntry-483"><span class="linenos">483</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">deleteEntry</span><span class="p">(</span><span class="n">matchEntry</span><span class="p">)</span>
</span><span id="IntervalTier.insertEntry-484"><a href="#IntervalTier.insertEntry-484"><span class="linenos">484</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
</span><span id="IntervalTier.insertEntry-485"><a href="#IntervalTier.insertEntry-485"><span class="linenos">485</span></a>
</span><span id="IntervalTier.insertEntry-486"><a href="#IntervalTier.insertEntry-486"><span class="linenos">486</span></a>        <span class="k">elif</span> <span class="n">collisionMode</span> <span class="o">==</span> <span class="n">constants</span><span class="o">.</span><span class="n">IntervalCollision</span><span class="o">.</span><span class="n">MERGE</span><span class="p">:</span>
</span><span id="IntervalTier.insertEntry-487"><a href="#IntervalTier.insertEntry-487"><span class="linenos">487</span></a>            <span class="k">for</span> <span class="n">matchEntry</span> <span class="ow">in</span> <span class="n">matchList</span><span class="p">:</span>
</span><span id="IntervalTier.insertEntry-488"><a href="#IntervalTier.insertEntry-488"><span class="linenos">488</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">deleteEntry</span><span class="p">(</span><span class="n">matchEntry</span><span class="p">)</span>
</span><span id="IntervalTier.insertEntry-489"><a href="#IntervalTier.insertEntry-489"><span class="linenos">489</span></a>            <span class="n">matchList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
</span><span id="IntervalTier.insertEntry-490"><a href="#IntervalTier.insertEntry-490"><span class="linenos">490</span></a>            <span class="n">matchList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>  <span class="c1"># By starting time</span>
</span><span id="IntervalTier.insertEntry-491"><a href="#IntervalTier.insertEntry-491"><span class="linenos">491</span></a>
</span><span id="IntervalTier.insertEntry-492"><a href="#IntervalTier.insertEntry-492"><span class="linenos">492</span></a>            <span class="n">newInterval</span> <span class="o">=</span> <span class="n">Interval</span><span class="p">(</span>
</span><span id="IntervalTier.insertEntry-493"><a href="#IntervalTier.insertEntry-493"><span class="linenos">493</span></a>                <span class="nb">min</span><span class="p">([</span><span class="n">tmpInterval</span><span class="o">.</span><span class="n">start</span> <span class="k">for</span> <span class="n">tmpInterval</span> <span class="ow">in</span> <span class="n">matchList</span><span class="p">]),</span>
</span><span id="IntervalTier.insertEntry-494"><a href="#IntervalTier.insertEntry-494"><span class="linenos">494</span></a>                <span class="nb">max</span><span class="p">([</span><span class="n">tmpInterval</span><span class="o">.</span><span class="n">end</span> <span class="k">for</span> <span class="n">tmpInterval</span> <span class="ow">in</span> <span class="n">matchList</span><span class="p">]),</span>
</span><span id="IntervalTier.insertEntry-495"><a href="#IntervalTier.insertEntry-495"><span class="linenos">495</span></a>                <span class="s2">&quot;-&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">tmpInterval</span><span class="o">.</span><span class="n">label</span> <span class="k">for</span> <span class="n">tmpInterval</span> <span class="ow">in</span> <span class="n">matchList</span><span class="p">]),</span>
</span><span id="IntervalTier.insertEntry-496"><a href="#IntervalTier.insertEntry-496"><span class="linenos">496</span></a>            <span class="p">)</span>
</span><span id="IntervalTier.insertEntry-497"><a href="#IntervalTier.insertEntry-497"><span class="linenos">497</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newInterval</span><span class="p">)</span>
</span><span id="IntervalTier.insertEntry-498"><a href="#IntervalTier.insertEntry-498"><span class="linenos">498</span></a>
</span><span id="IntervalTier.insertEntry-499"><a href="#IntervalTier.insertEntry-499"><span class="linenos">499</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="IntervalTier.insertEntry-500"><a href="#IntervalTier.insertEntry-500"><span class="linenos">500</span></a>            <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">CollisionError</span><span class="p">(</span>
</span><span id="IntervalTier.insertEntry-501"><a href="#IntervalTier.insertEntry-501"><span class="linenos">501</span></a>                <span class="s2">&quot;Attempted to insert interval &quot;</span>
</span><span id="IntervalTier.insertEntry-502"><a href="#IntervalTier.insertEntry-502"><span class="linenos">502</span></a>                <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="si">}</span><span class="s2">, &#39;</span><span class="si">{</span><span class="n">interval</span><span class="o">.</span><span class="n">label</span><span class="si">}</span><span class="s2">&#39;) into tier </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> &quot;</span>
</span><span id="IntervalTier.insertEntry-503"><a href="#IntervalTier.insertEntry-503"><span class="linenos">503</span></a>                <span class="s2">&quot;of textgrid but overlapping entries &quot;</span>
</span><span id="IntervalTier.insertEntry-504"><a href="#IntervalTier.insertEntry-504"><span class="linenos">504</span></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">interval</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">matchList</span><span class="p">]</span><span class="si">}</span><span class="s2"> &quot;</span>
</span><span id="IntervalTier.insertEntry-505"><a href="#IntervalTier.insertEntry-505"><span class="linenos">505</span></a>                <span class="s2">&quot;already exist&quot;</span>
</span><span id="IntervalTier.insertEntry-506"><a href="#IntervalTier.insertEntry-506"><span class="linenos">506</span></a>            <span class="p">)</span>
</span><span id="IntervalTier.insertEntry-507"><a href="#IntervalTier.insertEntry-507"><span class="linenos">507</span></a>
</span><span id="IntervalTier.insertEntry-508"><a href="#IntervalTier.insertEntry-508"><span class="linenos">508</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
</span><span id="IntervalTier.insertEntry-509"><a href="#IntervalTier.insertEntry-509"><span class="linenos">509</span></a>
</span><span id="IntervalTier.insertEntry-510"><a href="#IntervalTier.insertEntry-510"><span class="linenos">510</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">minTimestamp</span><span class="p">:</span>
</span><span id="IntervalTier.insertEntry-511"><a href="#IntervalTier.insertEntry-511"><span class="linenos">511</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">minTimestamp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="IntervalTier.insertEntry-512"><a href="#IntervalTier.insertEntry-512"><span class="linenos">512</span></a>
</span><span id="IntervalTier.insertEntry-513"><a href="#IntervalTier.insertEntry-513"><span class="linenos">513</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span><span class="p">:</span>
</span><span id="IntervalTier.insertEntry-514"><a href="#IntervalTier.insertEntry-514"><span class="linenos">514</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
</span><span id="IntervalTier.insertEntry-515"><a href="#IntervalTier.insertEntry-515"><span class="linenos">515</span></a>
</span><span id="IntervalTier.insertEntry-516"><a href="#IntervalTier.insertEntry-516"><span class="linenos">516</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matchList</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IntervalTier.insertEntry-517"><a href="#IntervalTier.insertEntry-517"><span class="linenos">517</span></a>            <span class="n">collisionReporter</span><span class="p">(</span>
</span><span id="IntervalTier.insertEntry-518"><a href="#IntervalTier.insertEntry-518"><span class="linenos">518</span></a>                <span class="n">errors</span><span class="o">.</span><span class="n">CollisionError</span><span class="p">,</span>
</span><span id="IntervalTier.insertEntry-519"><a href="#IntervalTier.insertEntry-519"><span class="linenos">519</span></a>                <span class="sa">f</span><span class="s2">&quot;Collision warning for (</span><span class="si">{</span><span class="n">interval</span><span class="si">}</span><span class="s2">) with items &quot;</span>
</span><span id="IntervalTier.insertEntry-520"><a href="#IntervalTier.insertEntry-520"><span class="linenos">520</span></a>                <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">matchList</span><span class="si">}</span><span class="s2">) of tier &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="IntervalTier.insertEntry-521"><a href="#IntervalTier.insertEntry-521"><span class="linenos">521</span></a>            <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Inserts an interval into the tier</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>entry:</strong>  the Interval to insert</li>
<li><strong>collisionMode:</strong>  determines the behavior in the event that intervals
exist in the insertion area.
<ul>
<li>'replace' will remove existing items</li>
<li>'merge' will fuse the inserting item with existing items</li>
<li>None or any other value will throw a CollisionError</li>
</ul></li>
<li><strong>collisionReportingMode:</strong>  Determines the behavior if the new entry
overlaps with an existing one</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>the modified version of the current tier</p>
</blockquote>
</div>


                            </div>
                            <div id="IntervalTier.insertSpace" class="classattr">
                                        <input id="IntervalTier.insertSpace-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">insertSpace</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">start</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">duration</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">collisionMode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;stretch&#39;</span><span class="p">,</span> <span class="s1">&#39;split&#39;</span><span class="p">,</span> <span class="s1">&#39;no_change&#39;</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n"><a href="#IntervalTier">IntervalTier</a></span>:</span></span>

                <label class="view-source-button" for="IntervalTier.insertSpace-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntervalTier.insertSpace"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntervalTier.insertSpace-523"><a href="#IntervalTier.insertSpace-523"><span class="linenos">523</span></a>    <span class="k">def</span> <span class="nf">insertSpace</span><span class="p">(</span>
</span><span id="IntervalTier.insertSpace-524"><a href="#IntervalTier.insertSpace-524"><span class="linenos">524</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="IntervalTier.insertSpace-525"><a href="#IntervalTier.insertSpace-525"><span class="linenos">525</span></a>        <span class="n">start</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="IntervalTier.insertSpace-526"><a href="#IntervalTier.insertSpace-526"><span class="linenos">526</span></a>        <span class="n">duration</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="IntervalTier.insertSpace-527"><a href="#IntervalTier.insertSpace-527"><span class="linenos">527</span></a>        <span class="n">collisionMode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;stretch&quot;</span><span class="p">,</span> <span class="s2">&quot;split&quot;</span><span class="p">,</span> <span class="s2">&quot;no_change&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">],</span>
</span><span id="IntervalTier.insertSpace-528"><a href="#IntervalTier.insertSpace-528"><span class="linenos">528</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">:</span>
</span><span id="IntervalTier.insertSpace-529"><a href="#IntervalTier.insertSpace-529"><span class="linenos">529</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Inserts a blank region into the tier</span>
</span><span id="IntervalTier.insertSpace-530"><a href="#IntervalTier.insertSpace-530"><span class="linenos">530</span></a>
</span><span id="IntervalTier.insertSpace-531"><a href="#IntervalTier.insertSpace-531"><span class="linenos">531</span></a><span class="sd">        Args:</span>
</span><span id="IntervalTier.insertSpace-532"><a href="#IntervalTier.insertSpace-532"><span class="linenos">532</span></a><span class="sd">            start:</span>
</span><span id="IntervalTier.insertSpace-533"><a href="#IntervalTier.insertSpace-533"><span class="linenos">533</span></a><span class="sd">            duration:</span>
</span><span id="IntervalTier.insertSpace-534"><a href="#IntervalTier.insertSpace-534"><span class="linenos">534</span></a><span class="sd">            collisionMode: Determines the behavior that occurs if</span>
</span><span id="IntervalTier.insertSpace-535"><a href="#IntervalTier.insertSpace-535"><span class="linenos">535</span></a><span class="sd">                an interval stradles the starting point</span>
</span><span id="IntervalTier.insertSpace-536"><a href="#IntervalTier.insertSpace-536"><span class="linenos">536</span></a><span class="sd">                - &#39;stretch&#39; stretches the interval by /duration/ amount</span>
</span><span id="IntervalTier.insertSpace-537"><a href="#IntervalTier.insertSpace-537"><span class="linenos">537</span></a><span class="sd">                - &#39;split&#39; splits the interval into two--everything to the</span>
</span><span id="IntervalTier.insertSpace-538"><a href="#IntervalTier.insertSpace-538"><span class="linenos">538</span></a><span class="sd">                    right of &#39;start&#39; will be advanced by &#39;duration&#39; seconds</span>
</span><span id="IntervalTier.insertSpace-539"><a href="#IntervalTier.insertSpace-539"><span class="linenos">539</span></a><span class="sd">                - &#39;no change&#39; leaves the interval as is with no change</span>
</span><span id="IntervalTier.insertSpace-540"><a href="#IntervalTier.insertSpace-540"><span class="linenos">540</span></a><span class="sd">                - &#39;error&#39; will stop execution and raise an error</span>
</span><span id="IntervalTier.insertSpace-541"><a href="#IntervalTier.insertSpace-541"><span class="linenos">541</span></a>
</span><span id="IntervalTier.insertSpace-542"><a href="#IntervalTier.insertSpace-542"><span class="linenos">542</span></a><span class="sd">        Returns:</span>
</span><span id="IntervalTier.insertSpace-543"><a href="#IntervalTier.insertSpace-543"><span class="linenos">543</span></a><span class="sd">            the modified version of the current tier</span>
</span><span id="IntervalTier.insertSpace-544"><a href="#IntervalTier.insertSpace-544"><span class="linenos">544</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier.insertSpace-545"><a href="#IntervalTier.insertSpace-545"><span class="linenos">545</span></a>        <span class="n">utils</span><span class="o">.</span><span class="n">validateOption</span><span class="p">(</span>
</span><span id="IntervalTier.insertSpace-546"><a href="#IntervalTier.insertSpace-546"><span class="linenos">546</span></a>            <span class="s2">&quot;collisionMode&quot;</span><span class="p">,</span> <span class="n">collisionMode</span><span class="p">,</span> <span class="n">constants</span><span class="o">.</span><span class="n">WhitespaceCollision</span>
</span><span id="IntervalTier.insertSpace-547"><a href="#IntervalTier.insertSpace-547"><span class="linenos">547</span></a>        <span class="p">)</span>
</span><span id="IntervalTier.insertSpace-548"><a href="#IntervalTier.insertSpace-548"><span class="linenos">548</span></a>
</span><span id="IntervalTier.insertSpace-549"><a href="#IntervalTier.insertSpace-549"><span class="linenos">549</span></a>        <span class="n">newEntryList</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="IntervalTier.insertSpace-550"><a href="#IntervalTier.insertSpace-550"><span class="linenos">550</span></a>        <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="IntervalTier.insertSpace-551"><a href="#IntervalTier.insertSpace-551"><span class="linenos">551</span></a>            <span class="c1"># Entry exists before the insertion point</span>
</span><span id="IntervalTier.insertSpace-552"><a href="#IntervalTier.insertSpace-552"><span class="linenos">552</span></a>            <span class="k">if</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span> <span class="o">&lt;=</span> <span class="n">start</span><span class="p">:</span>
</span><span id="IntervalTier.insertSpace-553"><a href="#IntervalTier.insertSpace-553"><span class="linenos">553</span></a>                <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
</span><span id="IntervalTier.insertSpace-554"><a href="#IntervalTier.insertSpace-554"><span class="linenos">554</span></a>            <span class="c1"># Entry exists after the insertion point</span>
</span><span id="IntervalTier.insertSpace-555"><a href="#IntervalTier.insertSpace-555"><span class="linenos">555</span></a>            <span class="k">elif</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span> <span class="o">&gt;=</span> <span class="n">start</span><span class="p">:</span>
</span><span id="IntervalTier.insertSpace-556"><a href="#IntervalTier.insertSpace-556"><span class="linenos">556</span></a>                <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="IntervalTier.insertSpace-557"><a href="#IntervalTier.insertSpace-557"><span class="linenos">557</span></a>                    <span class="n">Interval</span><span class="p">(</span>
</span><span id="IntervalTier.insertSpace-558"><a href="#IntervalTier.insertSpace-558"><span class="linenos">558</span></a>                        <span class="n">interval</span><span class="o">.</span><span class="n">start</span> <span class="o">+</span> <span class="n">duration</span><span class="p">,</span>
</span><span id="IntervalTier.insertSpace-559"><a href="#IntervalTier.insertSpace-559"><span class="linenos">559</span></a>                        <span class="n">interval</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="n">duration</span><span class="p">,</span>
</span><span id="IntervalTier.insertSpace-560"><a href="#IntervalTier.insertSpace-560"><span class="linenos">560</span></a>                        <span class="n">interval</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>
</span><span id="IntervalTier.insertSpace-561"><a href="#IntervalTier.insertSpace-561"><span class="linenos">561</span></a>                    <span class="p">)</span>
</span><span id="IntervalTier.insertSpace-562"><a href="#IntervalTier.insertSpace-562"><span class="linenos">562</span></a>                <span class="p">)</span>
</span><span id="IntervalTier.insertSpace-563"><a href="#IntervalTier.insertSpace-563"><span class="linenos">563</span></a>            <span class="c1"># Entry straddles the insertion point</span>
</span><span id="IntervalTier.insertSpace-564"><a href="#IntervalTier.insertSpace-564"><span class="linenos">564</span></a>            <span class="k">elif</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span> <span class="o">&lt;=</span> <span class="n">start</span> <span class="ow">and</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span> <span class="o">&gt;</span> <span class="n">start</span><span class="p">:</span>
</span><span id="IntervalTier.insertSpace-565"><a href="#IntervalTier.insertSpace-565"><span class="linenos">565</span></a>                <span class="k">if</span> <span class="n">collisionMode</span> <span class="o">==</span> <span class="n">constants</span><span class="o">.</span><span class="n">WhitespaceCollision</span><span class="o">.</span><span class="n">STRETCH</span><span class="p">:</span>
</span><span id="IntervalTier.insertSpace-566"><a href="#IntervalTier.insertSpace-566"><span class="linenos">566</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="IntervalTier.insertSpace-567"><a href="#IntervalTier.insertSpace-567"><span class="linenos">567</span></a>                        <span class="n">Interval</span><span class="p">(</span>
</span><span id="IntervalTier.insertSpace-568"><a href="#IntervalTier.insertSpace-568"><span class="linenos">568</span></a>                            <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="n">duration</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">label</span>
</span><span id="IntervalTier.insertSpace-569"><a href="#IntervalTier.insertSpace-569"><span class="linenos">569</span></a>                        <span class="p">)</span>
</span><span id="IntervalTier.insertSpace-570"><a href="#IntervalTier.insertSpace-570"><span class="linenos">570</span></a>                    <span class="p">)</span>
</span><span id="IntervalTier.insertSpace-571"><a href="#IntervalTier.insertSpace-571"><span class="linenos">571</span></a>                <span class="k">elif</span> <span class="n">collisionMode</span> <span class="o">==</span> <span class="n">constants</span><span class="o">.</span><span class="n">WhitespaceCollision</span><span class="o">.</span><span class="n">SPLIT</span><span class="p">:</span>
</span><span id="IntervalTier.insertSpace-572"><a href="#IntervalTier.insertSpace-572"><span class="linenos">572</span></a>                    <span class="c1"># Left side of the split</span>
</span><span id="IntervalTier.insertSpace-573"><a href="#IntervalTier.insertSpace-573"><span class="linenos">573</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Interval</span><span class="p">(</span><span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">label</span><span class="p">))</span>
</span><span id="IntervalTier.insertSpace-574"><a href="#IntervalTier.insertSpace-574"><span class="linenos">574</span></a>                    <span class="c1"># Right side of the split</span>
</span><span id="IntervalTier.insertSpace-575"><a href="#IntervalTier.insertSpace-575"><span class="linenos">575</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="IntervalTier.insertSpace-576"><a href="#IntervalTier.insertSpace-576"><span class="linenos">576</span></a>                        <span class="p">(</span>
</span><span id="IntervalTier.insertSpace-577"><a href="#IntervalTier.insertSpace-577"><span class="linenos">577</span></a>                            <span class="n">start</span> <span class="o">+</span> <span class="n">duration</span><span class="p">,</span>
</span><span id="IntervalTier.insertSpace-578"><a href="#IntervalTier.insertSpace-578"><span class="linenos">578</span></a>                            <span class="n">start</span> <span class="o">+</span> <span class="n">duration</span> <span class="o">+</span> <span class="p">(</span><span class="n">interval</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="p">),</span>
</span><span id="IntervalTier.insertSpace-579"><a href="#IntervalTier.insertSpace-579"><span class="linenos">579</span></a>                            <span class="n">interval</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>
</span><span id="IntervalTier.insertSpace-580"><a href="#IntervalTier.insertSpace-580"><span class="linenos">580</span></a>                        <span class="p">)</span>
</span><span id="IntervalTier.insertSpace-581"><a href="#IntervalTier.insertSpace-581"><span class="linenos">581</span></a>                    <span class="p">)</span>
</span><span id="IntervalTier.insertSpace-582"><a href="#IntervalTier.insertSpace-582"><span class="linenos">582</span></a>                <span class="k">elif</span> <span class="n">collisionMode</span> <span class="o">==</span> <span class="n">constants</span><span class="o">.</span><span class="n">WhitespaceCollision</span><span class="o">.</span><span class="n">NO_CHANGE</span><span class="p">:</span>
</span><span id="IntervalTier.insertSpace-583"><a href="#IntervalTier.insertSpace-583"><span class="linenos">583</span></a>                    <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
</span><span id="IntervalTier.insertSpace-584"><a href="#IntervalTier.insertSpace-584"><span class="linenos">584</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="IntervalTier.insertSpace-585"><a href="#IntervalTier.insertSpace-585"><span class="linenos">585</span></a>                    <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">ArgumentError</span><span class="p">(</span>
</span><span id="IntervalTier.insertSpace-586"><a href="#IntervalTier.insertSpace-586"><span class="linenos">586</span></a>                        <span class="sa">f</span><span class="s2">&quot;Collision occured during insertSpace() for interval &#39;</span><span class="si">{</span><span class="n">interval</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
</span><span id="IntervalTier.insertSpace-587"><a href="#IntervalTier.insertSpace-587"><span class="linenos">587</span></a>                        <span class="sa">f</span><span class="s2">&quot;and given white space insertion interval (</span><span class="si">{</span><span class="n">start</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">start</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">duration</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="IntervalTier.insertSpace-588"><a href="#IntervalTier.insertSpace-588"><span class="linenos">588</span></a>                    <span class="p">)</span>
</span><span id="IntervalTier.insertSpace-589"><a href="#IntervalTier.insertSpace-589"><span class="linenos">589</span></a>
</span><span id="IntervalTier.insertSpace-590"><a href="#IntervalTier.insertSpace-590"><span class="linenos">590</span></a>        <span class="n">newTier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
</span><span id="IntervalTier.insertSpace-591"><a href="#IntervalTier.insertSpace-591"><span class="linenos">591</span></a>            <span class="n">entries</span><span class="o">=</span><span class="n">newEntryList</span><span class="p">,</span> <span class="n">maxTimestamp</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span> <span class="o">+</span> <span class="n">duration</span>
</span><span id="IntervalTier.insertSpace-592"><a href="#IntervalTier.insertSpace-592"><span class="linenos">592</span></a>        <span class="p">)</span>
</span><span id="IntervalTier.insertSpace-593"><a href="#IntervalTier.insertSpace-593"><span class="linenos">593</span></a>
</span><span id="IntervalTier.insertSpace-594"><a href="#IntervalTier.insertSpace-594"><span class="linenos">594</span></a>        <span class="k">return</span> <span class="n">newTier</span>
</span></pre></div>


            <div class="docstring"><p>Inserts a blank region into the tier</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>start:</strong> </li>
<li><strong>duration:</strong> </li>
<li><strong>collisionMode:</strong>  Determines the behavior that occurs if
an interval stradles the starting point
<ul>
<li>'stretch' stretches the interval by /duration/ amount</li>
<li>'split' splits the interval into two--everything to the
right of 'start' will be advanced by 'duration' seconds</li>
<li>'no change' leaves the interval as is with no change</li>
<li>'error' will stop execution and raise an error</li>
</ul></li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>the modified version of the current tier</p>
</blockquote>
</div>


                            </div>
                            <div id="IntervalTier.intersection" class="classattr">
                                        <input id="IntervalTier.intersection-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">intersection</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">tier</span><span class="p">:</span> <span class="n"><a href="#IntervalTier">IntervalTier</a></span>,</span><span class="param">	<span class="n">demarcator</span><span class="o">=</span><span class="s1">&#39;-&#39;</span></span><span class="return-annotation">) -> <span class="n"><a href="#IntervalTier">IntervalTier</a></span>:</span></span>

                <label class="view-source-button" for="IntervalTier.intersection-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntervalTier.intersection"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntervalTier.intersection-596"><a href="#IntervalTier.intersection-596"><span class="linenos">596</span></a>    <span class="k">def</span> <span class="nf">intersection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tier</span><span class="p">:</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">,</span> <span class="n">demarcator</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">:</span>
</span><span id="IntervalTier.intersection-597"><a href="#IntervalTier.intersection-597"><span class="linenos">597</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Takes the set intersection of this tier and the given one</span>
</span><span id="IntervalTier.intersection-598"><a href="#IntervalTier.intersection-598"><span class="linenos">598</span></a>
</span><span id="IntervalTier.intersection-599"><a href="#IntervalTier.intersection-599"><span class="linenos">599</span></a><span class="sd">        - The output will contain one interval for each overlapping pair</span>
</span><span id="IntervalTier.intersection-600"><a href="#IntervalTier.intersection-600"><span class="linenos">600</span></a><span class="sd">          e.g. [(1, 2, &#39;foo&#39;)] and [(1, 1.3, &#39;bang&#39;), (1.7, 2, &#39;wizz&#39;)]</span>
</span><span id="IntervalTier.intersection-601"><a href="#IntervalTier.intersection-601"><span class="linenos">601</span></a><span class="sd">                -&gt; [(1, 1.3, &#39;foo-bang&#39;), (1.7, 2, &#39;foo-wizz&#39;)]</span>
</span><span id="IntervalTier.intersection-602"><a href="#IntervalTier.intersection-602"><span class="linenos">602</span></a><span class="sd">        - Only intervals that exist in both tiers will remain in the returned tier.</span>
</span><span id="IntervalTier.intersection-603"><a href="#IntervalTier.intersection-603"><span class="linenos">603</span></a><span class="sd">          e.g. [(1, 2, &#39;foo&#39;), (3, 4, &#39;bar&#39;)] and [(1, 2, &#39;bang&#39;), (2, 3, &#39;wizz&#39;)]</span>
</span><span id="IntervalTier.intersection-604"><a href="#IntervalTier.intersection-604"><span class="linenos">604</span></a><span class="sd">                -&gt; [(1, 2, &#39;foo-bang&#39;)]</span>
</span><span id="IntervalTier.intersection-605"><a href="#IntervalTier.intersection-605"><span class="linenos">605</span></a><span class="sd">        - If intervals partially overlap, only the overlapping portion will be returned.</span>
</span><span id="IntervalTier.intersection-606"><a href="#IntervalTier.intersection-606"><span class="linenos">606</span></a><span class="sd">          e.g. [(1, 2, &#39;foo&#39;)] and [(0.5, 1.5, &#39;bang&#39;)]</span>
</span><span id="IntervalTier.intersection-607"><a href="#IntervalTier.intersection-607"><span class="linenos">607</span></a><span class="sd">                -&gt; [(1, 1.5, &#39;foo-bang&#39;)]</span>
</span><span id="IntervalTier.intersection-608"><a href="#IntervalTier.intersection-608"><span class="linenos">608</span></a>
</span><span id="IntervalTier.intersection-609"><a href="#IntervalTier.intersection-609"><span class="linenos">609</span></a><span class="sd">        Compare with IntervalTier.mergeLabels</span>
</span><span id="IntervalTier.intersection-610"><a href="#IntervalTier.intersection-610"><span class="linenos">610</span></a>
</span><span id="IntervalTier.intersection-611"><a href="#IntervalTier.intersection-611"><span class="linenos">611</span></a><span class="sd">        Args:</span>
</span><span id="IntervalTier.intersection-612"><a href="#IntervalTier.intersection-612"><span class="linenos">612</span></a><span class="sd">            tier: the tier to intersect with</span>
</span><span id="IntervalTier.intersection-613"><a href="#IntervalTier.intersection-613"><span class="linenos">613</span></a><span class="sd">            demarcator: the character to separate the labels of the overlapping intervals</span>
</span><span id="IntervalTier.intersection-614"><a href="#IntervalTier.intersection-614"><span class="linenos">614</span></a>
</span><span id="IntervalTier.intersection-615"><a href="#IntervalTier.intersection-615"><span class="linenos">615</span></a><span class="sd">        Returns:</span>
</span><span id="IntervalTier.intersection-616"><a href="#IntervalTier.intersection-616"><span class="linenos">616</span></a><span class="sd">            IntervalTier: the modified version of the current tier</span>
</span><span id="IntervalTier.intersection-617"><a href="#IntervalTier.intersection-617"><span class="linenos">617</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier.intersection-618"><a href="#IntervalTier.intersection-618"><span class="linenos">618</span></a>        <span class="n">retEntryList</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="IntervalTier.intersection-619"><a href="#IntervalTier.intersection-619"><span class="linenos">619</span></a>        <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">tier</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="IntervalTier.intersection-620"><a href="#IntervalTier.intersection-620"><span class="linenos">620</span></a>            <span class="n">subTier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span>
</span><span id="IntervalTier.intersection-621"><a href="#IntervalTier.intersection-621"><span class="linenos">621</span></a>                <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">CropCollision</span><span class="o">.</span><span class="n">TRUNCATED</span><span class="p">,</span> <span class="kc">False</span>
</span><span id="IntervalTier.intersection-622"><a href="#IntervalTier.intersection-622"><span class="linenos">622</span></a>            <span class="p">)</span>
</span><span id="IntervalTier.intersection-623"><a href="#IntervalTier.intersection-623"><span class="linenos">623</span></a>
</span><span id="IntervalTier.intersection-624"><a href="#IntervalTier.intersection-624"><span class="linenos">624</span></a>            <span class="c1"># Combine the labels in the two tiers</span>
</span><span id="IntervalTier.intersection-625"><a href="#IntervalTier.intersection-625"><span class="linenos">625</span></a>            <span class="n">subEntryList</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="IntervalTier.intersection-626"><a href="#IntervalTier.intersection-626"><span class="linenos">626</span></a>                <span class="p">(</span>
</span><span id="IntervalTier.intersection-627"><a href="#IntervalTier.intersection-627"><span class="linenos">627</span></a>                    <span class="n">subInterval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span>
</span><span id="IntervalTier.intersection-628"><a href="#IntervalTier.intersection-628"><span class="linenos">628</span></a>                    <span class="n">subInterval</span><span class="o">.</span><span class="n">end</span><span class="p">,</span>
</span><span id="IntervalTier.intersection-629"><a href="#IntervalTier.intersection-629"><span class="linenos">629</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">subInterval</span><span class="o">.</span><span class="n">label</span><span class="si">}{</span><span class="n">demarcator</span><span class="si">}{</span><span class="n">interval</span><span class="o">.</span><span class="n">label</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="IntervalTier.intersection-630"><a href="#IntervalTier.intersection-630"><span class="linenos">630</span></a>                <span class="p">)</span>
</span><span id="IntervalTier.intersection-631"><a href="#IntervalTier.intersection-631"><span class="linenos">631</span></a>                <span class="k">for</span> <span class="n">subInterval</span> <span class="ow">in</span> <span class="n">subTier</span><span class="o">.</span><span class="n">entries</span>
</span><span id="IntervalTier.intersection-632"><a href="#IntervalTier.intersection-632"><span class="linenos">632</span></a>            <span class="p">]</span>
</span><span id="IntervalTier.intersection-633"><a href="#IntervalTier.intersection-633"><span class="linenos">633</span></a>
</span><span id="IntervalTier.intersection-634"><a href="#IntervalTier.intersection-634"><span class="linenos">634</span></a>            <span class="n">retEntryList</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">subEntryList</span><span class="p">)</span>
</span><span id="IntervalTier.intersection-635"><a href="#IntervalTier.intersection-635"><span class="linenos">635</span></a>
</span><span id="IntervalTier.intersection-636"><a href="#IntervalTier.intersection-636"><span class="linenos">636</span></a>        <span class="n">newName</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">tier</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="IntervalTier.intersection-637"><a href="#IntervalTier.intersection-637"><span class="linenos">637</span></a>
</span><span id="IntervalTier.intersection-638"><a href="#IntervalTier.intersection-638"><span class="linenos">638</span></a>        <span class="n">retTier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">newName</span><span class="p">,</span> <span class="n">retEntryList</span><span class="p">)</span>
</span><span id="IntervalTier.intersection-639"><a href="#IntervalTier.intersection-639"><span class="linenos">639</span></a>
</span><span id="IntervalTier.intersection-640"><a href="#IntervalTier.intersection-640"><span class="linenos">640</span></a>        <span class="k">return</span> <span class="n">retTier</span>
</span></pre></div>


            <div class="docstring"><p>Takes the set intersection of this tier and the given one</p>

<ul>
<li>The output will contain one interval for each overlapping pair
e.g. [(1, 2, 'foo')] and [(1, 1.3, 'bang'), (1.7, 2, 'wizz')]
      -> [(1, 1.3, 'foo-bang'), (1.7, 2, 'foo-wizz')]</li>
<li>Only intervals that exist in both tiers will remain in the returned tier.
e.g. [(1, 2, 'foo'), (3, 4, 'bar')] and [(1, 2, 'bang'), (2, 3, 'wizz')]
      -> [(1, 2, 'foo-bang')]</li>
<li>If intervals partially overlap, only the overlapping portion will be returned.
e.g. [(1, 2, 'foo')] and [(0.5, 1.5, 'bang')]
      -> [(1, 1.5, 'foo-bang')]</li>
</ul>

<p>Compare with <a href="#IntervalTier.mergeLabels">IntervalTier.mergeLabels</a></p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>tier:</strong>  the tier to intersect with</li>
<li><strong>demarcator:</strong>  the character to separate the labels of the overlapping intervals</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>IntervalTier: the modified version of the current tier</p>
</blockquote>
</div>


                            </div>
                            <div id="IntervalTier.mergeLabels" class="classattr">
                                        <input id="IntervalTier.mergeLabels-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">mergeLabels</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">tier</span><span class="p">:</span> <span class="n"><a href="#IntervalTier">IntervalTier</a></span>,</span><span class="param">	<span class="n">demarcator</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span></span><span class="return-annotation">) -> <span class="n"><a href="#IntervalTier">IntervalTier</a></span>:</span></span>

                <label class="view-source-button" for="IntervalTier.mergeLabels-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntervalTier.mergeLabels"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntervalTier.mergeLabels-642"><a href="#IntervalTier.mergeLabels-642"><span class="linenos">642</span></a>    <span class="k">def</span> <span class="nf">mergeLabels</span><span class="p">(</span>
</span><span id="IntervalTier.mergeLabels-643"><a href="#IntervalTier.mergeLabels-643"><span class="linenos">643</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">tier</span><span class="p">:</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">,</span> <span class="n">demarcator</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span>
</span><span id="IntervalTier.mergeLabels-644"><a href="#IntervalTier.mergeLabels-644"><span class="linenos">644</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">:</span>
</span><span id="IntervalTier.mergeLabels-645"><a href="#IntervalTier.mergeLabels-645"><span class="linenos">645</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Merges labels of overlapping tiers into this tier</span>
</span><span id="IntervalTier.mergeLabels-646"><a href="#IntervalTier.mergeLabels-646"><span class="linenos">646</span></a>
</span><span id="IntervalTier.mergeLabels-647"><a href="#IntervalTier.mergeLabels-647"><span class="linenos">647</span></a><span class="sd">        - All intervals in this tier will appear in the output; for the given tier, only intervals</span>
</span><span id="IntervalTier.mergeLabels-648"><a href="#IntervalTier.mergeLabels-648"><span class="linenos">648</span></a><span class="sd">          that overlap with content in this tier will appear in the output</span>
</span><span id="IntervalTier.mergeLabels-649"><a href="#IntervalTier.mergeLabels-649"><span class="linenos">649</span></a><span class="sd">          e.g. [(1, 2, &#39;foo&#39;), (3, 4, &#39;bar&#39;)] and [(1, 2, &#39;bang&#39;), (2, 3, &#39;wizz&#39;)]</span>
</span><span id="IntervalTier.mergeLabels-650"><a href="#IntervalTier.mergeLabels-650"><span class="linenos">650</span></a><span class="sd">                -&gt; [(1, 2, &#39;foo(bang)&#39;), (3, 4, &#39;bar()&#39;)]</span>
</span><span id="IntervalTier.mergeLabels-651"><a href="#IntervalTier.mergeLabels-651"><span class="linenos">651</span></a><span class="sd">        - If multiple entries exist in a subinterval, their labels will be concatenated</span>
</span><span id="IntervalTier.mergeLabels-652"><a href="#IntervalTier.mergeLabels-652"><span class="linenos">652</span></a><span class="sd">          e.g. [(1, 2, &#39;hi&#39;)] and [(1, 1.5, &#39;h&#39;), (1.5, 2, &#39;ai&#39;)] -&gt; [(1, 2, &#39;hi(h,ai)&#39;)]</span>
</span><span id="IntervalTier.mergeLabels-653"><a href="#IntervalTier.mergeLabels-653"><span class="linenos">653</span></a>
</span><span id="IntervalTier.mergeLabels-654"><a href="#IntervalTier.mergeLabels-654"><span class="linenos">654</span></a><span class="sd">        compare with IntervalTier.intersection</span>
</span><span id="IntervalTier.mergeLabels-655"><a href="#IntervalTier.mergeLabels-655"><span class="linenos">655</span></a>
</span><span id="IntervalTier.mergeLabels-656"><a href="#IntervalTier.mergeLabels-656"><span class="linenos">656</span></a><span class="sd">        Args:</span>
</span><span id="IntervalTier.mergeLabels-657"><a href="#IntervalTier.mergeLabels-657"><span class="linenos">657</span></a><span class="sd">            tier: the tier to intersect with</span>
</span><span id="IntervalTier.mergeLabels-658"><a href="#IntervalTier.mergeLabels-658"><span class="linenos">658</span></a><span class="sd">            demarcator: the string to separate items that fall in the same subinterval</span>
</span><span id="IntervalTier.mergeLabels-659"><a href="#IntervalTier.mergeLabels-659"><span class="linenos">659</span></a>
</span><span id="IntervalTier.mergeLabels-660"><a href="#IntervalTier.mergeLabels-660"><span class="linenos">660</span></a><span class="sd">        Returns:</span>
</span><span id="IntervalTier.mergeLabels-661"><a href="#IntervalTier.mergeLabels-661"><span class="linenos">661</span></a><span class="sd">            IntervalTier: the modified version of the current tier</span>
</span><span id="IntervalTier.mergeLabels-662"><a href="#IntervalTier.mergeLabels-662"><span class="linenos">662</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier.mergeLabels-663"><a href="#IntervalTier.mergeLabels-663"><span class="linenos">663</span></a>        <span class="n">retEntryList</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="IntervalTier.mergeLabels-664"><a href="#IntervalTier.mergeLabels-664"><span class="linenos">664</span></a>        <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="IntervalTier.mergeLabels-665"><a href="#IntervalTier.mergeLabels-665"><span class="linenos">665</span></a>            <span class="n">subTier</span> <span class="o">=</span> <span class="n">tier</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span>
</span><span id="IntervalTier.mergeLabels-666"><a href="#IntervalTier.mergeLabels-666"><span class="linenos">666</span></a>                <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">CropCollision</span><span class="o">.</span><span class="n">TRUNCATED</span><span class="p">,</span> <span class="kc">False</span>
</span><span id="IntervalTier.mergeLabels-667"><a href="#IntervalTier.mergeLabels-667"><span class="linenos">667</span></a>            <span class="p">)</span>
</span><span id="IntervalTier.mergeLabels-668"><a href="#IntervalTier.mergeLabels-668"><span class="linenos">668</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">subTier</span><span class="o">.</span><span class="n">_entries</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IntervalTier.mergeLabels-669"><a href="#IntervalTier.mergeLabels-669"><span class="linenos">669</span></a>                <span class="k">continue</span>
</span><span id="IntervalTier.mergeLabels-670"><a href="#IntervalTier.mergeLabels-670"><span class="linenos">670</span></a>
</span><span id="IntervalTier.mergeLabels-671"><a href="#IntervalTier.mergeLabels-671"><span class="linenos">671</span></a>            <span class="n">subLabel</span> <span class="o">=</span> <span class="n">demarcator</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">entry</span><span class="o">.</span><span class="n">label</span> <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">subTier</span><span class="o">.</span><span class="n">entries</span><span class="p">])</span>
</span><span id="IntervalTier.mergeLabels-672"><a href="#IntervalTier.mergeLabels-672"><span class="linenos">672</span></a>            <span class="n">label</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">interval</span><span class="o">.</span><span class="n">label</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">subLabel</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="IntervalTier.mergeLabels-673"><a href="#IntervalTier.mergeLabels-673"><span class="linenos">673</span></a>
</span><span id="IntervalTier.mergeLabels-674"><a href="#IntervalTier.mergeLabels-674"><span class="linenos">674</span></a>            <span class="n">start</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">subTier</span><span class="o">.</span><span class="n">_entries</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
</span><span id="IntervalTier.mergeLabels-675"><a href="#IntervalTier.mergeLabels-675"><span class="linenos">675</span></a>            <span class="n">end</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">subTier</span><span class="o">.</span><span class="n">_entries</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
</span><span id="IntervalTier.mergeLabels-676"><a href="#IntervalTier.mergeLabels-676"><span class="linenos">676</span></a>
</span><span id="IntervalTier.mergeLabels-677"><a href="#IntervalTier.mergeLabels-677"><span class="linenos">677</span></a>            <span class="n">intersectedInterval</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="IntervalTier.mergeLabels-678"><a href="#IntervalTier.mergeLabels-678"><span class="linenos">678</span></a>                <span class="n">start</span><span class="p">,</span>
</span><span id="IntervalTier.mergeLabels-679"><a href="#IntervalTier.mergeLabels-679"><span class="linenos">679</span></a>                <span class="n">end</span><span class="p">,</span>
</span><span id="IntervalTier.mergeLabels-680"><a href="#IntervalTier.mergeLabels-680"><span class="linenos">680</span></a>                <span class="n">label</span><span class="p">,</span>
</span><span id="IntervalTier.mergeLabels-681"><a href="#IntervalTier.mergeLabels-681"><span class="linenos">681</span></a>            <span class="p">)</span>
</span><span id="IntervalTier.mergeLabels-682"><a href="#IntervalTier.mergeLabels-682"><span class="linenos">682</span></a>
</span><span id="IntervalTier.mergeLabels-683"><a href="#IntervalTier.mergeLabels-683"><span class="linenos">683</span></a>            <span class="n">retEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">intersectedInterval</span><span class="p">)</span>
</span><span id="IntervalTier.mergeLabels-684"><a href="#IntervalTier.mergeLabels-684"><span class="linenos">684</span></a>
</span><span id="IntervalTier.mergeLabels-685"><a href="#IntervalTier.mergeLabels-685"><span class="linenos">685</span></a>        <span class="n">newName</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">tier</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="IntervalTier.mergeLabels-686"><a href="#IntervalTier.mergeLabels-686"><span class="linenos">686</span></a>
</span><span id="IntervalTier.mergeLabels-687"><a href="#IntervalTier.mergeLabels-687"><span class="linenos">687</span></a>        <span class="n">retTier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">newName</span><span class="p">,</span> <span class="n">retEntryList</span><span class="p">)</span>
</span><span id="IntervalTier.mergeLabels-688"><a href="#IntervalTier.mergeLabels-688"><span class="linenos">688</span></a>
</span><span id="IntervalTier.mergeLabels-689"><a href="#IntervalTier.mergeLabels-689"><span class="linenos">689</span></a>        <span class="k">return</span> <span class="n">retTier</span>
</span></pre></div>


            <div class="docstring"><p>Merges labels of overlapping tiers into this tier</p>

<ul>
<li>All intervals in this tier will appear in the output; for the given tier, only intervals
that overlap with content in this tier will appear in the output
e.g. [(1, 2, 'foo'), (3, 4, 'bar')] and [(1, 2, 'bang'), (2, 3, 'wizz')]
      -> [(1, 2, 'foo(bang)'), (3, 4, 'bar()')]</li>
<li>If multiple entries exist in a subinterval, their labels will be concatenated
e.g. [(1, 2, 'hi')] and [(1, 1.5, 'h'), (1.5, 2, 'ai')] -> [(1, 2, 'hi(h,ai)')]</li>
</ul>

<p>compare with <a href="#IntervalTier.intersection">IntervalTier.intersection</a></p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>tier:</strong>  the tier to intersect with</li>
<li><strong>demarcator:</strong>  the string to separate items that fall in the same subinterval</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>IntervalTier: the modified version of the current tier</p>
</blockquote>
</div>


                            </div>
                            <div id="IntervalTier.morph" class="classattr">
                                        <input id="IntervalTier.morph-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">morph</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">targetTier</span><span class="p">:</span> <span class="n"><a href="#IntervalTier">IntervalTier</a></span>,</span><span class="param">	<span class="n">filterFunc</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n"><a href="#IntervalTier">IntervalTier</a></span>:</span></span>

                <label class="view-source-button" for="IntervalTier.morph-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntervalTier.morph"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntervalTier.morph-691"><a href="#IntervalTier.morph-691"><span class="linenos">691</span></a>    <span class="k">def</span> <span class="nf">morph</span><span class="p">(</span>
</span><span id="IntervalTier.morph-692"><a href="#IntervalTier.morph-692"><span class="linenos">692</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="IntervalTier.morph-693"><a href="#IntervalTier.morph-693"><span class="linenos">693</span></a>        <span class="n">targetTier</span><span class="p">:</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">,</span>
</span><span id="IntervalTier.morph-694"><a href="#IntervalTier.morph-694"><span class="linenos">694</span></a>        <span class="n">filterFunc</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="IntervalTier.morph-695"><a href="#IntervalTier.morph-695"><span class="linenos">695</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IntervalTier&quot;</span><span class="p">:</span>
</span><span id="IntervalTier.morph-696"><a href="#IntervalTier.morph-696"><span class="linenos">696</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Morphs the duration of segments in this tier to those in another</span>
</span><span id="IntervalTier.morph-697"><a href="#IntervalTier.morph-697"><span class="linenos">697</span></a>
</span><span id="IntervalTier.morph-698"><a href="#IntervalTier.morph-698"><span class="linenos">698</span></a><span class="sd">        This preserves the labels and the duration of silence in</span>
</span><span id="IntervalTier.morph-699"><a href="#IntervalTier.morph-699"><span class="linenos">699</span></a><span class="sd">        this tier while changing the duration of labeled segments.</span>
</span><span id="IntervalTier.morph-700"><a href="#IntervalTier.morph-700"><span class="linenos">700</span></a>
</span><span id="IntervalTier.morph-701"><a href="#IntervalTier.morph-701"><span class="linenos">701</span></a><span class="sd">        Args:</span>
</span><span id="IntervalTier.morph-702"><a href="#IntervalTier.morph-702"><span class="linenos">702</span></a><span class="sd">            targetTier:</span>
</span><span id="IntervalTier.morph-703"><a href="#IntervalTier.morph-703"><span class="linenos">703</span></a><span class="sd">            filterFunc: if specified, filters entries. The</span>
</span><span id="IntervalTier.morph-704"><a href="#IntervalTier.morph-704"><span class="linenos">704</span></a><span class="sd">                functor takes one argument, an Interval. It returns true</span>
</span><span id="IntervalTier.morph-705"><a href="#IntervalTier.morph-705"><span class="linenos">705</span></a><span class="sd">                if the Interval should be modified and false if not.</span>
</span><span id="IntervalTier.morph-706"><a href="#IntervalTier.morph-706"><span class="linenos">706</span></a>
</span><span id="IntervalTier.morph-707"><a href="#IntervalTier.morph-707"><span class="linenos">707</span></a><span class="sd">        Returns:</span>
</span><span id="IntervalTier.morph-708"><a href="#IntervalTier.morph-708"><span class="linenos">708</span></a><span class="sd">            The modified version of the current tier</span>
</span><span id="IntervalTier.morph-709"><a href="#IntervalTier.morph-709"><span class="linenos">709</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier.morph-710"><a href="#IntervalTier.morph-710"><span class="linenos">710</span></a>        <span class="n">cumulativeAdjustAmount</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="IntervalTier.morph-711"><a href="#IntervalTier.morph-711"><span class="linenos">711</span></a>        <span class="n">newEntryList</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="IntervalTier.morph-712"><a href="#IntervalTier.morph-712"><span class="linenos">712</span></a>        <span class="n">allIntervals</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">,</span> <span class="n">targetTier</span><span class="o">.</span><span class="n">entries</span><span class="p">]</span>
</span><span id="IntervalTier.morph-713"><a href="#IntervalTier.morph-713"><span class="linenos">713</span></a>        <span class="k">for</span> <span class="n">sourceInterval</span><span class="p">,</span> <span class="n">targetInterval</span> <span class="ow">in</span> <span class="n">utils</span><span class="o">.</span><span class="n">safeZip</span><span class="p">(</span><span class="n">allIntervals</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>
</span><span id="IntervalTier.morph-714"><a href="#IntervalTier.morph-714"><span class="linenos">714</span></a>            <span class="c1"># sourceInterval.start - lastFromEnd -&gt; was this interval and the</span>
</span><span id="IntervalTier.morph-715"><a href="#IntervalTier.morph-715"><span class="linenos">715</span></a>            <span class="c1"># last one adjacent?</span>
</span><span id="IntervalTier.morph-716"><a href="#IntervalTier.morph-716"><span class="linenos">716</span></a>            <span class="n">newStart</span> <span class="o">=</span> <span class="n">sourceInterval</span><span class="o">.</span><span class="n">start</span> <span class="o">+</span> <span class="n">cumulativeAdjustAmount</span>
</span><span id="IntervalTier.morph-717"><a href="#IntervalTier.morph-717"><span class="linenos">717</span></a>
</span><span id="IntervalTier.morph-718"><a href="#IntervalTier.morph-718"><span class="linenos">718</span></a>            <span class="n">currIntervalDuration</span> <span class="o">=</span> <span class="n">sourceInterval</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">sourceInterval</span><span class="o">.</span><span class="n">start</span>
</span><span id="IntervalTier.morph-719"><a href="#IntervalTier.morph-719"><span class="linenos">719</span></a>            <span class="k">if</span> <span class="n">filterFunc</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">filterFunc</span><span class="p">(</span><span class="n">sourceInterval</span><span class="o">.</span><span class="n">label</span><span class="p">):</span>
</span><span id="IntervalTier.morph-720"><a href="#IntervalTier.morph-720"><span class="linenos">720</span></a>                <span class="n">newIntervalDuration</span> <span class="o">=</span> <span class="n">targetInterval</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">targetInterval</span><span class="o">.</span><span class="n">start</span>
</span><span id="IntervalTier.morph-721"><a href="#IntervalTier.morph-721"><span class="linenos">721</span></a>                <span class="n">cumulativeAdjustAmount</span> <span class="o">+=</span> <span class="n">newIntervalDuration</span> <span class="o">-</span> <span class="n">currIntervalDuration</span>
</span><span id="IntervalTier.morph-722"><a href="#IntervalTier.morph-722"><span class="linenos">722</span></a>                <span class="n">newEnd</span> <span class="o">=</span> <span class="n">newStart</span> <span class="o">+</span> <span class="n">newIntervalDuration</span>
</span><span id="IntervalTier.morph-723"><a href="#IntervalTier.morph-723"><span class="linenos">723</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="IntervalTier.morph-724"><a href="#IntervalTier.morph-724"><span class="linenos">724</span></a>                <span class="n">newEnd</span> <span class="o">=</span> <span class="n">newStart</span> <span class="o">+</span> <span class="n">currIntervalDuration</span>
</span><span id="IntervalTier.morph-725"><a href="#IntervalTier.morph-725"><span class="linenos">725</span></a>
</span><span id="IntervalTier.morph-726"><a href="#IntervalTier.morph-726"><span class="linenos">726</span></a>            <span class="n">newEntryList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Interval</span><span class="p">(</span><span class="n">newStart</span><span class="p">,</span> <span class="n">newEnd</span><span class="p">,</span> <span class="n">sourceInterval</span><span class="o">.</span><span class="n">label</span><span class="p">))</span>
</span><span id="IntervalTier.morph-727"><a href="#IntervalTier.morph-727"><span class="linenos">727</span></a>
</span><span id="IntervalTier.morph-728"><a href="#IntervalTier.morph-728"><span class="linenos">728</span></a>        <span class="n">newMin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">minTimestamp</span>
</span><span id="IntervalTier.morph-729"><a href="#IntervalTier.morph-729"><span class="linenos">729</span></a>        <span class="n">cumulativeDifference</span> <span class="o">=</span> <span class="n">newEntryList</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end</span>
</span><span id="IntervalTier.morph-730"><a href="#IntervalTier.morph-730"><span class="linenos">730</span></a>        <span class="n">newMax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span> <span class="o">+</span> <span class="n">cumulativeDifference</span>
</span><span id="IntervalTier.morph-731"><a href="#IntervalTier.morph-731"><span class="linenos">731</span></a>
</span><span id="IntervalTier.morph-732"><a href="#IntervalTier.morph-732"><span class="linenos">732</span></a>        <span class="k">return</span> <span class="n">IntervalTier</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">newEntryList</span><span class="p">,</span> <span class="n">newMin</span><span class="p">,</span> <span class="n">newMax</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Morphs the duration of segments in this tier to those in another</p>

<p>This preserves the labels and the duration of silence in
this tier while changing the duration of labeled segments.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>targetTier:</strong> </li>
<li><strong>filterFunc:</strong>  if specified, filters entries. The
functor takes one argument, an Interval. It returns true
if the Interval should be modified and false if not.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>The modified version of the current tier</p>
</blockquote>
</div>


                            </div>
                            <div id="IntervalTier.validate" class="classattr">
                                        <input id="IntervalTier.validate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">validate</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">reportingMode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;silence&#39;</span><span class="p">,</span> <span class="s1">&#39;warning&#39;</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;warning&#39;</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="IntervalTier.validate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntervalTier.validate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntervalTier.validate-734"><a href="#IntervalTier.validate-734"><span class="linenos">734</span></a>    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span>
</span><span id="IntervalTier.validate-735"><a href="#IntervalTier.validate-735"><span class="linenos">735</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">reportingMode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;silence&quot;</span><span class="p">,</span> <span class="s2">&quot;warning&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;warning&quot;</span>
</span><span id="IntervalTier.validate-736"><a href="#IntervalTier.validate-736"><span class="linenos">736</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="IntervalTier.validate-737"><a href="#IntervalTier.validate-737"><span class="linenos">737</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate this tier</span>
</span><span id="IntervalTier.validate-738"><a href="#IntervalTier.validate-738"><span class="linenos">738</span></a>
</span><span id="IntervalTier.validate-739"><a href="#IntervalTier.validate-739"><span class="linenos">739</span></a><span class="sd">        Args:</span>
</span><span id="IntervalTier.validate-740"><a href="#IntervalTier.validate-740"><span class="linenos">740</span></a><span class="sd">            reportingMode (str): Determines the behavior if validation fails.</span>
</span><span id="IntervalTier.validate-741"><a href="#IntervalTier.validate-741"><span class="linenos">741</span></a>
</span><span id="IntervalTier.validate-742"><a href="#IntervalTier.validate-742"><span class="linenos">742</span></a><span class="sd">        Returns:</span>
</span><span id="IntervalTier.validate-743"><a href="#IntervalTier.validate-743"><span class="linenos">743</span></a><span class="sd">            True if the tier is valid; False if not</span>
</span><span id="IntervalTier.validate-744"><a href="#IntervalTier.validate-744"><span class="linenos">744</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="IntervalTier.validate-745"><a href="#IntervalTier.validate-745"><span class="linenos">745</span></a>        <span class="n">utils</span><span class="o">.</span><span class="n">validateOption</span><span class="p">(</span>
</span><span id="IntervalTier.validate-746"><a href="#IntervalTier.validate-746"><span class="linenos">746</span></a>            <span class="s2">&quot;reportingMode&quot;</span><span class="p">,</span> <span class="n">reportingMode</span><span class="p">,</span> <span class="n">constants</span><span class="o">.</span><span class="n">ErrorReportingMode</span>
</span><span id="IntervalTier.validate-747"><a href="#IntervalTier.validate-747"><span class="linenos">747</span></a>        <span class="p">)</span>
</span><span id="IntervalTier.validate-748"><a href="#IntervalTier.validate-748"><span class="linenos">748</span></a>        <span class="n">errorReporter</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">getErrorReporter</span><span class="p">(</span><span class="n">reportingMode</span><span class="p">)</span>
</span><span id="IntervalTier.validate-749"><a href="#IntervalTier.validate-749"><span class="linenos">749</span></a>
</span><span id="IntervalTier.validate-750"><a href="#IntervalTier.validate-750"><span class="linenos">750</span></a>        <span class="n">isValid</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="IntervalTier.validate-751"><a href="#IntervalTier.validate-751"><span class="linenos">751</span></a>        <span class="n">previousInterval</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="IntervalTier.validate-752"><a href="#IntervalTier.validate-752"><span class="linenos">752</span></a>        <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
</span><span id="IntervalTier.validate-753"><a href="#IntervalTier.validate-753"><span class="linenos">753</span></a>            <span class="k">if</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span> <span class="o">&gt;=</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="p">:</span>
</span><span id="IntervalTier.validate-754"><a href="#IntervalTier.validate-754"><span class="linenos">754</span></a>                <span class="n">isValid</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="IntervalTier.validate-755"><a href="#IntervalTier.validate-755"><span class="linenos">755</span></a>                <span class="n">errorReporter</span><span class="p">(</span>
</span><span id="IntervalTier.validate-756"><a href="#IntervalTier.validate-756"><span class="linenos">756</span></a>                    <span class="n">errors</span><span class="o">.</span><span class="n">TextgridStateError</span><span class="p">,</span>
</span><span id="IntervalTier.validate-757"><a href="#IntervalTier.validate-757"><span class="linenos">757</span></a>                    <span class="sa">f</span><span class="s2">&quot;Invalid interval. End time occurs before or on the start time(</span><span class="si">{</span><span class="n">interval</span><span class="si">}</span><span class="s2">).&quot;</span><span class="p">,</span>
</span><span id="IntervalTier.validate-758"><a href="#IntervalTier.validate-758"><span class="linenos">758</span></a>                <span class="p">)</span>
</span><span id="IntervalTier.validate-759"><a href="#IntervalTier.validate-759"><span class="linenos">759</span></a>
</span><span id="IntervalTier.validate-760"><a href="#IntervalTier.validate-760"><span class="linenos">760</span></a>            <span class="k">if</span> <span class="n">previousInterval</span> <span class="ow">and</span> <span class="n">previousInterval</span><span class="o">.</span><span class="n">end</span> <span class="o">&gt;</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">:</span>
</span><span id="IntervalTier.validate-761"><a href="#IntervalTier.validate-761"><span class="linenos">761</span></a>                <span class="n">isValid</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="IntervalTier.validate-762"><a href="#IntervalTier.validate-762"><span class="linenos">762</span></a>                <span class="n">errorReporter</span><span class="p">(</span>
</span><span id="IntervalTier.validate-763"><a href="#IntervalTier.validate-763"><span class="linenos">763</span></a>                    <span class="n">errors</span><span class="o">.</span><span class="n">TextgridStateError</span><span class="p">,</span>
</span><span id="IntervalTier.validate-764"><a href="#IntervalTier.validate-764"><span class="linenos">764</span></a>                    <span class="sa">f</span><span class="s2">&quot;Intervals are not sorted in time: &quot;</span>
</span><span id="IntervalTier.validate-765"><a href="#IntervalTier.validate-765"><span class="linenos">765</span></a>                    <span class="sa">f</span><span class="s2">&quot;[(</span><span class="si">{</span><span class="n">previousInterval</span><span class="si">}</span><span class="s2">), (</span><span class="si">{</span><span class="n">interval</span><span class="si">}</span><span class="s2">)]&quot;</span><span class="p">,</span>
</span><span id="IntervalTier.validate-766"><a href="#IntervalTier.validate-766"><span class="linenos">766</span></a>                <span class="p">)</span>
</span><span id="IntervalTier.validate-767"><a href="#IntervalTier.validate-767"><span class="linenos">767</span></a>
</span><span id="IntervalTier.validate-768"><a href="#IntervalTier.validate-768"><span class="linenos">768</span></a>            <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">checkIsUndershoot</span><span class="p">(</span>
</span><span id="IntervalTier.validate-769"><a href="#IntervalTier.validate-769"><span class="linenos">769</span></a>                <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">minTimestamp</span><span class="p">,</span> <span class="n">errorReporter</span>
</span><span id="IntervalTier.validate-770"><a href="#IntervalTier.validate-770"><span class="linenos">770</span></a>            <span class="p">):</span>
</span><span id="IntervalTier.validate-771"><a href="#IntervalTier.validate-771"><span class="linenos">771</span></a>                <span class="n">isValid</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="IntervalTier.validate-772"><a href="#IntervalTier.validate-772"><span class="linenos">772</span></a>
</span><span id="IntervalTier.validate-773"><a href="#IntervalTier.validate-773"><span class="linenos">773</span></a>            <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">checkIsOvershoot</span><span class="p">(</span><span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxTimestamp</span><span class="p">,</span> <span class="n">errorReporter</span><span class="p">):</span>
</span><span id="IntervalTier.validate-774"><a href="#IntervalTier.validate-774"><span class="linenos">774</span></a>                <span class="n">isValid</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="IntervalTier.validate-775"><a href="#IntervalTier.validate-775"><span class="linenos">775</span></a>
</span><span id="IntervalTier.validate-776"><a href="#IntervalTier.validate-776"><span class="linenos">776</span></a>            <span class="n">previousInterval</span> <span class="o">=</span> <span class="n">interval</span>
</span><span id="IntervalTier.validate-777"><a href="#IntervalTier.validate-777"><span class="linenos">777</span></a>
</span><span id="IntervalTier.validate-778"><a href="#IntervalTier.validate-778"><span class="linenos">778</span></a>        <span class="k">return</span> <span class="n">isValid</span>
</span></pre></div>


            <div class="docstring"><p>Validate this tier</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>reportingMode (str):</strong>  Determines the behavior if validation fails.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>True if the tier is valid; False if not</p>
</blockquote>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="textgrid_tier.html#TextgridTier">praatio.data_classes.textgrid_tier.TextgridTier</a></dt>
                                <dd id="IntervalTier.name" class="variable"><a href="textgrid_tier.html#TextgridTier.name">name</a></dd>
                <dd id="IntervalTier.minTimestamp" class="variable"><a href="textgrid_tier.html#TextgridTier.minTimestamp">minTimestamp</a></dd>
                <dd id="IntervalTier.maxTimestamp" class="variable"><a href="textgrid_tier.html#TextgridTier.maxTimestamp">maxTimestamp</a></dd>
                <dd id="IntervalTier.errorReporter" class="variable"><a href="textgrid_tier.html#TextgridTier.errorReporter">errorReporter</a></dd>
                <dd id="IntervalTier.entries" class="variable"><a href="textgrid_tier.html#TextgridTier.entries">entries</a></dd>
                <dd id="IntervalTier.appendTier" class="function"><a href="textgrid_tier.html#TextgridTier.appendTier">appendTier</a></dd>
                <dd id="IntervalTier.find" class="function"><a href="textgrid_tier.html#TextgridTier.find">find</a></dd>
                <dd id="IntervalTier.new" class="function"><a href="textgrid_tier.html#TextgridTier.new">new</a></dd>
                <dd id="IntervalTier.sort" class="function"><a href="textgrid_tier.html#TextgridTier.sort">sort</a></dd>
                <dd id="IntervalTier.union" class="function"><a href="textgrid_tier.html#TextgridTier.union">union</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>